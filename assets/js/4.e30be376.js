(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{422:function(a,s,t){a.exports=t.p+"assets/img/maven-inherit-resources.be01ddb0.jpg"},423:function(a,s,t){a.exports=t.p+"assets/img/springboot-maven-plugin-idea.7ac64878.png"},424:function(a,s,t){a.exports=t.p+"assets/img/springboot-maven-plugin-parent.6964885f.png"},425:function(a,s,t){a.exports=t.p+"assets/img/package-result-structure.824c7a1f.png"},426:function(a,s,t){a.exports=t.p+"assets/img/repackage-jar-info.319b7119.png"},427:function(a,s,t){a.exports=t.p+"assets/img/original-jar.4515c14c.png"},428:function(a,s,t){a.exports=t.p+"assets/img/repackage-rename.47f40e0d.png"},509:function(a,s,t){"use strict";t.r(s);var n=t(48),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"maven-进阶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#maven-进阶"}},[a._v("#")]),a._v(" Maven 进阶")]),a._v(" "),n("h2",{attrs:{id:"参考文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[a._v("#")]),a._v(" 参考文档")]),a._v(" "),n("h2",{attrs:{id:"配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[a._v("#")]),a._v(" 配置文件")]),a._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://maven.apache.org/settings.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Maven 配置文件官方文档"),n("OutboundLink")],1)])]),a._v(" "),n("h2",{attrs:{id:"继承与聚合"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#继承与聚合"}},[a._v("#")]),a._v(" 继承与聚合")]),a._v(" "),n("p",[a._v("虽然在开发的时候，会将继承和聚合一起使用，但是这是两个完全不同的概念。")]),a._v(" "),n("h3",{attrs:{id:"继承"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#继承"}},[a._v("#")]),a._v(" 继承")]),a._v(" "),n("p",[a._v("继承就是子模块自动继承父模块的一些依赖、插件、属性等。")]),a._v(" "),n("p",[a._v("继承的目的是为了消除重复性，实际项目中最常用的就是将子模块 POM 中很多相同的配置提取出来统一锁定在父模块 POM 中。如 "),n("code",[a._v("groupId")]),a._v("、"),n("code",[a._v("artifactId")]),a._v("、"),n("code",[a._v("version")]),a._v(" 等。然后在使用的时候，子模块会继承到父模块的版本号，子模块不需要再指定版本号，方便统一管理项目依赖。")]),a._v(" "),n("p",[a._v("可以继承到的资源有：")]),a._v(" "),n("p",[n("img",{attrs:{src:t(422),alt:"可以继承到的资源"}})]),a._v(" "),n("p",[a._v("继承使用的元素是 "),n("code",[a._v("<parent>")]),a._v("，子模块必须指定父模块。父模块坐标中的 "),n("code",[a._v("<packaging>")]),a._v(" 必须是 "),n("code",[a._v("pom")]),a._v("，否则子模块不会继承。")]),a._v(" "),n("p",[a._v("父模块中实现依赖管理的元素是 "),n("code",[a._v("<dependencyManagement>")]),a._v("：")]),a._v(" "),n("ul",[n("li",[n("code",[a._v("<dependencyManagement>")]),a._v(" 只是声明依赖，不会引入，只有子模块中的 "),n("code",[a._v("<dependency>")]),a._v(" 中指定后，才会解析依赖。")])]),a._v(" "),n("p",[a._v("注意："),n("code",[a._v("<dependencyManagement>")]),a._v(" 中的版本号会覆盖所有的传递依赖的版本号！！")]),a._v(" "),n("h3",{attrs:{id:"聚合"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#聚合"}},[a._v("#")]),a._v(" 聚合")]),a._v(" "),n("p",[a._v("聚合就是将多个模块统一进行打包，他们是整体与部分的关系。聚合就是在执行 maven 命令构建项目时，整个项目会被打包在一起。")]),a._v(" "),n("p",[a._v("聚合使用的元素是 "),n("code",[a._v("<module>")]),a._v("，注意 "),n("code",[a._v("<module>")]),a._v(" 中的是相对路径，被聚合的顺序也不是声明的顺序（实际是按照依赖关系来执行的）。")]),a._v(" "),n("p",[a._v("简单讲就是执行总模块的 "),n("code",[a._v("compile")]),a._v("，那就会执行所有被聚合的 "),n("code",[a._v("compile")]),a._v("。")]),a._v(" "),n("h2",{attrs:{id:"跳过测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#跳过测试"}},[a._v("#")]),a._v(" 跳过测试")]),a._v(" "),n("p",[a._v("命令后添加参数 "),n("code",[a._v("-D skipTests")]),a._v("，例如 "),n("code",[a._v("mvn install -D skipTests")]),a._v("。")]),a._v(" "),n("h2",{attrs:{id:"打包-package"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打包-package"}},[a._v("#")]),a._v(" 打包 package")]),a._v(" "),n("h3",{attrs:{id:"spring-boot-打包插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot-打包插件"}},[a._v("#")]),a._v(" Spring boot 打包插件")]),a._v(" "),n("p",[a._v("以常用的 spring boot 举例，spring boot 工程创建好之后，会发现 pom.xml 最下面默认配置了一个打包插件，如果是手动创建的 maven 项目就要手动添加这个插件了。")]),a._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugins")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 该插件会将 jar 运行所有需要的依赖 jar 打包进去 --\x3e")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-maven-plugin"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugins")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br")])]),n("p",[a._v("通过 IDEA 可以看到 maven 中包含了 "),n("code",[a._v("spring-boot-maven-plugin")]),a._v(" 插件：")]),a._v(" "),n("p",[n("img",{attrs:{src:t(423),alt:"IDEA 中插件视图"}})]),a._v(" "),n("p",[a._v("Goal 功能说明：")]),a._v(" "),n("ul",[n("li",[n("code",[a._v("build-info")]),a._v("：生成项目的构建信息文件 "),n("code",[a._v("build-info.properties")]),a._v("。")]),a._v(" "),n("li",[n("code",[a._v("repackage")]),a._v("：这个是 "),n("strong",[a._v("默认")]),a._v(" goal，在 "),n("code",[a._v("mvn package")]),a._v(" 执行之后，这个命令再次打包生成可执行的 jar，同时将 "),n("code",[a._v("mvn package")]),a._v(" 生成的 jar 重命名为 "),n("code",[a._v("*.origin")]),a._v("。")]),a._v(" "),n("li",[n("code",[a._v("run")]),a._v("：这个可以用来运行 Spring Boot 应用。")]),a._v(" "),n("li",[n("code",[a._v("start")]),a._v("：这个在 "),n("code",[a._v("mvn integration-test")]),a._v(" 阶段，进行 Spring Boot 应用生命周期的管理。")]),a._v(" "),n("li",[n("code",[a._v("stop")]),a._v("：这个在 "),n("code",[a._v("mvn integration-test")]),a._v(" 阶段，进行 Spring Boot 应用生命周期的管理。")])]),a._v(" "),n("p",[n("code",[a._v("spring-boot-maven-plugin")]),a._v(" 插件默认在父工程 "),n("code",[a._v("sprint-boot-starter-parent")]),a._v(" 中被指定为 "),n("code",[a._v("repackage")]),a._v("，如果需要设置其他属性，需要在当前应用的pom中进行设置。可以点击"),n("code",[a._v("sprint-boot-starter-parent")]),a._v(" 进入父 pom 进行查看，如下图：")]),a._v(" "),n("p",[n("img",{attrs:{src:t(424),alt:"Springboot maven plugin 的默认值"}})]),a._v(" "),n("h3",{attrs:{id:"打包后结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打包后结构"}},[a._v("#")]),a._v(" 打包后结构")]),a._v(" "),n("p",[a._v("配置了 "),n("code",[a._v("spring-boot-maven-plugin")]),a._v(" 插件后，执行 "),n("code",[a._v("mvn clean install")]),a._v(" 命令后，会在 target 目录下生成打包后的信息：")]),a._v(" "),n("p",[n("img",{attrs:{src:t(425),alt:"打包后 target 目录信息"}})]),a._v(" "),n("p",[a._v("打包后会有两个 jar 信息，一个是 "),n("code",[a._v("mvn install")]),a._v(" 原始打包生成的 jar 包，一个是 "),n("code",[a._v("spring-boot-maven-plugin")]),a._v(" repackage 之后生成的可执行 jar 包。")]),a._v(" "),n("h4",{attrs:{id:"可执行-jar"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可执行-jar"}},[a._v("#")]),a._v(" 可执行 jar")]),a._v(" "),n("p",[a._v("可执行 jar 的内部结构：")]),a._v(" "),n("p",[n("img",{attrs:{src:t(426),alt:"repackage 得到的可执行 jar"}})]),a._v(" "),n("ul",[n("li",[n("p",[a._v("其中 "),n("code",[a._v("BOOT-INF")]),a._v(" 主要是一些启动信息，包含 classes 和 lib 文件，classes 文件放的是项目里生成的字节文件 class 和配置文件，lib 文件是项目所需要的 jar 依赖。")])]),a._v(" "),n("li",[n("p",[n("code",[a._v("META-INF")]),a._v(" 目录下主要是 maven 的一些元数据信息，"),n("code",[a._v("MANIFEST.MF")]),a._v(" 文件内容如下：")]),a._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[a._v("Manifest-Version"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("\nSpring-Boot-Classpath-Index"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" BOOT-INF/classpath.idx\nImplementation-Title"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" play\nImplementation-Version"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("-SNAPSHOT\nSpring-Boot-Layers-Index"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" BOOT-INF/layers.idx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Start-Class 是项目的主程序入口，即 main 方法。")]),a._v("\nStart-Class"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" cn.test.controller.PlayApp\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Springboot-Boot-Classes 和 Spring-Boot-Lib 指向的是生成的 BOOT-INF 下的对应位置。")]),a._v("\nSpring-Boot-Classes"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" BOOT-INF/classes/\nSpring-Boot-Lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" BOOT-INF/lib/\nBuild-Jdk-Spec"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),a._v("\nSpring-Boot-Version"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.4")]),a._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\nCreated-By"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" Maven Jar Plugin "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.2")]),a._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nMain-Class"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" org.springframework.boot.loader.JarLauncher\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br")])]),n("ul",[n("li",[n("p",[a._v("其中 "),n("code",[a._v("Main-Class")]),a._v(" 属性值为 "),n("code",[a._v("org.springframework.boot.loader.JarLauncher")]),a._v("，这个值可以通过设置属性 "),n("code",[a._v("layout")]),a._v(" 来控制：")]),a._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-maven-plugin"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--使用 -Dloader.path 需要在打包的时候增加 <layout>ZIP</layout>，不指定的话 -Dloader.path 不生效--\x3e")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("layout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("ZIP"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("layout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 指定该jar包启动时的主类[建议]，即启动类 --\x3e")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("mainClass")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("cn.test.controller.PlayApp"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("mainClass")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("executions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("execution")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("goals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("goal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("repackage"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("goal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("goals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("execution")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("executions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br")])])])])])]),a._v(" "),n("p",[a._v("打包出来的可执行 jar 之所以可以使用 "),n("code",[a._v("java -jar")]),a._v(" 运行，和 "),n("code",[a._v("MANIFEST.MF")]),a._v(" 文件里的配置关系密切。")]),a._v(" "),n("h4",{attrs:{id:"original-jar"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#original-jar"}},[a._v("#")]),a._v(" Original jar")]),a._v(" "),n("p",[a._v("原始 jar 的内部结构：")]),a._v(" "),n("p",[n("img",{attrs:{src:t(427),alt:"原始 jar"}})]),a._v(" "),n("p",[a._v("可以看到通过 "),n("code",[a._v("mvn package")]),a._v(" 构建的 jar 是一个普通的 jar，包含的都是项目的字节文件和一些配置文件，没有将项目依赖的第三方 jar 包含进来。再看下 "),n("code",[a._v("MANIFEST.MF")]),a._v(" 文件：")]),a._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[a._v("Manifest-Version"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("\nImplementation-Title"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" play\nImplementation-Version"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("-SNAPSHOT\nBuild-Jdk-Spec"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.8")]),a._v("\nCreated-By"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" Maven Jar Plugin "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.2")]),a._v("."),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[a._v("其中没有包含 "),n("code",[a._v("Start-Class")]),a._v("、"),n("code",[a._v("Main-Class")]),a._v(" 等信息，这个与可执行 jar 的该文件存在很多差异，而且目录结构也有很大差异。")]),a._v(" "),n("h4",{attrs:{id:"可执行-jar-的一些问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可执行-jar-的一些问题"}},[a._v("#")]),a._v(" 可执行 jar 的一些问题")]),a._v(" "),n("p",[a._v("一般对使用 "),n("code",[a._v("spring-boot-maven-plugin")]),a._v(" 插件打出的可执行 jar 不建议作为 "),n("code",[a._v("jar")]),a._v(" 给其他服务引用。")]),a._v(" "),n("p",[a._v("因为可能出现访问可执行 jar 中的一些配置文件找不到的问题。如果想让构建出来的原始 jar 不被重新打包，可以对 "),n("code",[a._v("spring-boot-maven-plugin")]),a._v(" 插件配置 "),n("code",[a._v("classifier")]),a._v(" 属性，自定义一个可运行 jar 名称，这样该插件就不会对原始的 jar 重命名操作了。")]),a._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 指定该 jar 包启动时的主类[建议]，即启动类 --\x3e")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("mainClass")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("cn.test.controller.PlayApp"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("mainClass")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("classifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("repackageCanExec"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("classifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("ul",[n("li",[a._v("配置的 "),n("code",[a._v("classifier")]),a._v(" 表示可执行 jar 的名字，配置了这个之后，在插件执行 "),n("code",[a._v("repackage")]),a._v(" 命令时，就不会给 "),n("code",[a._v("mvn package")]),a._v(" 所打成的 jar 重命名了，这样就可以被其他项目引用了，"),n("code",[a._v("classifier")]),a._v(" 命名的为可执行 jar。")])]),a._v(" "),n("p",[n("img",{attrs:{src:t(428),alt:"重命名后 jar 结构"}})]),a._v(" "),n("p",[a._v("这样原始 jar 就可以正常被引用当前包下的内容了。")]),a._v(" "),n("h2",{attrs:{id:"私服"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#私服"}},[a._v("#")]),a._v(" 私服")]),a._v(" "),n("h2",{attrs:{id:"讨论区"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#讨论区"}},[a._v("#")]),a._v(" 讨论区")]),a._v(" "),n("blockquote",[n("p",[a._v("由于评论过多会影响页面最下方的导航，故将评论区做默认折叠处理。")])]),a._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[a._v("点击查看评论区内容，渴望您的宝贵建议~")]),a._v(" "),n("Vssue",{attrs:{title:a.$title,options:{locale:"zh"}}})],1)])}),[],!1,null,null,null);s.default=e.exports}}]);