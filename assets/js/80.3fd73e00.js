(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{562:function(t,v,_){"use strict";_.r(v);var s=_(48),a=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"mysql"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[t._v("#")]),t._v(" MySQL")]),t._v(" "),_("h2",{attrs:{id:"参考文档"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/delete.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方 Docs"),_("OutboundLink")],1)])]),t._v(" "),_("h2",{attrs:{id:"图形化界面"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图形化界面"}},[t._v("#")]),t._v(" 图形化界面")]),t._v(" "),_("ul",[_("li",[t._v("DBeaver，开源免费，Linux 首选。")]),t._v(" "),_("li",[t._v("HeidiSQL，一款精简版的，特别好用。")]),t._v(" "),_("li",[t._v("Navicat。")]),t._v(" "),_("li",[t._v("SQLyog。")])]),t._v(" "),_("h2",{attrs:{id:"数据类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[t._v("#")]),t._v(" 数据类型")]),t._v(" "),_("p",[t._v("MySQL 中的数据类型有很多，主要分为三类：")]),t._v(" "),_("ul",[_("li",[t._v("数值类型。")]),t._v(" "),_("li",[t._v("字符串类型。")]),t._v(" "),_("li",[t._v("日期时间类型。")])]),t._v(" "),_("h3",{attrs:{id:"数值类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数值类型"}},[t._v("#")]),t._v(" 数值类型")]),t._v(" "),_("p",[t._v("每种类型都分为有符号（SIGNED）和无符号（UNSIGNED）类型，比如定义一个无符号的小整数 "),_("code",[t._v("age TINYINT UNSIGNED")]),t._v("。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("大小")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("TINYINT")]),t._v(" "),_("td",[t._v("1 byte")]),t._v(" "),_("td",[t._v("小整数")])]),t._v(" "),_("tr",[_("td",[t._v("SMALLINT")]),t._v(" "),_("td",[t._v("2 b")]),t._v(" "),_("td",[t._v("大整数")])]),t._v(" "),_("tr",[_("td",[t._v("MEDIUMINT")]),t._v(" "),_("td",[t._v("3 b")]),t._v(" "),_("td",[t._v("大整数")])]),t._v(" "),_("tr",[_("td",[t._v("INT or INTEGER")]),t._v(" "),_("td",[t._v("4 b")]),t._v(" "),_("td",[t._v("大整数")])]),t._v(" "),_("tr",[_("td",[t._v("BIGINT")]),t._v(" "),_("td",[t._v("8 b")]),t._v(" "),_("td",[t._v("极大整数")])]),t._v(" "),_("tr",[_("td",[t._v("FLOAT")]),t._v(" "),_("td",[t._v("4b")]),t._v(" "),_("td",[t._v("单精度浮点数值")])]),t._v(" "),_("tr",[_("td",[t._v("DOUBLE")]),t._v(" "),_("td",[t._v("8b")]),t._v(" "),_("td",[t._v("双精度浮点数值")])]),t._v(" "),_("tr",[_("td",[t._v("DECIMAL")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("小数值（精确定点数）")])])])]),t._v(" "),_("h3",{attrs:{id:"字符串类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#字符串类型"}},[t._v("#")]),t._v(" 字符串类型")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("大小")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[t._v("CHAR")])]),t._v(" "),_("td",[t._v("0-255 bytes")]),t._v(" "),_("td",[t._v("定长字符串")])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("VARCHAR")])]),t._v(" "),_("td",[t._v("0-65535 bytes")]),t._v(" "),_("td",[t._v("变长字符串")])]),t._v(" "),_("tr",[_("td",[t._v("TINYBLOB")]),t._v(" "),_("td",[t._v("0-255 bytes")]),t._v(" "),_("td",[t._v("不超过 255 个字符的二进制数据")])]),t._v(" "),_("tr",[_("td",[t._v("TINYTEXT")]),t._v(" "),_("td",[t._v("0-255 bytes")]),t._v(" "),_("td",[t._v("短文本字符串")])]),t._v(" "),_("tr",[_("td",[t._v("BLOB")]),t._v(" "),_("td",[t._v("0-65535 bytes")]),t._v(" "),_("td",[t._v("二进制形式的长文本数据")])]),t._v(" "),_("tr",[_("td",[t._v("TEXT")]),t._v(" "),_("td",[t._v("0-65535 bytes")]),t._v(" "),_("td",[t._v("长文本数据")])]),t._v(" "),_("tr",[_("td",[t._v("MEDIUMBLOB")]),t._v(" "),_("td",[t._v("0-16777215 bytes")]),t._v(" "),_("td",[t._v("二进制形式的中等长度文本数据")])]),t._v(" "),_("tr",[_("td",[t._v("MEDIUM TEXT")]),t._v(" "),_("td",[t._v("0-16777215 bytes")]),t._v(" "),_("td",[t._v("中等长度长文本数据")])]),t._v(" "),_("tr",[_("td",[t._v("LONGBLOB")]),t._v(" "),_("td",[t._v("0-4294967295 bytes")]),t._v(" "),_("td",[t._v("二进制形式的极大文本数据")])]),t._v(" "),_("tr",[_("td",[t._v("LONGTEXT")]),t._v(" "),_("td",[t._v("0-4294967295 bytes")]),t._v(" "),_("td",[t._v("极大文本数据")])])])]),t._v(" "),_("p",[_("strong",[t._v("注意：")]),t._v(" 正常使用中，需要指定字符串的长度，比如 "),_("code",[t._v("chart(10)")]),t._v(" 表示最多只能存储 10 个字符，超过报错。假如 "),_("code",[t._v("char(10)")]),t._v(" 中只存储了一个字符，依然会占用 10 个空间，其他的用空格补位。"),_("code",[t._v("varchar(10)")]),t._v(" 中如果如果存储小于 10 个字符的内容，存储的多大就是多大。")]),t._v(" "),_("h3",{attrs:{id:"日期时间类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#日期时间类型"}},[t._v("#")]),t._v(" 日期时间类型")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("大小")]),t._v(" "),_("th",[t._v("范围")]),t._v(" "),_("th",[t._v("格式")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("DATE")]),t._v(" "),_("td",[t._v("3")]),t._v(" "),_("td",[t._v("1000-01-01 至 9999-12-31")]),t._v(" "),_("td",[t._v("YYYY-MM-DD")]),t._v(" "),_("td",[t._v("日期")])]),t._v(" "),_("tr",[_("td",[t._v("TIME")]),t._v(" "),_("td",[t._v("3")]),t._v(" "),_("td",[t._v("-838:59:59 至 838:59:59")]),t._v(" "),_("td",[t._v("HH:MM:SS")]),t._v(" "),_("td",[t._v("时间值或持续时间")])]),t._v(" "),_("tr",[_("td",[t._v("YEAR")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1901 至 2155")]),t._v(" "),_("td",[t._v("YYYY")]),t._v(" "),_("td",[t._v("年份值")])]),t._v(" "),_("tr",[_("td",[t._v("DATETIME")]),t._v(" "),_("td",[t._v("8")]),t._v(" "),_("td",[t._v("1000-01-01 00:00:00 至 9999-12-31 23:59:59")]),t._v(" "),_("td",[t._v("YYYY-MM-DD HH:MM:SS")]),t._v(" "),_("td",[t._v("混合日期和时间值")])]),t._v(" "),_("tr",[_("td",[t._v("TIMESTAMP")]),t._v(" "),_("td",[t._v("4")]),t._v(" "),_("td",[t._v("1970-01-01 00:00:01 至 2038-01-19 03:14:07")]),t._v(" "),_("td",[t._v("混合日期和时间值，时间戳")]),t._v(" "),_("td")])])]),t._v(" "),_("h2",{attrs:{id:"sql"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#sql"}},[t._v("#")]),t._v(" SQL")]),t._v(" "),_("h3",{attrs:{id:"语法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),_("ul",[_("li",[t._v("SQL 语句以分号结尾，可以单行也可多行。")]),t._v(" "),_("li",[t._v("SQL 语句可以使用空格/缩进来增强语句的可读性。")]),t._v(" "),_("li",[t._v("MySQL 数据库的 SQL 语句"),_("code",[t._v("不区分大小写")]),t._v("，关键字建议大写。")]),t._v(" "),_("li",[t._v("注释：\n"),_("ul",[_("li",[t._v("单行注释："),_("code",[t._v("-- xxx")]),t._v(" 或者 "),_("code",[t._v("# xxx")]),t._v("(MySQL 独有)。")]),t._v(" "),_("li",[t._v("多行内容： "),_("code",[t._v("/* xxx */")])])])])]),t._v(" "),_("h3",{attrs:{id:"分类"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[t._v("#")]),t._v(" 分类")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("DDl")]),t._v("，Data Definition Language，数据"),_("code",[t._v("定义")]),t._v("语言，用来"),_("code",[t._v("定义数据库对象")]),t._v("（数据库、表、字段）。")]),t._v(" "),_("li",[_("code",[t._v("DML")]),t._v("，Data Manipulation Language，数据"),_("code",[t._v("操作")]),t._v("语言，用来"),_("code",[t._v("对数据库表中的数据")]),t._v("进行增删改。")]),t._v(" "),_("li",[_("code",[t._v("DQL")]),t._v("，Data Query Language，数据"),_("code",[t._v("查询")]),t._v("语言，用来"),_("code",[t._v("查询数据库中表的记录")]),t._v("。")]),t._v(" "),_("li",[_("code",[t._v("DCL")]),t._v("，Data Control Language，数据"),_("code",[t._v("控制")]),t._v("语言，用来"),_("code",[t._v("创建数据库用户、控制数据库")]),t._v("的访问权限。")])]),t._v(" "),_("h2",{attrs:{id:"ddl"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ddl"}},[t._v("#")]),t._v(" DDL")]),t._v(" "),_("blockquote",[_("p",[t._v("Data Definition Language，数据"),_("code",[t._v("定义")]),t._v("语言，用来"),_("code",[t._v("定义数据库对象")]),t._v("（数据库、表、字段）。")])]),t._v(" "),_("h3",{attrs:{id:"操作数据库"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#操作数据库"}},[t._v("#")]),t._v(" 操作数据库")]),t._v(" "),_("p",[t._v("查询所有数据库："),_("code",[t._v("SHOW DATABASES;")]),t._v("。")]),t._v(" "),_("p",[t._v("查询当前数据库："),_("code",[t._v("SELECT DATABASES();")]),t._v("。")]),t._v(" "),_("p",[t._v("创建数据库："),_("code",[t._v("CREATE DATEABASE [IF NOT EXISTS] db_name [DEFAULT CHARSET 字符集] [COLLATE 排序规则];")]),t._v("。")]),t._v(" "),_("ul",[_("li",[t._v("例如："),_("code",[t._v("CREATE DATABASE if not exists user;")]),t._v("。")])]),t._v(" "),_("p",[t._v("删除数据库："),_("code",[t._v("DROP DATABASE [IF EXIST] db_name;")]),t._v("。")]),t._v(" "),_("p",[t._v("使用数据库："),_("code",[t._v("USE db_name;")]),t._v("。")]),t._v(" "),_("h3",{attrs:{id:"操作表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#操作表"}},[t._v("#")]),t._v(" 操作表")]),t._v(" "),_("p",[t._v("查询所有表："),_("code",[t._v("SHOW TABLES;")]),t._v("。")]),t._v(" "),_("p",[t._v("创建表结构：")]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" tb_name "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    字段"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" 字段"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("类型"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" 字段"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("注释"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("，\n    字段"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" 字段"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("类型"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" 字段"),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("注释"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("，\n    "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" 表注释"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 示例")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" m_user"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" id "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("comment")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" age "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("comment")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("comment")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user table'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br"),_("span",{staticClass:"line-number"},[t._v("9")]),_("br"),_("span",{staticClass:"line-number"},[t._v("10")]),_("br")])]),_("p",[t._v("查询表结构："),_("code",[t._v("DESC tb_name;")]),t._v("。")]),t._v(" "),_("p",[t._v("查询指定表的建表语句："),_("code",[t._v("SHOW CREATE TABLE tb_name;")]),t._v("。")]),t._v(" "),_("p",[t._v("修改表：")]),t._v(" "),_("ul",[_("li",[t._v("添加字段（ADD）："),_("code",[t._v("ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];")]),t._v("。")]),t._v(" "),_("li",[t._v("修改字段名和类型（CHANGE）："),_("code",[t._v("ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];")]),t._v("。")]),t._v(" "),_("li",[t._v("修改字段数据类型（MODIFY）："),_("code",[t._v("ALTER TABLE 表名 MODIFY 字段名 新类型(长度);")]),t._v("。")]),t._v(" "),_("li",[t._v("删除字段（DROP）："),_("code",[t._v("ALTER TABLE 表名 DROP 字段名;")]),t._v("。")]),t._v(" "),_("li",[t._v("修改表名（RENAME）："),_("code",[t._v("ALTER TABLE 表名 RENAME TO 新表名;")]),t._v("。 // TO 可省")])]),t._v(" "),_("p",[t._v("删除表："),_("code",[t._v("DROP TABLE [IF EXISTS] 表名;")]),t._v("。")]),t._v(" "),_("p",[t._v("删除表，然后重建该表（即清除表数据，但保留表结构）："),_("code",[t._v("TRUNCATE TABLE 表名;")]),t._v("。")]),t._v(" "),_("h2",{attrs:{id:"dml"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dml"}},[t._v("#")]),t._v(" DML")]),t._v(" "),_("blockquote",[_("p",[t._v("Data Manipulation Language，数据"),_("code",[t._v("操作")]),t._v("语言，用来"),_("code",[t._v("对数据库表中的数据")]),t._v("进行增删改。")])]),t._v(" "),_("ul",[_("li",[t._v("添加数据 "),_("code",[t._v("INSERT")]),t._v("。")]),t._v(" "),_("li",[t._v("修改数据 "),_("code",[t._v("UPDATE")]),t._v("。")]),t._v(" "),_("li",[t._v("删除数据 "),_("code",[t._v("DELETE")]),t._v("。")])]),t._v(" "),_("h3",{attrs:{id:"添加数据-insert"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#添加数据-insert"}},[t._v("#")]),t._v(" 添加数据/INSERT")]),t._v(" "),_("ul",[_("li",[t._v("给 "),_("code",[t._v("所有字段")]),t._v(" 添加数据："),_("code",[t._v("INSERT INTO 表名 VALUES (值1，值2，...);")]),t._v("。")]),t._v(" "),_("li",[t._v("给 "),_("code",[t._v("指定字段")]),t._v(" 添加数据："),_("code",[t._v("INSERT INTO 表名 (字段名1，字段名2，...) VALUES (值1，值2，...);")]),t._v("。")]),t._v(" "),_("li",[t._v("批量添加数据：\n"),_("ul",[_("li",[_("code",[t._v("INSETR INTO 表名 (字段1，字段2，...) VALUES (值1，值2，...), (值1，值2，...);")])]),t._v(" "),_("li",[_("code",[t._v("INSETR INTO 表名 VALUES (值1，值2，...),(值1，值2，...);")])])])])]),t._v(" "),_("p",[_("strong",[t._v("注意：")]),t._v(" 插入的字符串或者时间格式的值需要加在引号里面。")]),t._v(" "),_("h3",{attrs:{id:"修改数据-update"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#修改数据-update"}},[t._v("#")]),t._v(" 修改数据/UPDATE")]),t._v(" "),_("p",[_("code",[t._v("UPDATE 表名 SET 字段1=值1，字段2=值2，... [WHERE 条件];")]),t._v("，若无修改条件，默认改全表。")]),t._v(" "),_("h3",{attrs:{id:"删除数据-delete"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#删除数据-delete"}},[t._v("#")]),t._v(" 删除数据/DELETE")]),t._v(" "),_("p",[_("code",[t._v("DELETE FROM 表名 [WHERE 条件];")]),t._v("，若无条件，默认改全表。")]),t._v(" "),_("ul",[_("li",[t._v("只能删除整条记录，不能删除一条记录中的某个字段的值，如果想要删除某个字段的值，可以使用 update 某个字段为 null。")])]),t._v(" "),_("h2",{attrs:{id:"dql"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dql"}},[t._v("#")]),t._v(" DQL")]),t._v(" "),_("blockquote",[_("p",[t._v("Data Query Language，数据"),_("code",[t._v("查询")]),t._v("语言，用来"),_("code",[t._v("查询数据库中表的记录")]),t._v("。")])]),t._v(" "),_("p",[t._v("查询用关键字 "),_("code",[t._v("SELECT")]),t._v("，查询语法为：")]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 数字代表实际执行顺序，也就说返回字段是在分组过滤后才做的。")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" 字段列表 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" 表名列表 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" 条件列表 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" 分组字段列表 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("HAVING")]),t._v(" 分组后条件列表 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ORDER")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" 排序字段列表 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LIMIT")]),t._v(" 分页参数 "),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br")])]),_("h3",{attrs:{id:"基本查询-别名-去重"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基本查询-别名-去重"}},[t._v("#")]),t._v(" 基本查询/别名/去重")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("SELECT * FROM 表名;")])]),t._v(" "),_("li",[_("code",[t._v("SELECT 字段1, 字段2, ... FROM 表名;")])])]),t._v(" "),_("p",[t._v("设置别名：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("SELECT 字段1 [AS 别名1]，字段2 [AS 别名2] ... FROM 表名;")]),t._v(" // AS 可省")])]),t._v(" "),_("p",[t._v("去重：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("SELECT DISTINCT 字段列表 FROM 表名;")])])]),t._v(" "),_("h3",{attrs:{id:"条件查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#条件查询"}},[t._v("#")]),t._v(" 条件查询")]),t._v(" "),_("p",[t._v("使用关键字 "),_("code",[t._v("WHERE")]),t._v("，语法为："),_("code",[t._v("SELECT 字段列表 FROM 表名 WHERE 条件列表;")]),t._v("。")]),t._v(" "),_("p",[t._v("可用条件有：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("符号")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v(">")]),t._v(" "),_("td",[t._v("大于")])]),t._v(" "),_("tr",[_("td",[t._v(">=")]),t._v(" "),_("td",[t._v("大于等于")])]),t._v(" "),_("tr",[_("td",[t._v("<")]),t._v(" "),_("td",[t._v("小于")])]),t._v(" "),_("tr",[_("td",[t._v("<=")]),t._v(" "),_("td",[t._v("小于等于")])]),t._v(" "),_("tr",[_("td",[t._v("=")]),t._v(" "),_("td",[t._v("等于")])]),t._v(" "),_("tr",[_("td",[t._v("<> 或 !=")]),t._v(" "),_("td",[t._v("不等于")])]),t._v(" "),_("tr",[_("td",[t._v("BETWEEN...AND...")]),t._v(" "),_("td",[t._v("在某个范围内（含最小最大值）")])]),t._v(" "),_("tr",[_("td",[t._v("IN(...)")]),t._v(" "),_("td",[t._v("在 in 之后的列表中的值，多选一")])]),t._v(" "),_("tr",[_("td",[t._v("LIKE 占位符")]),t._v(" "),_("td",[t._v("模糊匹配（ "),_("code",[t._v("_")]),t._v(" 匹配单个字符，"),_("code",[t._v("%")]),t._v(" 匹配多个字符）")])]),t._v(" "),_("tr",[_("td",[t._v("IS NULL")]),t._v(" "),_("td",[t._v("是 NULL")])]),t._v(" "),_("tr",[_("td",[t._v("AND 或 &&")]),t._v(" "),_("td",[t._v("并条件")])]),t._v(" "),_("tr",[_("td",[t._v("OR 或 "),_("code",[t._v("||")])]),t._v(" "),_("td",[t._v("或条件")])]),t._v(" "),_("tr",[_("td",[t._v("NOT 或 !")]),t._v(" "),_("td",[t._v("非条件，取反")])])])]),t._v(" "),_("ul",[_("li",[_("code",[t._v("BETWEEN 小值 AND 大值")]),t._v(" <==> "),_("code",[t._v(">= 小值 && <= 大值")])]),t._v(" "),_("li",[t._v("查询名字为两个字的用户："),_("code",[t._v("SELECT * FROM user WHERE name LIKE '__'")]),t._v("。")])]),t._v(" "),_("h3",{attrs:{id:"聚合函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数"}},[t._v("#")]),t._v(" 聚合函数")]),t._v(" "),_("p",[t._v("将一列数据作为一个整体，进行纵向计算。")]),t._v(" "),_("p",[_("strong",[t._v("语法：")]),t._v(" "),_("code",[t._v("SELECT 聚合函数(字段列表) FROM 表名;")]),t._v("。")]),t._v(" "),_("p",[t._v("常用的聚合函数有：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("函数")]),t._v(" "),_("th",[t._v("作用")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("count")]),t._v(" "),_("td",[t._v("统计数量")])]),t._v(" "),_("tr",[_("td",[t._v("max")]),t._v(" "),_("td",[t._v("最大值")])]),t._v(" "),_("tr",[_("td",[t._v("min")]),t._v(" "),_("td",[t._v("最小值")])]),t._v(" "),_("tr",[_("td",[t._v("avg")]),t._v(" "),_("td",[t._v("平均值")])]),t._v(" "),_("tr",[_("td",[t._v("sum")]),t._v(" "),_("td",[t._v("求和")])])])]),t._v(" "),_("p",[_("strong",[t._v("注意：")]),t._v(" "),_("code",[t._v("NULL")]),t._v(" 值不参与聚合运算。")]),t._v(" "),_("h4",{attrs:{id:"示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),_("ul",[_("li",[t._v("统计用户总数："),_("code",[t._v("SELECT COUNT(*) FROM user;")]),t._v("。")]),t._v(" "),_("li",[t._v("统计用户总数："),_("code",[t._v("SELECT AVG(age) FROM user;")]),t._v("。")])]),t._v(" "),_("h3",{attrs:{id:"分组查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分组查询"}},[t._v("#")]),t._v(" 分组查询")]),t._v(" "),_("p",[t._v("关键字 "),_("code",[t._v("GROUP BY")]),t._v("："),_("code",[t._v("SELECT 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段 [HAVING 分组后过滤条件];")]),t._v("。")]),t._v(" "),_("p",[_("strong",[t._v("注意：")]),t._v(" "),_("code",[t._v("WHERE")]),t._v(" > 聚合函数 > "),_("code",[t._v("HAVING")]),t._v("。")]),t._v(" "),_("h3",{attrs:{id:"排序查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#排序查询"}},[t._v("#")]),t._v(" 排序查询")]),t._v(" "),_("p",[t._v("关键字 "),_("code",[t._v("ORDER BY")]),t._v("："),_("code",[t._v("SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1，字段2 排序方式2;")]),t._v("。")]),t._v(" "),_("p",[t._v("排序方式分为：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("ASC")]),t._v(" 升序（默认）。")]),t._v(" "),_("li",[_("code",[t._v("DESC")]),t._v(" 降序。")])]),t._v(" "),_("p",[t._v("多个字段排序规则：先按照第一个字段排序，第一个字段值相同时，再按照第二个字段排序。")]),t._v(" "),_("h4",{attrs:{id:"示例-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),_("p",[t._v("按照年龄升序排序："),_("code",[t._v("SELECT * FROM user ORDER BY age ASC;")]),t._v("。")]),t._v(" "),_("h3",{attrs:{id:"分页查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分页查询"}},[t._v("#")]),t._v(" 分页查询")]),t._v(" "),_("p",[t._v("分页查询的实现每个数据库是不一样的，在 MySQL 中使用的是关键字 "),_("code",[t._v("LIMIT")]),t._v("：")]),t._v(" "),_("p",[_("code",[t._v("SELECT * FROM 表名 LIMIT 起始索引，要查询条数")]),t._v("。")]),t._v(" "),_("ul",[_("li",[t._v("起始索引 0 开始，")])]),t._v(" "),_("h2",{attrs:{id:"dql-多表查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dql-多表查询"}},[t._v("#")]),t._v(" DQL-多表查询")]),t._v(" "),_("p",[t._v("多表查询主要分为 "),_("code",[t._v("连接查询")]),t._v("（交集）、"),_("code",[t._v("联合查询")]),t._v("（并集）和 "),_("code",[t._v("嵌套查询")]),t._v("("),_("code",[t._v("子查询")]),t._v(")。")]),t._v(" "),_("h3",{attrs:{id:"连接查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#连接查询"}},[t._v("#")]),t._v(" 连接查询")]),t._v(" "),_("p",[t._v("连接查询共分为：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("内连接")]),t._v("，只取两表交集")]),t._v(" "),_("li",[_("code",[t._v("外连接")]),t._v(" "),_("ul",[_("li",[t._v("左外连接，查询左表所有数据")]),t._v(" "),_("li",[t._v("右外连接，查询右表所有数据")])])]),t._v(" "),_("li",[_("code",[t._v("自连接")]),t._v("？？")])]),t._v(" "),_("p",[t._v("连接查询需要指定两个表的关联条件，用来消除笛卡尔积。"),_("strong",[t._v("笛卡尔积：集合 A 和 集合 B 的所有排列组合值。")])]),t._v(" "),_("h4",{attrs:{id:"内连接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内连接"}},[t._v("#")]),t._v(" 内连接")]),t._v(" "),_("p",[t._v("内连接只返回集合 A 和集合 B 的交集，分为 2 种：")]),t._v(" "),_("ul",[_("li",[t._v("隐式内连接 "),_("code",[t._v("SELECT * FROM t1, t2 WHERE t1.xx = t2.yy")])]),t._v(" "),_("li",[t._v("显式内连接 "),_("code",[t._v("SELECT * FROM t1 [INNER] JOIN t2 ON t1.xx = t2.yy")])])]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 隐式内连接")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ur"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user_role ur "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("role_id "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ur"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 显式内连接，inner 可省略")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("inner")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" user_role ur "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("role_id "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ur"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br")])]),_("h4",{attrs:{id:"外连接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#外连接"}},[t._v("#")]),t._v(" 外连接")]),t._v(" "),_("p",[t._v("外连接分为 2 种：")]),t._v(" "),_("ul",[_("li",[t._v("左外连接，"),_("code",[t._v("SELECT * FROM t1 LEFT [OUTER] JOIN t2 ON t1.xx = t2.yy")])]),t._v(" "),_("li",[t._v("右外连接，"),_("code",[t._v("SELECT * FROM t1 RIGHT [OUTER] JOIN t2 ON t1.xx = t2.yy")])])]),t._v(" "),_("p",[t._v("左连接返回左表所有数据和交集数据，右连接亦然。")]),t._v(" "),_("h4",{attrs:{id:"自连接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自连接"}},[t._v("#")]),t._v(" 自连接")]),t._v(" "),_("blockquote",[_("p",[t._v("自连接是一种特殊的外连接，自己连接自己")])]),t._v(" "),_("p",[t._v("语法："),_("code",[t._v("SELECT * FROM t1 alias1 JOIN t1 alias2 ON alias1.learder_id = alias2.id")])]),t._v(" "),_("p",[t._v("自连接可以是内连接也可以是外连接。")]),t._v(" "),_("h3",{attrs:{id:"联合查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#联合查询"}},[t._v("#")]),t._v(" 联合查询")]),t._v(" "),_("p",[t._v("联合查询就是将多次查询合并，返回一个新的结果集，关键字 "),_("code",[t._v("union")]),t._v(" 或 "),_("code",[t._v("union all")]),t._v("。")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("union")]),t._v("，查询到的结果"),_("strong",[t._v("去重")]),t._v("处理。")]),t._v(" "),_("li",[_("code",[t._v("union all")]),t._v("，查询到的结果只是简单的拼接在一起，"),_("strong",[t._v("不会去重")]),t._v("处理。")])]),t._v(" "),_("p",[t._v("联合查询的多张表的列数和字段类型必须保持一致。")]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" DROM t1\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNION")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALL")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" t2"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br")])]),_("h3",{attrs:{id:"嵌套查询-子查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#嵌套查询-子查询"}},[t._v("#")]),t._v(" 嵌套查询/子查询")]),t._v(" "),_("blockquote",[_("p",[t._v("嵌套查询也叫子查询。用 "),_("code",[t._v("()")]),t._v(" 括起来。")])]),t._v(" "),_("p",[t._v("语法："),_("code",[t._v("SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);")])]),t._v(" "),_("p",[t._v("子查询的外部语句可以是 "),_("code",[t._v("SELECT")]),t._v("、"),_("code",[t._v("INSERT")]),t._v("、"),_("code",[t._v("UPDATE")]),t._v("、"),_("code",[t._v("DELETE")]),t._v(" 种任意一种。")]),t._v(" "),_("p",[t._v("--\x3e 根据查询结果不同，可以分为以下几种：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("标量子查询")]),t._v("，子查询返回的结果是一个单个的值")]),t._v(" "),_("li",[_("code",[t._v("列子查询")]),t._v("，返回结果是一列（可以多行）")]),t._v(" "),_("li",[_("code",[t._v("行子查询")]),t._v("，返回结果是一行（可以多列）")]),t._v(" "),_("li",[_("code",[t._v("表子查询")]),t._v("，返回结果是多行多列的")])]),t._v(" "),_("p",[t._v("--\x3e 根据子查询位置，可以分为：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("WHERE")]),t._v(" 之后")]),t._v(" "),_("li",[_("code",[t._v("FROM")]),t._v(" 之后")]),t._v(" "),_("li",[_("code",[t._v("SELECT")]),t._v(" 之后")])]),t._v(" "),_("h4",{attrs:{id:"标量子查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#标量子查询"}},[t._v("#")]),t._v(" 标量子查询")]),t._v(" "),_("blockquote",[_("p",[t._v("子查询返回的结果是一个单个的值")])]),t._v(" "),_("h4",{attrs:{id:"列子查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#列子查询"}},[t._v("#")]),t._v(" 列子查询")]),t._v(" "),_("blockquote",[_("p",[t._v("子查询返回的结果是一列（可以多行）")])]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" roleInfo "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("h4",{attrs:{id:"行子查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#行子查询"}},[t._v("#")]),t._v(" 行子查询")]),t._v(" "),_("blockquote",[_("p",[t._v("子查询返回的结果是一行（可以多列）")])]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" age "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 等同于")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br")])]),_("h4",{attrs:{id:"表子查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#表子查询"}},[t._v("#")]),t._v(" 表子查询")]),t._v(" "),_("blockquote",[_("p",[t._v("子查询返回的结果是多行多列")])]),t._v(" "),_("p",[t._v("示例：查询和张三、李四的职位和工资相同的员工信息。")]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 1. 查询张三、李四的职位和工资")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" job"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" emp "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" name "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(" name "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'李四'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 返回结果是一个多行多列的")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- job      salary")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 开发      1800")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 项目经理  3500")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 2. 查询员工信息")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" emp "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("job"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br")])]),_("p",[t._v("查询结果可以当做临时表进行操作，查询的结果不仅还可以放在 from 后，作为一张表进行查询。")]),t._v(" "),_("h2",{attrs:{id:"dcl"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dcl"}},[t._v("#")]),t._v(" DCL")]),t._v(" "),_("blockquote",[_("p",[t._v("Data Control Language，数据"),_("code",[t._v("控制")]),t._v("语言，用来"),_("code",[t._v("创建数据库用户、控制数据库")]),t._v("的访问权限。")])]),t._v(" "),_("h3",{attrs:{id:"用户管理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户管理"}},[t._v("#")]),t._v(" 用户管理")]),t._v(" "),_("p",[t._v("MySQL 数据库的用户存放在系统数据库 "),_("code",[t._v("mysql")]),t._v(" 中的 "),_("code",[t._v("user")]),t._v(" 表中。")]),t._v(" "),_("h4",{attrs:{id:"查询用户"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#查询用户"}},[t._v("#")]),t._v(" 查询用户")]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USE")]),t._v(" mysql"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("h4",{attrs:{id:"创建用户"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[t._v("#")]),t._v(" 创建用户")]),t._v(" "),_("p",[_("code",[t._v("CREATE USER '用户名@主机名' INDENTIFIED BY '密码';")])]),t._v(" "),_("h4",{attrs:{id:"修改用户密码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#修改用户密码"}},[t._v("#")]),t._v(" 修改用户密码")]),t._v(" "),_("p",[_("code",[t._v("ALTER USER '用户名@主机名' INDENTIFIED WITH mysql_native_password BY '新密码';")])]),t._v(" "),_("h4",{attrs:{id:"删除用户"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[t._v("#")]),t._v(" 删除用户")]),t._v(" "),_("p",[_("code",[t._v("DROP USER '用户名@主机名';")])]),t._v(" "),_("h3",{attrs:{id:"权限控制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[t._v("#")]),t._v(" 权限控制")]),t._v(" "),_("p",[t._v("MySQL 中定义了很多权限，常用的权限如下：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("权限")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("ALL，ALL PRIVILEGES")]),t._v(" "),_("td",[t._v("所有权限")])]),t._v(" "),_("tr",[_("td",[t._v("SELECT")]),t._v(" "),_("td",[t._v("查询数据")])]),t._v(" "),_("tr",[_("td",[t._v("INSERT")]),t._v(" "),_("td",[t._v("插入数据")])]),t._v(" "),_("tr",[_("td",[t._v("UPDATE")]),t._v(" "),_("td",[t._v("更新数据")])]),t._v(" "),_("tr",[_("td",[t._v("DELETE")]),t._v(" "),_("td",[t._v("删除数据")])]),t._v(" "),_("tr",[_("td",[t._v("ALTER")]),t._v(" "),_("td",[t._v("修改表")])]),t._v(" "),_("tr",[_("td",[t._v("DROP")]),t._v(" "),_("td",[t._v("删除数据库/表/视图")])]),t._v(" "),_("tr",[_("td",[t._v("CREATE")]),t._v(" "),_("td",[t._v("创建数据库/表")])])])]),t._v(" "),_("h4",{attrs:{id:"查询权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#查询权限"}},[t._v("#")]),t._v(" 查询权限")]),t._v(" "),_("p",[_("code",[t._v("SHOW GRANTS FOR '用户名@主机名';")])]),t._v(" "),_("h4",{attrs:{id:"授予权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#授予权限"}},[t._v("#")]),t._v(" 授予权限")]),t._v(" "),_("p",[_("code",[t._v("GRANTS 权限列表 ON 数据库.表名 TO '用户名@主机名';")])]),t._v(" "),_("h4",{attrs:{id:"撤销权限"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#撤销权限"}},[t._v("#")]),t._v(" 撤销权限")]),t._v(" "),_("p",[_("code",[t._v("REVOKE 权限列表 ON 数据库.表名 FROM '用户名@主机名';")])]),t._v(" "),_("h2",{attrs:{id:"函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[t._v("#")]),t._v(" 函数")]),t._v(" "),_("h3",{attrs:{id:"字符串函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#字符串函数"}},[t._v("#")]),t._v(" 字符串函数")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("CONCAT(S1, S2, S3...)")]),t._v("，拼接字符串。")]),t._v(" "),_("li",[_("code",[t._v("LOWER(str)")])]),t._v(" "),_("li",[_("code",[t._v("UPPER(str)")])]),t._v(" "),_("li",[_("code",[t._v("LPAD(str, n, pad)")]),t._v("，左填充，用 pad 对 str 的左边进行填充，达到 n 个字符串长度。")]),t._v(" "),_("li",[_("code",[t._v("RPAD(str, n, pad)")])]),t._v(" "),_("li",[_("code",[t._v("TRIM(str)")]),t._v("，去除字符串头尾的空格。")]),t._v(" "),_("li",[_("code",[t._v("SUBSTRING(str, start, length)")]),t._v("，从 start 开始 length 长度。")])]),t._v(" "),_("h3",{attrs:{id:"数值函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数值函数"}},[t._v("#")]),t._v(" 数值函数")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("CEIL(x)")]),t._v("，向上取整。")]),t._v(" "),_("li",[_("code",[t._v("FLOOR(x)")]),t._v("，向下取整。")]),t._v(" "),_("li",[_("code",[t._v("MOD(x，y)")]),t._v("，返回 x/y 的模（取余数）。")]),t._v(" "),_("li",[_("code",[t._v("RAND(x)")]),t._v("，返回 0~1 内的随机数。")]),t._v(" "),_("li",[_("code",[t._v("ROUND(x, y)")]),t._v("，求参数 x 的四舍五入的值，保留 y 位小数。")])]),t._v(" "),_("p",[t._v("生成 6 位验证码："),_("code",[t._v("SELECT LPAD( CEIL (RAND()*1000000),6,0)")]),t._v("。")]),t._v(" "),_("h3",{attrs:{id:"日期函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#日期函数"}},[t._v("#")]),t._v(" 日期函数")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("CURDATE()")]),t._v(", current date。")]),t._v(" "),_("li",[_("code",[t._v("CURTIME()")]),t._v(", current time。")]),t._v(" "),_("li",[_("code",[t._v("NOW()")]),t._v(", current datetime。")]),t._v(" "),_("li",[_("code",[t._v("YEAR(date)")])]),t._v(" "),_("li",[_("code",[t._v("MONTH(date)")])]),t._v(" "),_("li",[_("code",[t._v("DAY(date)")])]),t._v(" "),_("li",[_("code",[t._v("DATE_ADD(date, INTERVAL expr type)")]),t._v("，返回一个日期/时间值加上一个时间间隔 expr 后的时间值。\n"),_("ul",[_("li",[t._v("70 天后的时间："),_("code",[t._v("SELECT DATE_ADD(NOW(), INTERVAL 70 DAY);")]),t._v("。")])])]),t._v(" "),_("li",[_("code",[t._v("DATEDIFF(date1, date2)")]),t._v("，"),_("em",[t._v("date1 - date2")]),t._v("，返回起止时间的天数。")])]),t._v(" "),_("h3",{attrs:{id:"流程函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#流程函数"}},[t._v("#")]),t._v(" 流程函数")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("IF(boolValue, t, f)")])]),t._v(" "),_("li",[_("code",[t._v("IFNULL(value1, value2)")]),t._v("，如果不为空返回 val1，否则返回 value 2，类似 getIfBlank() 方法。")]),t._v(" "),_("li",[_("code",[t._v("CASE WHEN [val1] THEN [res1] ... ELSE [defaultValue] END")]),t._v("，如果 val1 == true，则返回 res1，否则返回 default 默认值。")]),t._v(" "),_("li",[_("code",[t._v("CASE [expr] WHEN [val1] THEN [res1] ... ELSE [defaultValue] END")]),t._v("，如果 expr 的值等于 val1，则返回 res1，否则返回 default 默认值。")])]),t._v(" "),_("p",[t._v("示例1：")]),t._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\n\tnickname "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tmobile "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CASE")]),t._v("\n\t\taddress "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'北京'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'一线'")]),t._v("\n\t\t"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'上海'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'一线'")]),t._v("\n\t\t"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ELSE")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'二线'")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" 地址\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v("\n\tmember\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br"),_("span",{staticClass:"line-number"},[t._v("9")]),_("br"),_("span",{staticClass:"line-number"},[t._v("10")]),_("br")])]),_("h2",{attrs:{id:"约束"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#约束"}},[t._v("#")]),t._v(" 约束")]),t._v(" "),_("p",[t._v("约束是作用与表中字段上的规则，用于限制存储在表中的数据。目的是为了保证数据库中数据的正确、有效性和完整性。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("约束")]),t._v(" "),_("th",[t._v("关键字")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("非空约束")]),t._v(" "),_("td",[t._v("NOT NULL")]),t._v(" "),_("td",[t._v("限制该字段的数据不能为 NULL")])]),t._v(" "),_("tr",[_("td",[t._v("唯一约束")]),t._v(" "),_("td",[t._v("UNIQUE")]),t._v(" "),_("td",[t._v("保证该字段的所有数据都是唯一、不重复的")])]),t._v(" "),_("tr",[_("td",[t._v("主键约束")]),t._v(" "),_("td",[t._v("PRIMARY KEY")]),t._v(" "),_("td",[t._v("主键是一行数据的唯一标识，要求非空且唯一")])]),t._v(" "),_("tr",[_("td",[t._v("默认约束")]),t._v(" "),_("td",[t._v("DEFAULE")]),t._v(" "),_("td",[t._v("保存数据时，如果未指定该字段的值，则采用默认值")])]),t._v(" "),_("tr",[_("td",[t._v("外键约束")]),t._v(" "),_("td",[t._v("FOREIGN KEY")]),t._v(" "),_("td",[t._v("用来让两张表的数据之间建立连接，保证数据的一致性和完整性")])]),t._v(" "),_("tr",[_("td",[t._v("检查约束（v8.0.16 之后）")]),t._v(" "),_("td",[t._v("CHECK")]),t._v(" "),_("td",[t._v("保证字段值满足某个条件")])])])]),t._v(" "),_("p",[t._v("注意：约束作用于表中的字段上，可以在创建/修改表的时候添加约束。")]),t._v(" "),_("h2",{attrs:{id:"事务"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事务"}},[t._v("#")]),t._v(" 事务")]),t._v(" "),_("p",[t._v("事务就是一组操作的集合，它是一个不可分割的单位，事务会把所有操作当做一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。")]),t._v(" "),_("p",[t._v("MySQL 的事务默认是自动提交的，也就说，当执行一条 DML 语句，MySQL 会立即隐式的提交事务。")]),t._v(" "),_("h3",{attrs:{id:"四大特性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#四大特性"}},[t._v("#")]),t._v(" 四大特性")]),t._v(" "),_("p",[t._v("MySQL 的事务满足 ACID 特性：")]),t._v(" "),_("ul",[_("li",[t._v("原子性 "),_("code",[t._v("Atomicity")]),t._v("，事务是不可分割的最小操作单元，要么全部成功，要么全部失败。")]),t._v(" "),_("li",[t._v("一致性 "),_("code",[t._v("Consistency")]),t._v("，事务完成时，必须使所有的数据都保持一致状态。")]),t._v(" "),_("li",[t._v("隔离性 "),_("code",[t._v("Isolation")]),t._v("，数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。")]),t._v(" "),_("li",[t._v("持久性 "),_("code",[t._v("Durability")]),t._v("，事务一旦提交或回滚，它对数据库中数据的改变就是永久的。")])]),t._v(" "),_("h3",{attrs:{id:"操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#操作"}},[t._v("#")]),t._v(" 操作")]),t._v(" "),_("ul",[_("li",[t._v("查看事务提交方式 "),_("code",[t._v("SELECT @@autocommit;")])]),t._v(" "),_("li",[t._v("设置事务提交方式 "),_("code",[t._v("SELECT @@autocommit = 0;")])]),t._v(" "),_("li",[t._v("开启事务 "),_("code",[t._v("START TRANSACTION")]),t._v(" 或 "),_("code",[t._v("BEGIN")])]),t._v(" "),_("li",[t._v("提交事务 "),_("code",[t._v("COMMIT;")])]),t._v(" "),_("li",[t._v("回滚事务 "),_("code",[t._v("ROLLBACK;")])])]),t._v(" "),_("h3",{attrs:{id:"隔离级别"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#隔离级别"}},[t._v("#")]),t._v(" 隔离级别")]),t._v(" "),_("p",[t._v("MySQL 中事务的隔离级别一共分为 4 种，隔离级别由低到高依次为：")]),t._v(" "),_("ol",[_("li",[_("strong",[t._v("读未提交")]),t._v(" "),_("code",[t._v("READ UNCOMMITED")]),t._v("，所有事务都可以看到其它事务未提交的数据。\n"),_("ul",[_("li",[t._v("可能发生 "),_("em",[t._v("脏读")]),t._v("，很少使用。")]),t._v(" "),_("li",[t._v("因为可以读取到其他事务中未提交的数据，而未提交的数据可能会发生回滚，因此我们把该级别读取到的数据称之为脏数据，把这个问题称之为脏读。")])])]),t._v(" "),_("li",[_("strong",[t._v("读已提交")]),t._v(" "),_("code",[t._v("READ COMMITED")]),t._v("，一个事务提交后，它修改的数据才会被其它事务看到。\n"),_("ul",[_("li",[t._v("可能发生 "),_("em",[t._v("不可重复读")]),t._v("。")])])]),t._v(" "),_("li",[_("strong",[t._v("可重复读")]),t._v(" "),_("code",[t._v("REPEATABLE READ")]),t._v("，一个事务执行过程中看到的数据，总是和这个事务开启时看到的数据一致。// MySQL default\n"),_("ul",[_("li",[t._v("可能发生 "),_("em",[t._v("幻读")]),t._v("。InnoDB 通过 MVCC 解决了幻读。")])])]),t._v(" "),_("li",[_("strong",[t._v("可串行化")]),t._v(" "),_("code",[t._v("SERIALIZABLE")]),t._v("，按照顺序执行事务\n"),_("ul",[_("li",[t._v("解决 幻读。最高隔离级别，效率最低。")])])])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("隔离级别")]),t._v(" "),_("th",[t._v("脏读")]),t._v(" "),_("th",[t._v("不可重复读")]),t._v(" "),_("th",[t._v("幻读")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("读未提交")]),t._v(" "),_("td",[t._v("Y")]),t._v(" "),_("td",[t._v("Y")]),t._v(" "),_("td",[t._v("Y")])]),t._v(" "),_("tr",[_("td",[t._v("读已提交")]),t._v(" "),_("td",[t._v("-")]),t._v(" "),_("td",[t._v("Y")]),t._v(" "),_("td",[t._v("Y")])]),t._v(" "),_("tr",[_("td",[t._v("可重复读")]),t._v(" "),_("td",[t._v("-")]),t._v(" "),_("td",[t._v("-")]),t._v(" "),_("td",[t._v("Y")])]),t._v(" "),_("tr",[_("td",[t._v("可串行化")]),t._v(" "),_("td",[t._v("-")]),t._v(" "),_("td",[t._v("-")]),t._v(" "),_("td",[t._v("-")])])])]),t._v(" "),_("p",[t._v("注：Y 表示可能发生，- 表示不会发生。")]),t._v(" "),_("h4",{attrs:{id:"事务问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事务问题"}},[t._v("#")]),t._v(" 事务问题")]),t._v(" "),_("p",[t._v("主要有 3 种问题：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("脏读")]),t._v("，一个事务读取到其它事务还未提交的数据（未提交的数据可能会发生回滚）。")]),t._v(" "),_("li",[_("code",[t._v("不可重复读")]),t._v("，当一个事务 A 开启后，查询 user1 后，事务 B 修改了 user1 的数据并提交了，然后事务 A 的第 2 步有查询了 user1，这时候对于事务 A 来说，读取到的 user1 数据变化了，这种现象就是不可重复读。")]),t._v(" "),_("li",[_("code",[t._v("幻读")]),t._v("，事务 A 中第一步查询 user1 不存在，事务 B 创建出来 user1，事务 A 第一步中查询 user1 不存在则执行插入操作，但是插入失败，查询 user1 也是不存在（解决不可重复读后，事务读取的数据总和事务开启前一致，所以事务 B 插入后，事务 A 也读取不到的），这种现象就是幻读。即，我查询没有啊，怎么插入的时候，又有了？")])]),t._v(" "),_("h2",{attrs:{id:"讨论区"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#讨论区"}},[t._v("#")]),t._v(" 讨论区")]),t._v(" "),_("blockquote",[_("p",[t._v("由于评论过多会影响页面最下方的导航，故将评论区做默认折叠处理。")])]),t._v(" "),_("details",{staticClass:"custom-block details"},[_("summary",[t._v("点击查看评论区内容，渴望您的宝贵建议~")]),t._v(" "),_("Vssue",{attrs:{title:t.$title,options:{locale:"zh"}}})],1)])}),[],!1,null,null,null);v.default=a.exports}}]);