<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | Wow56 个人知识库</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/flaglogo.png">
    <link rel="manifest" href="/flaglogo.png">
    <link rel="apple-touch-icon" href="/flaglogo.png">
    <meta name="description" content="Never stop learning">
    
    <link rel="preload" href="/assets/css/0.styles.b25eaea0.css" as="style"><link rel="preload" href="/assets/js/app.5780eb53.js" as="script"><link rel="preload" href="/assets/js/2.e1f1d232.js" as="script"><link rel="preload" href="/assets/js/80.3fd73e00.js" as="script"><link rel="prefetch" href="/assets/js/10.921c058c.js"><link rel="prefetch" href="/assets/js/100.678efb16.js"><link rel="prefetch" href="/assets/js/101.6fd33b9c.js"><link rel="prefetch" href="/assets/js/102.dfa6e733.js"><link rel="prefetch" href="/assets/js/103.4b74461a.js"><link rel="prefetch" href="/assets/js/104.603354fe.js"><link rel="prefetch" href="/assets/js/105.9da719c4.js"><link rel="prefetch" href="/assets/js/106.6aa24318.js"><link rel="prefetch" href="/assets/js/107.5ea57319.js"><link rel="prefetch" href="/assets/js/108.37ded6f2.js"><link rel="prefetch" href="/assets/js/109.adc40804.js"><link rel="prefetch" href="/assets/js/11.00deed7e.js"><link rel="prefetch" href="/assets/js/110.f1791c33.js"><link rel="prefetch" href="/assets/js/111.bff2cea6.js"><link rel="prefetch" href="/assets/js/112.4eb7e8b1.js"><link rel="prefetch" href="/assets/js/113.4ca0e39f.js"><link rel="prefetch" href="/assets/js/114.03d070d7.js"><link rel="prefetch" href="/assets/js/115.a007d470.js"><link rel="prefetch" href="/assets/js/116.027c798b.js"><link rel="prefetch" href="/assets/js/117.6eaa95a7.js"><link rel="prefetch" href="/assets/js/118.3468f2af.js"><link rel="prefetch" href="/assets/js/119.94c060f2.js"><link rel="prefetch" href="/assets/js/12.e7e7feff.js"><link rel="prefetch" href="/assets/js/120.2639e06f.js"><link rel="prefetch" href="/assets/js/121.1ee7e578.js"><link rel="prefetch" href="/assets/js/122.d1f0654b.js"><link rel="prefetch" href="/assets/js/123.52d57be3.js"><link rel="prefetch" href="/assets/js/124.d515f509.js"><link rel="prefetch" href="/assets/js/125.c783db82.js"><link rel="prefetch" href="/assets/js/126.08d41fac.js"><link rel="prefetch" href="/assets/js/127.5ab5b3c5.js"><link rel="prefetch" href="/assets/js/13.c0e1c39d.js"><link rel="prefetch" href="/assets/js/14.4be8face.js"><link rel="prefetch" href="/assets/js/15.b235fe5f.js"><link rel="prefetch" href="/assets/js/16.a62bd2ec.js"><link rel="prefetch" href="/assets/js/17.d3fa5b5a.js"><link rel="prefetch" href="/assets/js/18.04056df6.js"><link rel="prefetch" href="/assets/js/19.e0daa831.js"><link rel="prefetch" href="/assets/js/20.aae5efb2.js"><link rel="prefetch" href="/assets/js/21.51bfd139.js"><link rel="prefetch" href="/assets/js/22.d92aecaf.js"><link rel="prefetch" href="/assets/js/23.fd2079a6.js"><link rel="prefetch" href="/assets/js/24.7cadaa30.js"><link rel="prefetch" href="/assets/js/25.38c9c1a4.js"><link rel="prefetch" href="/assets/js/26.1c8277a8.js"><link rel="prefetch" href="/assets/js/27.1e495f81.js"><link rel="prefetch" href="/assets/js/28.7ef5af76.js"><link rel="prefetch" href="/assets/js/29.9031cb92.js"><link rel="prefetch" href="/assets/js/3.93a08b3b.js"><link rel="prefetch" href="/assets/js/30.1b61bbf8.js"><link rel="prefetch" href="/assets/js/31.f8cbfd44.js"><link rel="prefetch" href="/assets/js/32.0632cb94.js"><link rel="prefetch" href="/assets/js/33.a46a0b3d.js"><link rel="prefetch" href="/assets/js/34.fba531e6.js"><link rel="prefetch" href="/assets/js/35.db1fd348.js"><link rel="prefetch" href="/assets/js/36.9e6108c6.js"><link rel="prefetch" href="/assets/js/37.35fca0f6.js"><link rel="prefetch" href="/assets/js/38.ac22df93.js"><link rel="prefetch" href="/assets/js/39.7cce2902.js"><link rel="prefetch" href="/assets/js/4.e30be376.js"><link rel="prefetch" href="/assets/js/40.3560e650.js"><link rel="prefetch" href="/assets/js/41.d4632345.js"><link rel="prefetch" href="/assets/js/42.adce46c5.js"><link rel="prefetch" href="/assets/js/43.d2ff2a7e.js"><link rel="prefetch" href="/assets/js/44.d3f6ac6e.js"><link rel="prefetch" href="/assets/js/45.1e3b049e.js"><link rel="prefetch" href="/assets/js/46.917a9a8a.js"><link rel="prefetch" href="/assets/js/47.5a73f25d.js"><link rel="prefetch" href="/assets/js/48.3b970b0a.js"><link rel="prefetch" href="/assets/js/49.dc6fd937.js"><link rel="prefetch" href="/assets/js/5.9411f932.js"><link rel="prefetch" href="/assets/js/50.109fdeb5.js"><link rel="prefetch" href="/assets/js/51.5ec4fc4b.js"><link rel="prefetch" href="/assets/js/52.0c03ff96.js"><link rel="prefetch" href="/assets/js/53.e91a6f48.js"><link rel="prefetch" href="/assets/js/54.7f886adb.js"><link rel="prefetch" href="/assets/js/55.2747b24f.js"><link rel="prefetch" href="/assets/js/56.a78db785.js"><link rel="prefetch" href="/assets/js/57.517d420c.js"><link rel="prefetch" href="/assets/js/58.0429f17c.js"><link rel="prefetch" href="/assets/js/59.9d68455f.js"><link rel="prefetch" href="/assets/js/6.3e126bb5.js"><link rel="prefetch" href="/assets/js/60.7cc000dc.js"><link rel="prefetch" href="/assets/js/61.8eaec827.js"><link rel="prefetch" href="/assets/js/62.9eb7a7b3.js"><link rel="prefetch" href="/assets/js/63.35e36177.js"><link rel="prefetch" href="/assets/js/64.6282d042.js"><link rel="prefetch" href="/assets/js/65.58ed4699.js"><link rel="prefetch" href="/assets/js/66.971cb02f.js"><link rel="prefetch" href="/assets/js/67.0a93b287.js"><link rel="prefetch" href="/assets/js/68.a7b05e3b.js"><link rel="prefetch" href="/assets/js/69.6572830f.js"><link rel="prefetch" href="/assets/js/7.de70efc4.js"><link rel="prefetch" href="/assets/js/70.168da9d9.js"><link rel="prefetch" href="/assets/js/71.d57d693b.js"><link rel="prefetch" href="/assets/js/72.91fa5cd3.js"><link rel="prefetch" href="/assets/js/73.7de2d2b8.js"><link rel="prefetch" href="/assets/js/74.acd298e4.js"><link rel="prefetch" href="/assets/js/75.62e67874.js"><link rel="prefetch" href="/assets/js/76.f2b96539.js"><link rel="prefetch" href="/assets/js/77.4255efc8.js"><link rel="prefetch" href="/assets/js/78.114300ba.js"><link rel="prefetch" href="/assets/js/79.d14a2756.js"><link rel="prefetch" href="/assets/js/8.1ec756ec.js"><link rel="prefetch" href="/assets/js/81.71ebdbf4.js"><link rel="prefetch" href="/assets/js/82.0a5b5bb1.js"><link rel="prefetch" href="/assets/js/83.a23907a9.js"><link rel="prefetch" href="/assets/js/84.8c2bc996.js"><link rel="prefetch" href="/assets/js/85.ed1b9552.js"><link rel="prefetch" href="/assets/js/86.49d44a86.js"><link rel="prefetch" href="/assets/js/87.33153d90.js"><link rel="prefetch" href="/assets/js/88.a021dc21.js"><link rel="prefetch" href="/assets/js/89.b80b10c6.js"><link rel="prefetch" href="/assets/js/9.24d5e519.js"><link rel="prefetch" href="/assets/js/90.a059a06c.js"><link rel="prefetch" href="/assets/js/91.0c2e07a8.js"><link rel="prefetch" href="/assets/js/92.0460267f.js"><link rel="prefetch" href="/assets/js/93.630cc9b9.js"><link rel="prefetch" href="/assets/js/94.64e96711.js"><link rel="prefetch" href="/assets/js/95.cc7ee0e1.js"><link rel="prefetch" href="/assets/js/96.43f96f85.js"><link rel="prefetch" href="/assets/js/97.73dc1af0.js"><link rel="prefetch" href="/assets/js/98.10b4ffee.js"><link rel="prefetch" href="/assets/js/99.e6bfc1cd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b25eaea0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/flaglogo.png" alt="Wow56 个人知识库" class="logo"> <span class="site-name can-hide">Wow56 个人知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言/语法" class="dropdown-title"><span class="title">语言/语法</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言/语法" class="mobile-dropdown-title"><span class="title">语言/语法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lang/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/lang/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/lang/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lang/js/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/lang/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lang/regex/" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/lang/script/" class="nav-link">
  脚本 Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/markdown/" class="nav-link">
  Markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架/类库" class="dropdown-title"><span class="title">框架/类库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架/类库" class="mobile-dropdown-title"><span class="title">框架/类库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          应用程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/spring/" class="nav-link">
  Spring 生态
</a></li><li class="dropdown-subitem"><a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/gis/" class="nav-link">
  Web GIS
</a></li><li class="dropdown-subitem"><a href="/framework/echarts/" class="nav-link">
  ECahrts
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysql/" class="nav-link router-link-active">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          非关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/db/es/" class="nav-link">
  Elasticsearch
</a></li></ul></li><li class="dropdown-item"><h4>
          持久层框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用技术" class="dropdown-title"><span class="title">应用技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="应用技术" class="mobile-dropdown-title"><span class="title">应用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/applied-tech/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/svn/" class="nav-link">
  SVN
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/mq/" class="nav-link">
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/k8s/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/cas/" class="nav-link">
  CAS
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/workflow/" class="nav-link">
  Workflow
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机素养" class="dropdown-title"><span class="title">计算机素养</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机素养" class="mobile-dropdown-title"><span class="title">计算机素养</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-literacy/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/data-structure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发常识" class="dropdown-title"><span class="title">开发常识</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发常识" class="mobile-dropdown-title"><span class="title">开发常识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/common-sense/common/common_sense.html" class="nav-link">
  常识
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/ide-settings/" class="nav-link">
  IDE 开发环境配置
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/log/" class="nav-link">
  Log
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/test/" class="nav-link">
  Test
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/swagger/" class="nav-link">
  Swagger
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/share/recommend/" class="nav-link">
  推荐
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/effective_java.html" class="nav-link">
  Effective Java
</a></li><li class="dropdown-item"><!----> <a href="/read/clean_code.html" class="nav-link">
  代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/read/coding_style.html" class="nav-link">
  Coding Style
</a></li><li class="dropdown-item"><!----> <a href="/read/gx.html" class="nav-link">
  高项笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wow56/wow56.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言/语法" class="dropdown-title"><span class="title">语言/语法</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言/语法" class="mobile-dropdown-title"><span class="title">语言/语法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lang/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/lang/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/lang/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lang/js/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/lang/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lang/regex/" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/lang/script/" class="nav-link">
  脚本 Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/markdown/" class="nav-link">
  Markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架/类库" class="dropdown-title"><span class="title">框架/类库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架/类库" class="mobile-dropdown-title"><span class="title">框架/类库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          应用程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/spring/" class="nav-link">
  Spring 生态
</a></li><li class="dropdown-subitem"><a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/gis/" class="nav-link">
  Web GIS
</a></li><li class="dropdown-subitem"><a href="/framework/echarts/" class="nav-link">
  ECahrts
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysql/" class="nav-link router-link-active">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          非关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/db/es/" class="nav-link">
  Elasticsearch
</a></li></ul></li><li class="dropdown-item"><h4>
          持久层框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用技术" class="dropdown-title"><span class="title">应用技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="应用技术" class="mobile-dropdown-title"><span class="title">应用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/applied-tech/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/svn/" class="nav-link">
  SVN
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/mq/" class="nav-link">
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/k8s/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/cas/" class="nav-link">
  CAS
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/workflow/" class="nav-link">
  Workflow
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机素养" class="dropdown-title"><span class="title">计算机素养</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机素养" class="mobile-dropdown-title"><span class="title">计算机素养</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-literacy/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/data-structure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发常识" class="dropdown-title"><span class="title">开发常识</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发常识" class="mobile-dropdown-title"><span class="title">开发常识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/common-sense/common/common_sense.html" class="nav-link">
  常识
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/ide-settings/" class="nav-link">
  IDE 开发环境配置
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/log/" class="nav-link">
  Log
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/test/" class="nav-link">
  Test
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/swagger/" class="nav-link">
  Swagger
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/share/recommend/" class="nav-link">
  推荐
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/effective_java.html" class="nav-link">
  Effective Java
</a></li><li class="dropdown-item"><!----> <a href="/read/clean_code.html" class="nav-link">
  代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/read/coding_style.html" class="nav-link">
  Coding Style
</a></li><li class="dropdown-item"><!----> <a href="/read/gx.html" class="nav-link">
  高项笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wow56/wow56.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/db/mysql/" aria-current="page" class="sidebar-link">MySQL 总览</a></li><li><a href="/db/mysql/mysql.html" aria-current="page" class="active sidebar-link">MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#参考文档" class="sidebar-link">参考文档</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#图形化界面" class="sidebar-link">图形化界面</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#数值类型" class="sidebar-link">数值类型</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#字符串类型" class="sidebar-link">字符串类型</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#日期时间类型" class="sidebar-link">日期时间类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#sql" class="sidebar-link">SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#分类" class="sidebar-link">分类</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#ddl" class="sidebar-link">DDL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#操作数据库" class="sidebar-link">操作数据库</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#操作表" class="sidebar-link">操作表</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#dml" class="sidebar-link">DML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#添加数据-insert" class="sidebar-link">添加数据/INSERT</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#修改数据-update" class="sidebar-link">修改数据/UPDATE</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#删除数据-delete" class="sidebar-link">删除数据/DELETE</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#dql" class="sidebar-link">DQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#基本查询-别名-去重" class="sidebar-link">基本查询/别名/去重</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#聚合函数" class="sidebar-link">聚合函数</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#分页查询" class="sidebar-link">分页查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#dql-多表查询" class="sidebar-link">DQL-多表查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#连接查询" class="sidebar-link">连接查询</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#联合查询" class="sidebar-link">联合查询</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#嵌套查询-子查询" class="sidebar-link">嵌套查询/子查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#dcl" class="sidebar-link">DCL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#用户管理" class="sidebar-link">用户管理</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#权限控制" class="sidebar-link">权限控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#字符串函数" class="sidebar-link">字符串函数</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#数值函数" class="sidebar-link">数值函数</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#日期函数" class="sidebar-link">日期函数</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#流程函数" class="sidebar-link">流程函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#约束" class="sidebar-link">约束</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#四大特性" class="sidebar-link">四大特性</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#操作" class="sidebar-link">操作</a></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#隔离级别" class="sidebar-link">隔离级别</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mysql/mysql.html#讨论区" class="sidebar-link">讨论区</a></li></ul></li><li><a href="/db/mysql/mysql_advanced.html" class="sidebar-link">MySQL 进阶</a></li><li><a href="/db/mysql/mysql_install.html" class="sidebar-link">MySQL 安装配置</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h1> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/delete.html" target="_blank" rel="noopener noreferrer">官方 Docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="图形化界面"><a href="#图形化界面" class="header-anchor">#</a> 图形化界面</h2> <ul><li>DBeaver，开源免费，Linux 首选。</li> <li>HeidiSQL，一款精简版的，特别好用。</li> <li>Navicat。</li> <li>SQLyog。</li></ul> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <p>MySQL 中的数据类型有很多，主要分为三类：</p> <ul><li>数值类型。</li> <li>字符串类型。</li> <li>日期时间类型。</li></ul> <h3 id="数值类型"><a href="#数值类型" class="header-anchor">#</a> 数值类型</h3> <p>每种类型都分为有符号（SIGNED）和无符号（UNSIGNED）类型，比如定义一个无符号的小整数 <code>age TINYINT UNSIGNED</code>。</p> <table><thead><tr><th>类型</th> <th>大小</th> <th>描述</th></tr></thead> <tbody><tr><td>TINYINT</td> <td>1 byte</td> <td>小整数</td></tr> <tr><td>SMALLINT</td> <td>2 b</td> <td>大整数</td></tr> <tr><td>MEDIUMINT</td> <td>3 b</td> <td>大整数</td></tr> <tr><td>INT or INTEGER</td> <td>4 b</td> <td>大整数</td></tr> <tr><td>BIGINT</td> <td>8 b</td> <td>极大整数</td></tr> <tr><td>FLOAT</td> <td>4b</td> <td>单精度浮点数值</td></tr> <tr><td>DOUBLE</td> <td>8b</td> <td>双精度浮点数值</td></tr> <tr><td>DECIMAL</td> <td></td> <td>小数值（精确定点数）</td></tr></tbody></table> <h3 id="字符串类型"><a href="#字符串类型" class="header-anchor">#</a> 字符串类型</h3> <table><thead><tr><th>类型</th> <th>大小</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>CHAR</strong></td> <td>0-255 bytes</td> <td>定长字符串</td></tr> <tr><td><strong>VARCHAR</strong></td> <td>0-65535 bytes</td> <td>变长字符串</td></tr> <tr><td>TINYBLOB</td> <td>0-255 bytes</td> <td>不超过 255 个字符的二进制数据</td></tr> <tr><td>TINYTEXT</td> <td>0-255 bytes</td> <td>短文本字符串</td></tr> <tr><td>BLOB</td> <td>0-65535 bytes</td> <td>二进制形式的长文本数据</td></tr> <tr><td>TEXT</td> <td>0-65535 bytes</td> <td>长文本数据</td></tr> <tr><td>MEDIUMBLOB</td> <td>0-16777215 bytes</td> <td>二进制形式的中等长度文本数据</td></tr> <tr><td>MEDIUM TEXT</td> <td>0-16777215 bytes</td> <td>中等长度长文本数据</td></tr> <tr><td>LONGBLOB</td> <td>0-4294967295 bytes</td> <td>二进制形式的极大文本数据</td></tr> <tr><td>LONGTEXT</td> <td>0-4294967295 bytes</td> <td>极大文本数据</td></tr></tbody></table> <p><strong>注意：</strong> 正常使用中，需要指定字符串的长度，比如 <code>chart(10)</code> 表示最多只能存储 10 个字符，超过报错。假如 <code>char(10)</code> 中只存储了一个字符，依然会占用 10 个空间，其他的用空格补位。<code>varchar(10)</code> 中如果如果存储小于 10 个字符的内容，存储的多大就是多大。</p> <h3 id="日期时间类型"><a href="#日期时间类型" class="header-anchor">#</a> 日期时间类型</h3> <table><thead><tr><th>类型</th> <th>大小</th> <th>范围</th> <th>格式</th> <th>描述</th></tr></thead> <tbody><tr><td>DATE</td> <td>3</td> <td>1000-01-01 至 9999-12-31</td> <td>YYYY-MM-DD</td> <td>日期</td></tr> <tr><td>TIME</td> <td>3</td> <td>-838:59:59 至 838:59:59</td> <td>HH:MM:SS</td> <td>时间值或持续时间</td></tr> <tr><td>YEAR</td> <td>1</td> <td>1901 至 2155</td> <td>YYYY</td> <td>年份值</td></tr> <tr><td>DATETIME</td> <td>8</td> <td>1000-01-01 00:00:00 至 9999-12-31 23:59:59</td> <td>YYYY-MM-DD HH:MM:SS</td> <td>混合日期和时间值</td></tr> <tr><td>TIMESTAMP</td> <td>4</td> <td>1970-01-01 00:00:01 至 2038-01-19 03:14:07</td> <td>混合日期和时间值，时间戳</td> <td></td></tr></tbody></table> <h2 id="sql"><a href="#sql" class="header-anchor">#</a> SQL</h2> <h3 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h3> <ul><li>SQL 语句以分号结尾，可以单行也可多行。</li> <li>SQL 语句可以使用空格/缩进来增强语句的可读性。</li> <li>MySQL 数据库的 SQL 语句<code>不区分大小写</code>，关键字建议大写。</li> <li>注释：
<ul><li>单行注释：<code>-- xxx</code> 或者 <code># xxx</code>(MySQL 独有)。</li> <li>多行内容： <code>/* xxx */</code></li></ul></li></ul> <h3 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h3> <ul><li><code>DDl</code>，Data Definition Language，数据<code>定义</code>语言，用来<code>定义数据库对象</code>（数据库、表、字段）。</li> <li><code>DML</code>，Data Manipulation Language，数据<code>操作</code>语言，用来<code>对数据库表中的数据</code>进行增删改。</li> <li><code>DQL</code>，Data Query Language，数据<code>查询</code>语言，用来<code>查询数据库中表的记录</code>。</li> <li><code>DCL</code>，Data Control Language，数据<code>控制</code>语言，用来<code>创建数据库用户、控制数据库</code>的访问权限。</li></ul> <h2 id="ddl"><a href="#ddl" class="header-anchor">#</a> DDL</h2> <blockquote><p>Data Definition Language，数据<code>定义</code>语言，用来<code>定义数据库对象</code>（数据库、表、字段）。</p></blockquote> <h3 id="操作数据库"><a href="#操作数据库" class="header-anchor">#</a> 操作数据库</h3> <p>查询所有数据库：<code>SHOW DATABASES;</code>。</p> <p>查询当前数据库：<code>SELECT DATABASES();</code>。</p> <p>创建数据库：<code>CREATE DATEABASE [IF NOT EXISTS] db_name [DEFAULT CHARSET 字符集] [COLLATE 排序规则];</code>。</p> <ul><li>例如：<code>CREATE DATABASE if not exists user;</code>。</li></ul> <p>删除数据库：<code>DROP DATABASE [IF EXIST] db_name;</code>。</p> <p>使用数据库：<code>USE db_name;</code>。</p> <h3 id="操作表"><a href="#操作表" class="header-anchor">#</a> 操作表</h3> <p>查询所有表：<code>SHOW TABLES;</code>。</p> <p>创建表结构：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_name <span class="token punctuation">(</span>
    字段<span class="token number">1</span> 字段<span class="token number">1</span>类型<span class="token punctuation">[</span><span class="token keyword">COMMENT</span> 字段<span class="token number">1</span>注释<span class="token punctuation">]</span>，
    字段<span class="token number">2</span> 字段<span class="token number">2</span>类型<span class="token punctuation">[</span><span class="token keyword">COMMENT</span> 字段<span class="token number">2</span>注释<span class="token punctuation">]</span>，
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token keyword">COMMENT</span> 表注释<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 示例</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> m_user<span class="token punctuation">(</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> id <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">&quot;no&quot;</span><span class="token punctuation">,</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> age <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">&quot;age&quot;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'user table'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>查询表结构：<code>DESC tb_name;</code>。</p> <p>查询指定表的建表语句：<code>SHOW CREATE TABLE tb_name;</code>。</p> <p>修改表：</p> <ul><li>添加字段（ADD）：<code>ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</code>。</li> <li>修改字段名和类型（CHANGE）：<code>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</code>。</li> <li>修改字段数据类型（MODIFY）：<code>ALTER TABLE 表名 MODIFY 字段名 新类型(长度);</code>。</li> <li>删除字段（DROP）：<code>ALTER TABLE 表名 DROP 字段名;</code>。</li> <li>修改表名（RENAME）：<code>ALTER TABLE 表名 RENAME TO 新表名;</code>。 // TO 可省</li></ul> <p>删除表：<code>DROP TABLE [IF EXISTS] 表名;</code>。</p> <p>删除表，然后重建该表（即清除表数据，但保留表结构）：<code>TRUNCATE TABLE 表名;</code>。</p> <h2 id="dml"><a href="#dml" class="header-anchor">#</a> DML</h2> <blockquote><p>Data Manipulation Language，数据<code>操作</code>语言，用来<code>对数据库表中的数据</code>进行增删改。</p></blockquote> <ul><li>添加数据 <code>INSERT</code>。</li> <li>修改数据 <code>UPDATE</code>。</li> <li>删除数据 <code>DELETE</code>。</li></ul> <h3 id="添加数据-insert"><a href="#添加数据-insert" class="header-anchor">#</a> 添加数据/INSERT</h3> <ul><li>给 <code>所有字段</code> 添加数据：<code>INSERT INTO 表名 VALUES (值1，值2，...);</code>。</li> <li>给 <code>指定字段</code> 添加数据：<code>INSERT INTO 表名 (字段名1，字段名2，...) VALUES (值1，值2，...);</code>。</li> <li>批量添加数据：
<ul><li><code>INSETR INTO 表名 (字段1，字段2，...) VALUES (值1，值2，...), (值1，值2，...);</code></li> <li><code>INSETR INTO 表名 VALUES (值1，值2，...),(值1，值2，...);</code></li></ul></li></ul> <p><strong>注意：</strong> 插入的字符串或者时间格式的值需要加在引号里面。</p> <h3 id="修改数据-update"><a href="#修改数据-update" class="header-anchor">#</a> 修改数据/UPDATE</h3> <p><code>UPDATE 表名 SET 字段1=值1，字段2=值2，... [WHERE 条件];</code>，若无修改条件，默认改全表。</p> <h3 id="删除数据-delete"><a href="#删除数据-delete" class="header-anchor">#</a> 删除数据/DELETE</h3> <p><code>DELETE FROM 表名 [WHERE 条件];</code>，若无条件，默认改全表。</p> <ul><li>只能删除整条记录，不能删除一条记录中的某个字段的值，如果想要删除某个字段的值，可以使用 update 某个字段为 null。</li></ul> <h2 id="dql"><a href="#dql" class="header-anchor">#</a> DQL</h2> <blockquote><p>Data Query Language，数据<code>查询</code>语言，用来<code>查询数据库中表的记录</code>。</p></blockquote> <p>查询用关键字 <code>SELECT</code>，查询语法为：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// 数字代表实际执行顺序，也就说返回字段是在分组过滤后才做的。</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token comment">// 4</span>
<span class="token keyword">FROM</span> 表名列表 <span class="token comment">// 1</span>
<span class="token keyword">WHERE</span> 条件列表 <span class="token comment">// 2</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 分组字段列表 <span class="token comment">// 3</span>
<span class="token keyword">HAVING</span> 分组后条件列表 <span class="token comment">// </span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 排序字段列表 <span class="token comment">// 5</span>
<span class="token keyword">LIMIT</span> 分页参数 <span class="token comment">// 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="基本查询-别名-去重"><a href="#基本查询-别名-去重" class="header-anchor">#</a> 基本查询/别名/去重</h3> <ul><li><code>SELECT * FROM 表名;</code></li> <li><code>SELECT 字段1, 字段2, ... FROM 表名;</code></li></ul> <p>设置别名：</p> <ul><li><code>SELECT 字段1 [AS 别名1]，字段2 [AS 别名2] ... FROM 表名;</code> // AS 可省</li></ul> <p>去重：</p> <ul><li><code>SELECT DISTINCT 字段列表 FROM 表名;</code></li></ul> <h3 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h3> <p>使用关键字 <code>WHERE</code>，语法为：<code>SELECT 字段列表 FROM 表名 WHERE 条件列表;</code>。</p> <p>可用条件有：</p> <table><thead><tr><th>符号</th> <th>功能</th></tr></thead> <tbody><tr><td>&gt;</td> <td>大于</td></tr> <tr><td>&gt;=</td> <td>大于等于</td></tr> <tr><td>&lt;</td> <td>小于</td></tr> <tr><td>&lt;=</td> <td>小于等于</td></tr> <tr><td>=</td> <td>等于</td></tr> <tr><td>&lt;&gt; 或 !=</td> <td>不等于</td></tr> <tr><td>BETWEEN...AND...</td> <td>在某个范围内（含最小最大值）</td></tr> <tr><td>IN(...)</td> <td>在 in 之后的列表中的值，多选一</td></tr> <tr><td>LIKE 占位符</td> <td>模糊匹配（ <code>_</code> 匹配单个字符，<code>%</code> 匹配多个字符）</td></tr> <tr><td>IS NULL</td> <td>是 NULL</td></tr> <tr><td>AND 或 &amp;&amp;</td> <td>并条件</td></tr> <tr><td>OR 或 <code>||</code></td> <td>或条件</td></tr> <tr><td>NOT 或 !</td> <td>非条件，取反</td></tr></tbody></table> <ul><li><code>BETWEEN 小值 AND 大值</code> &lt;==&gt; <code>&gt;= 小值 &amp;&amp; &lt;= 大值</code></li> <li>查询名字为两个字的用户：<code>SELECT * FROM user WHERE name LIKE '__'</code>。</li></ul> <h3 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h3> <p>将一列数据作为一个整体，进行纵向计算。</p> <p><strong>语法：</strong> <code>SELECT 聚合函数(字段列表) FROM 表名;</code>。</p> <p>常用的聚合函数有：</p> <table><thead><tr><th>函数</th> <th>作用</th></tr></thead> <tbody><tr><td>count</td> <td>统计数量</td></tr> <tr><td>max</td> <td>最大值</td></tr> <tr><td>min</td> <td>最小值</td></tr> <tr><td>avg</td> <td>平均值</td></tr> <tr><td>sum</td> <td>求和</td></tr></tbody></table> <p><strong>注意：</strong> <code>NULL</code> 值不参与聚合运算。</p> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h4> <ul><li>统计用户总数：<code>SELECT COUNT(*) FROM user;</code>。</li> <li>统计用户总数：<code>SELECT AVG(age) FROM user;</code>。</li></ul> <h3 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h3> <p>关键字 <code>GROUP BY</code>：<code>SELECT 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段 [HAVING 分组后过滤条件];</code>。</p> <p><strong>注意：</strong> <code>WHERE</code> &gt; 聚合函数 &gt; <code>HAVING</code>。</p> <h3 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h3> <p>关键字 <code>ORDER BY</code>：<code>SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1，字段2 排序方式2;</code>。</p> <p>排序方式分为：</p> <ul><li><code>ASC</code> 升序（默认）。</li> <li><code>DESC</code> 降序。</li></ul> <p>多个字段排序规则：先按照第一个字段排序，第一个字段值相同时，再按照第二个字段排序。</p> <h4 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h4> <p>按照年龄升序排序：<code>SELECT * FROM user ORDER BY age ASC;</code>。</p> <h3 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h3> <p>分页查询的实现每个数据库是不一样的，在 MySQL 中使用的是关键字 <code>LIMIT</code>：</p> <p><code>SELECT * FROM 表名 LIMIT 起始索引，要查询条数</code>。</p> <ul><li>起始索引 0 开始，</li></ul> <h2 id="dql-多表查询"><a href="#dql-多表查询" class="header-anchor">#</a> DQL-多表查询</h2> <p>多表查询主要分为 <code>连接查询</code>（交集）、<code>联合查询</code>（并集）和 <code>嵌套查询</code>(<code>子查询</code>)。</p> <h3 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h3> <p>连接查询共分为：</p> <ul><li><code>内连接</code>，只取两表交集</li> <li><code>外连接</code> <ul><li>左外连接，查询左表所有数据</li> <li>右外连接，查询右表所有数据</li></ul></li> <li><code>自连接</code>？？</li></ul> <p>连接查询需要指定两个表的关联条件，用来消除笛卡尔积。<strong>笛卡尔积：集合 A 和 集合 B 的所有排列组合值。</strong></p> <h4 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h4> <p>内连接只返回集合 A 和集合 B 的交集，分为 2 种：</p> <ul><li>隐式内连接 <code>SELECT * FROM t1, t2 WHERE t1.xx = t2.yy</code></li> <li>显式内连接 <code>SELECT * FROM t1 [INNER] JOIN t2 ON t1.xx = t2.yy</code></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 隐式内连接</span>
<span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> ur<span class="token punctuation">.</span>name <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">,</span> user_role ur <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token punctuation">.</span>role_id <span class="token operator">=</span> ur<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token comment">-- 显式内连接，inner 可省略</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token punctuation">[</span><span class="token keyword">inner</span><span class="token punctuation">]</span> <span class="token keyword">join</span> user_role ur <span class="token keyword">on</span> <span class="token keyword">user</span><span class="token punctuation">.</span>role_id <span class="token operator">=</span> ur<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h4> <p>外连接分为 2 种：</p> <ul><li>左外连接，<code>SELECT * FROM t1 LEFT [OUTER] JOIN t2 ON t1.xx = t2.yy</code></li> <li>右外连接，<code>SELECT * FROM t1 RIGHT [OUTER] JOIN t2 ON t1.xx = t2.yy</code></li></ul> <p>左连接返回左表所有数据和交集数据，右连接亦然。</p> <h4 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h4> <blockquote><p>自连接是一种特殊的外连接，自己连接自己</p></blockquote> <p>语法：<code>SELECT * FROM t1 alias1 JOIN t1 alias2 ON alias1.learder_id = alias2.id</code></p> <p>自连接可以是内连接也可以是外连接。</p> <h3 id="联合查询"><a href="#联合查询" class="header-anchor">#</a> 联合查询</h3> <p>联合查询就是将多次查询合并，返回一个新的结果集，关键字 <code>union</code> 或 <code>union all</code>。</p> <ul><li><code>union</code>，查询到的结果<strong>去重</strong>处理。</li> <li><code>union all</code>，查询到的结果只是简单的拼接在一起，<strong>不会去重</strong>处理。</li></ul> <p>联合查询的多张表的列数和字段类型必须保持一致。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> DROM t1
<span class="token keyword">UNION</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span><span class="token punctuation">]</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="嵌套查询-子查询"><a href="#嵌套查询-子查询" class="header-anchor">#</a> 嵌套查询/子查询</h3> <blockquote><p>嵌套查询也叫子查询。用 <code>()</code> 括起来。</p></blockquote> <p>语法：<code>SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);</code></p> <p>子查询的外部语句可以是 <code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code> 种任意一种。</p> <p>--&gt; 根据查询结果不同，可以分为以下几种：</p> <ul><li><code>标量子查询</code>，子查询返回的结果是一个单个的值</li> <li><code>列子查询</code>，返回结果是一列（可以多行）</li> <li><code>行子查询</code>，返回结果是一行（可以多列）</li> <li><code>表子查询</code>，返回结果是多行多列的</li></ul> <p>--&gt; 根据子查询位置，可以分为：</p> <ul><li><code>WHERE</code> 之后</li> <li><code>FROM</code> 之后</li> <li><code>SELECT</code> 之后</li></ul> <h4 id="标量子查询"><a href="#标量子查询" class="header-anchor">#</a> 标量子查询</h4> <blockquote><p>子查询返回的结果是一个单个的值</p></blockquote> <h4 id="列子查询"><a href="#列子查询" class="header-anchor">#</a> 列子查询</h4> <blockquote><p>子查询返回的结果是一列（可以多行）</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> roleInfo <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="行子查询"><a href="#行子查询" class="header-anchor">#</a> 行子查询</h4> <blockquote><p>子查询返回的结果是一行（可以多列）</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">-- 等同于</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="表子查询"><a href="#表子查询" class="header-anchor">#</a> 表子查询</h4> <blockquote><p>子查询返回的结果是多行多列</p></blockquote> <p>示例：查询和张三、李四的职位和工资相同的员工信息。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 1. 查询张三、李四的职位和工资</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'张三'</span> <span class="token operator">or</span> name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span>
<span class="token comment">-- 返回结果是一个多行多列的</span>
<span class="token comment">-- job      salary</span>
<span class="token comment">-- 开发      1800</span>
<span class="token comment">-- 项目经理  3500</span>
<span class="token comment">-- 2. 查询员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token punctuation">(</span>job<span class="token punctuation">,</span> salary<span class="token punctuation">)</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>查询结果可以当做临时表进行操作，查询的结果不仅还可以放在 from 后，作为一张表进行查询。</p> <h2 id="dcl"><a href="#dcl" class="header-anchor">#</a> DCL</h2> <blockquote><p>Data Control Language，数据<code>控制</code>语言，用来<code>创建数据库用户、控制数据库</code>的访问权限。</p></blockquote> <h3 id="用户管理"><a href="#用户管理" class="header-anchor">#</a> 用户管理</h3> <p>MySQL 数据库的用户存放在系统数据库 <code>mysql</code> 中的 <code>user</code> 表中。</p> <h4 id="查询用户"><a href="#查询用户" class="header-anchor">#</a> 查询用户</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">USE</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="创建用户"><a href="#创建用户" class="header-anchor">#</a> 创建用户</h4> <p><code>CREATE USER '用户名@主机名' INDENTIFIED BY '密码';</code></p> <h4 id="修改用户密码"><a href="#修改用户密码" class="header-anchor">#</a> 修改用户密码</h4> <p><code>ALTER USER '用户名@主机名' INDENTIFIED WITH mysql_native_password BY '新密码';</code></p> <h4 id="删除用户"><a href="#删除用户" class="header-anchor">#</a> 删除用户</h4> <p><code>DROP USER '用户名@主机名';</code></p> <h3 id="权限控制"><a href="#权限控制" class="header-anchor">#</a> 权限控制</h3> <p>MySQL 中定义了很多权限，常用的权限如下：</p> <table><thead><tr><th>权限</th> <th>说明</th></tr></thead> <tbody><tr><td>ALL，ALL PRIVILEGES</td> <td>所有权限</td></tr> <tr><td>SELECT</td> <td>查询数据</td></tr> <tr><td>INSERT</td> <td>插入数据</td></tr> <tr><td>UPDATE</td> <td>更新数据</td></tr> <tr><td>DELETE</td> <td>删除数据</td></tr> <tr><td>ALTER</td> <td>修改表</td></tr> <tr><td>DROP</td> <td>删除数据库/表/视图</td></tr> <tr><td>CREATE</td> <td>创建数据库/表</td></tr></tbody></table> <h4 id="查询权限"><a href="#查询权限" class="header-anchor">#</a> 查询权限</h4> <p><code>SHOW GRANTS FOR '用户名@主机名';</code></p> <h4 id="授予权限"><a href="#授予权限" class="header-anchor">#</a> 授予权限</h4> <p><code>GRANTS 权限列表 ON 数据库.表名 TO '用户名@主机名';</code></p> <h4 id="撤销权限"><a href="#撤销权限" class="header-anchor">#</a> 撤销权限</h4> <p><code>REVOKE 权限列表 ON 数据库.表名 FROM '用户名@主机名';</code></p> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <h3 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h3> <ul><li><code>CONCAT(S1, S2, S3...)</code>，拼接字符串。</li> <li><code>LOWER(str)</code></li> <li><code>UPPER(str)</code></li> <li><code>LPAD(str, n, pad)</code>，左填充，用 pad 对 str 的左边进行填充，达到 n 个字符串长度。</li> <li><code>RPAD(str, n, pad)</code></li> <li><code>TRIM(str)</code>，去除字符串头尾的空格。</li> <li><code>SUBSTRING(str, start, length)</code>，从 start 开始 length 长度。</li></ul> <h3 id="数值函数"><a href="#数值函数" class="header-anchor">#</a> 数值函数</h3> <ul><li><code>CEIL(x)</code>，向上取整。</li> <li><code>FLOOR(x)</code>，向下取整。</li> <li><code>MOD(x，y)</code>，返回 x/y 的模（取余数）。</li> <li><code>RAND(x)</code>，返回 0~1 内的随机数。</li> <li><code>ROUND(x, y)</code>，求参数 x 的四舍五入的值，保留 y 位小数。</li></ul> <p>生成 6 位验证码：<code>SELECT LPAD( CEIL (RAND()*1000000),6,0)</code>。</p> <h3 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h3> <ul><li><code>CURDATE()</code>, current date。</li> <li><code>CURTIME()</code>, current time。</li> <li><code>NOW()</code>, current datetime。</li> <li><code>YEAR(date)</code></li> <li><code>MONTH(date)</code></li> <li><code>DAY(date)</code></li> <li><code>DATE_ADD(date, INTERVAL expr type)</code>，返回一个日期/时间值加上一个时间间隔 expr 后的时间值。
<ul><li>70 天后的时间：<code>SELECT DATE_ADD(NOW(), INTERVAL 70 DAY);</code>。</li></ul></li> <li><code>DATEDIFF(date1, date2)</code>，<em>date1 - date2</em>，返回起止时间的天数。</li></ul> <h3 id="流程函数"><a href="#流程函数" class="header-anchor">#</a> 流程函数</h3> <ul><li><code>IF(boolValue, t, f)</code></li> <li><code>IFNULL(value1, value2)</code>，如果不为空返回 val1，否则返回 value 2，类似 getIfBlank() 方法。</li> <li><code>CASE WHEN [val1] THEN [res1] ... ELSE [defaultValue] END</code>，如果 val1 == true，则返回 res1，否则返回 default 默认值。</li> <li><code>CASE [expr] WHEN [val1] THEN [res1] ... ELSE [defaultValue] END</code>，如果 expr 的值等于 val1，则返回 res1，否则返回 default 默认值。</li></ul> <p>示例1：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	nickname <span class="token punctuation">,</span>
	mobile <span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">CASE</span>
		address <span class="token keyword">when</span> <span class="token string">'北京'</span> <span class="token keyword">then</span> <span class="token string">'一线'</span>
		<span class="token keyword">when</span> <span class="token string">'上海'</span> <span class="token keyword">THEN</span> <span class="token string">'一线'</span>
		<span class="token keyword">ELSE</span> <span class="token string">'二线'</span>
	<span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 地址
<span class="token keyword">FROM</span>
	member
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h2> <p>约束是作用与表中字段上的规则，用于限制存储在表中的数据。目的是为了保证数据库中数据的正确、有效性和完整性。</p> <table><thead><tr><th>约束</th> <th>关键字</th> <th>描述</th></tr></thead> <tbody><tr><td>非空约束</td> <td>NOT NULL</td> <td>限制该字段的数据不能为 NULL</td></tr> <tr><td>唯一约束</td> <td>UNIQUE</td> <td>保证该字段的所有数据都是唯一、不重复的</td></tr> <tr><td>主键约束</td> <td>PRIMARY KEY</td> <td>主键是一行数据的唯一标识，要求非空且唯一</td></tr> <tr><td>默认约束</td> <td>DEFAULE</td> <td>保存数据时，如果未指定该字段的值，则采用默认值</td></tr> <tr><td>外键约束</td> <td>FOREIGN KEY</td> <td>用来让两张表的数据之间建立连接，保证数据的一致性和完整性</td></tr> <tr><td>检查约束（v8.0.16 之后）</td> <td>CHECK</td> <td>保证字段值满足某个条件</td></tr></tbody></table> <p>注意：约束作用于表中的字段上，可以在创建/修改表的时候添加约束。</p> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <p>事务就是一组操作的集合，它是一个不可分割的单位，事务会把所有操作当做一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p> <p>MySQL 的事务默认是自动提交的，也就说，当执行一条 DML 语句，MySQL 会立即隐式的提交事务。</p> <h3 id="四大特性"><a href="#四大特性" class="header-anchor">#</a> 四大特性</h3> <p>MySQL 的事务满足 ACID 特性：</p> <ul><li>原子性 <code>Atomicity</code>，事务是不可分割的最小操作单元，要么全部成功，要么全部失败。</li> <li>一致性 <code>Consistency</code>，事务完成时，必须使所有的数据都保持一致状态。</li> <li>隔离性 <code>Isolation</code>，数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。</li> <li>持久性 <code>Durability</code>，事务一旦提交或回滚，它对数据库中数据的改变就是永久的。</li></ul> <h3 id="操作"><a href="#操作" class="header-anchor">#</a> 操作</h3> <ul><li>查看事务提交方式 <code>SELECT @@autocommit;</code></li> <li>设置事务提交方式 <code>SELECT @@autocommit = 0;</code></li> <li>开启事务 <code>START TRANSACTION</code> 或 <code>BEGIN</code></li> <li>提交事务 <code>COMMIT;</code></li> <li>回滚事务 <code>ROLLBACK;</code></li></ul> <h3 id="隔离级别"><a href="#隔离级别" class="header-anchor">#</a> 隔离级别</h3> <p>MySQL 中事务的隔离级别一共分为 4 种，隔离级别由低到高依次为：</p> <ol><li><strong>读未提交</strong> <code>READ UNCOMMITED</code>，所有事务都可以看到其它事务未提交的数据。
<ul><li>可能发生 <em>脏读</em>，很少使用。</li> <li>因为可以读取到其他事务中未提交的数据，而未提交的数据可能会发生回滚，因此我们把该级别读取到的数据称之为脏数据，把这个问题称之为脏读。</li></ul></li> <li><strong>读已提交</strong> <code>READ COMMITED</code>，一个事务提交后，它修改的数据才会被其它事务看到。
<ul><li>可能发生 <em>不可重复读</em>。</li></ul></li> <li><strong>可重复读</strong> <code>REPEATABLE READ</code>，一个事务执行过程中看到的数据，总是和这个事务开启时看到的数据一致。// MySQL default
<ul><li>可能发生 <em>幻读</em>。InnoDB 通过 MVCC 解决了幻读。</li></ul></li> <li><strong>可串行化</strong> <code>SERIALIZABLE</code>，按照顺序执行事务
<ul><li>解决 幻读。最高隔离级别，效率最低。</li></ul></li></ol> <table><thead><tr><th>隔离级别</th> <th>脏读</th> <th>不可重复读</th> <th>幻读</th></tr></thead> <tbody><tr><td>读未提交</td> <td>Y</td> <td>Y</td> <td>Y</td></tr> <tr><td>读已提交</td> <td>-</td> <td>Y</td> <td>Y</td></tr> <tr><td>可重复读</td> <td>-</td> <td>-</td> <td>Y</td></tr> <tr><td>可串行化</td> <td>-</td> <td>-</td> <td>-</td></tr></tbody></table> <p>注：Y 表示可能发生，- 表示不会发生。</p> <h4 id="事务问题"><a href="#事务问题" class="header-anchor">#</a> 事务问题</h4> <p>主要有 3 种问题：</p> <ul><li><code>脏读</code>，一个事务读取到其它事务还未提交的数据（未提交的数据可能会发生回滚）。</li> <li><code>不可重复读</code>，当一个事务 A 开启后，查询 user1 后，事务 B 修改了 user1 的数据并提交了，然后事务 A 的第 2 步有查询了 user1，这时候对于事务 A 来说，读取到的 user1 数据变化了，这种现象就是不可重复读。</li> <li><code>幻读</code>，事务 A 中第一步查询 user1 不存在，事务 B 创建出来 user1，事务 A 第一步中查询 user1 不存在则执行插入操作，但是插入失败，查询 user1 也是不存在（解决不可重复读后，事务读取的数据总和事务开启前一致，所以事务 B 插入后，事务 A 也读取不到的），这种现象就是幻读。即，我查询没有啊，怎么插入的时候，又有了？</li></ul> <h2 id="讨论区"><a href="#讨论区" class="header-anchor">#</a> 讨论区</h2> <blockquote><p>由于评论过多会影响页面最下方的导航，故将评论区做默认折叠处理。</p></blockquote> <details class="custom-block details"><summary>点击查看评论区内容，渴望您的宝贵建议~</summary> <!----></details></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/24/2023, 1:44:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/db/mysql/" class="prev router-link-active">
        MySQL 总览
      </a></span> <span class="next"><a href="/db/mysql/mysql_advanced.html">
        MySQL 进阶
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5780eb53.js" defer></script><script src="/assets/js/2.e1f1d232.js" defer></script><script src="/assets/js/80.3fd73e00.js" defer></script>
  </body>
</html>
