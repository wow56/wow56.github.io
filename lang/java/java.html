<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 基础 | Wow56 个人知识库</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/flaglogo.png">
    <link rel="manifest" href="/flaglogo.png">
    <link rel="apple-touch-icon" href="/flaglogo.png">
    <meta name="description" content="Never stop learning">
    
    <link rel="preload" href="/assets/css/0.styles.b25eaea0.css" as="style"><link rel="preload" href="/assets/js/app.5780eb53.js" as="script"><link rel="preload" href="/assets/js/2.e1f1d232.js" as="script"><link rel="preload" href="/assets/js/10.921c058c.js" as="script"><link rel="prefetch" href="/assets/js/100.678efb16.js"><link rel="prefetch" href="/assets/js/101.6fd33b9c.js"><link rel="prefetch" href="/assets/js/102.dfa6e733.js"><link rel="prefetch" href="/assets/js/103.4b74461a.js"><link rel="prefetch" href="/assets/js/104.603354fe.js"><link rel="prefetch" href="/assets/js/105.9da719c4.js"><link rel="prefetch" href="/assets/js/106.6aa24318.js"><link rel="prefetch" href="/assets/js/107.5ea57319.js"><link rel="prefetch" href="/assets/js/108.37ded6f2.js"><link rel="prefetch" href="/assets/js/109.adc40804.js"><link rel="prefetch" href="/assets/js/11.00deed7e.js"><link rel="prefetch" href="/assets/js/110.f1791c33.js"><link rel="prefetch" href="/assets/js/111.bff2cea6.js"><link rel="prefetch" href="/assets/js/112.4eb7e8b1.js"><link rel="prefetch" href="/assets/js/113.4ca0e39f.js"><link rel="prefetch" href="/assets/js/114.03d070d7.js"><link rel="prefetch" href="/assets/js/115.a007d470.js"><link rel="prefetch" href="/assets/js/116.027c798b.js"><link rel="prefetch" href="/assets/js/117.6eaa95a7.js"><link rel="prefetch" href="/assets/js/118.3468f2af.js"><link rel="prefetch" href="/assets/js/119.94c060f2.js"><link rel="prefetch" href="/assets/js/12.e7e7feff.js"><link rel="prefetch" href="/assets/js/120.2639e06f.js"><link rel="prefetch" href="/assets/js/121.1ee7e578.js"><link rel="prefetch" href="/assets/js/122.d1f0654b.js"><link rel="prefetch" href="/assets/js/123.52d57be3.js"><link rel="prefetch" href="/assets/js/124.d515f509.js"><link rel="prefetch" href="/assets/js/125.c783db82.js"><link rel="prefetch" href="/assets/js/126.08d41fac.js"><link rel="prefetch" href="/assets/js/127.5ab5b3c5.js"><link rel="prefetch" href="/assets/js/13.c0e1c39d.js"><link rel="prefetch" href="/assets/js/14.4be8face.js"><link rel="prefetch" href="/assets/js/15.b235fe5f.js"><link rel="prefetch" href="/assets/js/16.a62bd2ec.js"><link rel="prefetch" href="/assets/js/17.d3fa5b5a.js"><link rel="prefetch" href="/assets/js/18.04056df6.js"><link rel="prefetch" href="/assets/js/19.e0daa831.js"><link rel="prefetch" href="/assets/js/20.aae5efb2.js"><link rel="prefetch" href="/assets/js/21.51bfd139.js"><link rel="prefetch" href="/assets/js/22.d92aecaf.js"><link rel="prefetch" href="/assets/js/23.fd2079a6.js"><link rel="prefetch" href="/assets/js/24.7cadaa30.js"><link rel="prefetch" href="/assets/js/25.38c9c1a4.js"><link rel="prefetch" href="/assets/js/26.1c8277a8.js"><link rel="prefetch" href="/assets/js/27.1e495f81.js"><link rel="prefetch" href="/assets/js/28.7ef5af76.js"><link rel="prefetch" href="/assets/js/29.9031cb92.js"><link rel="prefetch" href="/assets/js/3.93a08b3b.js"><link rel="prefetch" href="/assets/js/30.1b61bbf8.js"><link rel="prefetch" href="/assets/js/31.f8cbfd44.js"><link rel="prefetch" href="/assets/js/32.0632cb94.js"><link rel="prefetch" href="/assets/js/33.a46a0b3d.js"><link rel="prefetch" href="/assets/js/34.fba531e6.js"><link rel="prefetch" href="/assets/js/35.db1fd348.js"><link rel="prefetch" href="/assets/js/36.9e6108c6.js"><link rel="prefetch" href="/assets/js/37.35fca0f6.js"><link rel="prefetch" href="/assets/js/38.ac22df93.js"><link rel="prefetch" href="/assets/js/39.7cce2902.js"><link rel="prefetch" href="/assets/js/4.e30be376.js"><link rel="prefetch" href="/assets/js/40.3560e650.js"><link rel="prefetch" href="/assets/js/41.d4632345.js"><link rel="prefetch" href="/assets/js/42.adce46c5.js"><link rel="prefetch" href="/assets/js/43.d2ff2a7e.js"><link rel="prefetch" href="/assets/js/44.d3f6ac6e.js"><link rel="prefetch" href="/assets/js/45.1e3b049e.js"><link rel="prefetch" href="/assets/js/46.917a9a8a.js"><link rel="prefetch" href="/assets/js/47.5a73f25d.js"><link rel="prefetch" href="/assets/js/48.3b970b0a.js"><link rel="prefetch" href="/assets/js/49.dc6fd937.js"><link rel="prefetch" href="/assets/js/5.9411f932.js"><link rel="prefetch" href="/assets/js/50.109fdeb5.js"><link rel="prefetch" href="/assets/js/51.5ec4fc4b.js"><link rel="prefetch" href="/assets/js/52.0c03ff96.js"><link rel="prefetch" href="/assets/js/53.e91a6f48.js"><link rel="prefetch" href="/assets/js/54.7f886adb.js"><link rel="prefetch" href="/assets/js/55.2747b24f.js"><link rel="prefetch" href="/assets/js/56.a78db785.js"><link rel="prefetch" href="/assets/js/57.517d420c.js"><link rel="prefetch" href="/assets/js/58.0429f17c.js"><link rel="prefetch" href="/assets/js/59.9d68455f.js"><link rel="prefetch" href="/assets/js/6.3e126bb5.js"><link rel="prefetch" href="/assets/js/60.7cc000dc.js"><link rel="prefetch" href="/assets/js/61.8eaec827.js"><link rel="prefetch" href="/assets/js/62.9eb7a7b3.js"><link rel="prefetch" href="/assets/js/63.35e36177.js"><link rel="prefetch" href="/assets/js/64.6282d042.js"><link rel="prefetch" href="/assets/js/65.58ed4699.js"><link rel="prefetch" href="/assets/js/66.971cb02f.js"><link rel="prefetch" href="/assets/js/67.0a93b287.js"><link rel="prefetch" href="/assets/js/68.a7b05e3b.js"><link rel="prefetch" href="/assets/js/69.6572830f.js"><link rel="prefetch" href="/assets/js/7.de70efc4.js"><link rel="prefetch" href="/assets/js/70.168da9d9.js"><link rel="prefetch" href="/assets/js/71.d57d693b.js"><link rel="prefetch" href="/assets/js/72.91fa5cd3.js"><link rel="prefetch" href="/assets/js/73.7de2d2b8.js"><link rel="prefetch" href="/assets/js/74.acd298e4.js"><link rel="prefetch" href="/assets/js/75.62e67874.js"><link rel="prefetch" href="/assets/js/76.f2b96539.js"><link rel="prefetch" href="/assets/js/77.4255efc8.js"><link rel="prefetch" href="/assets/js/78.114300ba.js"><link rel="prefetch" href="/assets/js/79.d14a2756.js"><link rel="prefetch" href="/assets/js/8.1ec756ec.js"><link rel="prefetch" href="/assets/js/80.3fd73e00.js"><link rel="prefetch" href="/assets/js/81.71ebdbf4.js"><link rel="prefetch" href="/assets/js/82.0a5b5bb1.js"><link rel="prefetch" href="/assets/js/83.a23907a9.js"><link rel="prefetch" href="/assets/js/84.8c2bc996.js"><link rel="prefetch" href="/assets/js/85.ed1b9552.js"><link rel="prefetch" href="/assets/js/86.49d44a86.js"><link rel="prefetch" href="/assets/js/87.33153d90.js"><link rel="prefetch" href="/assets/js/88.a021dc21.js"><link rel="prefetch" href="/assets/js/89.b80b10c6.js"><link rel="prefetch" href="/assets/js/9.24d5e519.js"><link rel="prefetch" href="/assets/js/90.a059a06c.js"><link rel="prefetch" href="/assets/js/91.0c2e07a8.js"><link rel="prefetch" href="/assets/js/92.0460267f.js"><link rel="prefetch" href="/assets/js/93.630cc9b9.js"><link rel="prefetch" href="/assets/js/94.64e96711.js"><link rel="prefetch" href="/assets/js/95.cc7ee0e1.js"><link rel="prefetch" href="/assets/js/96.43f96f85.js"><link rel="prefetch" href="/assets/js/97.73dc1af0.js"><link rel="prefetch" href="/assets/js/98.10b4ffee.js"><link rel="prefetch" href="/assets/js/99.e6bfc1cd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b25eaea0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/flaglogo.png" alt="Wow56 个人知识库" class="logo"> <span class="site-name can-hide">Wow56 个人知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言/语法" class="dropdown-title"><span class="title">语言/语法</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言/语法" class="mobile-dropdown-title"><span class="title">语言/语法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lang/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/lang/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/lang/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lang/js/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/lang/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lang/regex/" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/lang/script/" class="nav-link">
  脚本 Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/markdown/" class="nav-link">
  Markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架/类库" class="dropdown-title"><span class="title">框架/类库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架/类库" class="mobile-dropdown-title"><span class="title">框架/类库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          应用程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/spring/" class="nav-link">
  Spring 生态
</a></li><li class="dropdown-subitem"><a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/gis/" class="nav-link">
  Web GIS
</a></li><li class="dropdown-subitem"><a href="/framework/echarts/" class="nav-link">
  ECahrts
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysql/" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          非关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/db/es/" class="nav-link">
  Elasticsearch
</a></li></ul></li><li class="dropdown-item"><h4>
          持久层框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用技术" class="dropdown-title"><span class="title">应用技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="应用技术" class="mobile-dropdown-title"><span class="title">应用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/applied-tech/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/svn/" class="nav-link">
  SVN
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/mq/" class="nav-link">
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/k8s/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/cas/" class="nav-link">
  CAS
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/workflow/" class="nav-link">
  Workflow
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机素养" class="dropdown-title"><span class="title">计算机素养</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机素养" class="mobile-dropdown-title"><span class="title">计算机素养</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-literacy/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/data-structure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发常识" class="dropdown-title"><span class="title">开发常识</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发常识" class="mobile-dropdown-title"><span class="title">开发常识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/common-sense/common/common_sense.html" class="nav-link">
  常识
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/ide-settings/" class="nav-link">
  IDE 开发环境配置
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/log/" class="nav-link">
  Log
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/test/" class="nav-link">
  Test
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/swagger/" class="nav-link">
  Swagger
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/share/recommend/" class="nav-link">
  推荐
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/effective_java.html" class="nav-link">
  Effective Java
</a></li><li class="dropdown-item"><!----> <a href="/read/clean_code.html" class="nav-link">
  代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/read/coding_style.html" class="nav-link">
  Coding Style
</a></li><li class="dropdown-item"><!----> <a href="/read/gx.html" class="nav-link">
  高项笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wow56/wow56.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言/语法" class="dropdown-title"><span class="title">语言/语法</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言/语法" class="mobile-dropdown-title"><span class="title">语言/语法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lang/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/lang/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/lang/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lang/js/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/lang/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lang/regex/" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/lang/script/" class="nav-link">
  脚本 Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/markdown/" class="nav-link">
  Markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架/类库" class="dropdown-title"><span class="title">框架/类库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架/类库" class="mobile-dropdown-title"><span class="title">框架/类库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          应用程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/spring/" class="nav-link">
  Spring 生态
</a></li><li class="dropdown-subitem"><a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/gis/" class="nav-link">
  Web GIS
</a></li><li class="dropdown-subitem"><a href="/framework/echarts/" class="nav-link">
  ECahrts
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysql/" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          非关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/db/es/" class="nav-link">
  Elasticsearch
</a></li></ul></li><li class="dropdown-item"><h4>
          持久层框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用技术" class="dropdown-title"><span class="title">应用技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="应用技术" class="mobile-dropdown-title"><span class="title">应用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/applied-tech/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/svn/" class="nav-link">
  SVN
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/mq/" class="nav-link">
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/k8s/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/cas/" class="nav-link">
  CAS
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/workflow/" class="nav-link">
  Workflow
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机素养" class="dropdown-title"><span class="title">计算机素养</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机素养" class="mobile-dropdown-title"><span class="title">计算机素养</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-literacy/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/data-structure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发常识" class="dropdown-title"><span class="title">开发常识</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发常识" class="mobile-dropdown-title"><span class="title">开发常识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/common-sense/common/common_sense.html" class="nav-link">
  常识
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/ide-settings/" class="nav-link">
  IDE 开发环境配置
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/log/" class="nav-link">
  Log
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/test/" class="nav-link">
  Test
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/swagger/" class="nav-link">
  Swagger
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/share/recommend/" class="nav-link">
  推荐
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/effective_java.html" class="nav-link">
  Effective Java
</a></li><li class="dropdown-item"><!----> <a href="/read/clean_code.html" class="nav-link">
  代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/read/coding_style.html" class="nav-link">
  Coding Style
</a></li><li class="dropdown-item"><!----> <a href="/read/gx.html" class="nav-link">
  高项笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wow56/wow56.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lang/java/" aria-current="page" class="sidebar-link">Java 总览</a></li><li><a href="/lang/java/java.html" aria-current="page" class="active sidebar-link">Java 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#参考文档" class="sidebar-link">参考文档</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#基本数据类型" class="sidebar-link">基本数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#整数型" class="sidebar-link">整数型</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#浮点型" class="sidebar-link">浮点型</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#字符型" class="sidebar-link">字符型</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#布尔类型" class="sidebar-link">布尔类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#输入输出" class="sidebar-link">输入输出</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#占位符" class="sidebar-link">占位符</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#面向对象" class="sidebar-link">面向对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#向上转型" class="sidebar-link">向上转型</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#this" class="sidebar-link">this</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#静态字段和静态方法" class="sidebar-link">静态字段和静态方法</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#访问修饰符" class="sidebar-link">访问修饰符</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#关键字" class="sidebar-link">关键字</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#instanceof" class="sidebar-link">instanceof</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#java-核心-常用类" class="sidebar-link">Java 核心/常用类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#可变长参数" class="sidebar-link">可变长参数</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#string-类" class="sidebar-link">String 类</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#stringbuilder-类" class="sidebar-link">StringBuilder 类</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#enum-类" class="sidebar-link">Enum 类</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#bigdecimal-类" class="sidebar-link">BigDecimal 类</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#日志-异常处理" class="sidebar-link">日志/异常处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#捕获异常" class="sidebar-link">捕获异常</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#nullpointerexception" class="sidebar-link">NullPointerException</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#断言-assert" class="sidebar-link">断言 assert</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#日志" class="sidebar-link">日志</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#jdk-logging" class="sidebar-link">JDK Logging</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#slf4j-和-logback" class="sidebar-link">SLF4J 和 Logback</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#注解-annotation" class="sidebar-link">注解（Annotation）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#三类注解" class="sidebar-link">三类注解</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#自定义注解" class="sidebar-link">自定义注解</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#泛型" class="sidebar-link">泛型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#使用泛型" class="sidebar-link">使用泛型</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#编写泛型" class="sidebar-link">编写泛型</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#擦拭法-实现方式" class="sidebar-link">擦拭法 - 实现方式</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#extends-通配符" class="sidebar-link">extends 通配符</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#super-通配符" class="sidebar-link">super 通配符</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#pecs-原则" class="sidebar-link">PECS 原则</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#无限制通配符" class="sidebar-link">无限制通配符 ？</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#集合" class="sidebar-link">集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#list" class="sidebar-link">List</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#map" class="sidebar-link">Map</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#enum-map" class="sidebar-link">Enum Map</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#properties" class="sidebar-link">Properties</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#queue" class="sidebar-link">Queue</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#日期与时间" class="sidebar-link">日期与时间</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#时间转化问题" class="sidebar-link">时间转化问题</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#java-时区问题" class="sidebar-link">Java 时区问题</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#本地化" class="sidebar-link">本地化</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#旧-api" class="sidebar-link">旧 API</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#新-api" class="sidebar-link">新 API</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#io" class="sidebar-link">IO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#流的重复读取" class="sidebar-link">流的重复读取</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#序列化" class="sidebar-link">序列化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#为什么要序列化" class="sidebar-link">为什么要序列化</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#serialversionuid" class="sidebar-link">serialVersionUID</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#特殊情况" class="sidebar-link">特殊情况</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#javatype" class="sidebar-link">JavaType</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#jsonproperty" class="sidebar-link">JsonProperty</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#jsoninclude" class="sidebar-link">JsonInclude</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#反射" class="sidebar-link">反射</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#class-类" class="sidebar-link">Class 类</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#访问字段" class="sidebar-link">访问字段</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#多线程" class="sidebar-link">多线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/java/java.html#多进程和多线程" class="sidebar-link">多进程和多线程</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#创建多线程" class="sidebar-link">创建多线程</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#线程常用方法" class="sidebar-link">线程常用方法</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#线程优先级" class="sidebar-link">线程优先级</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#线程状态" class="sidebar-link">线程状态</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#中断线程" class="sidebar-link">中断线程</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#守护线程" class="sidebar-link">守护线程</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#线程同步" class="sidebar-link">线程同步</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#死锁" class="sidebar-link">死锁</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#wait-和-notify" class="sidebar-link">wait 和 notify</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#线程池" class="sidebar-link">线程池</a></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#threadlocal" class="sidebar-link">ThreadLocal</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/java/java.html#讨论区" class="sidebar-link">讨论区</a></li></ul></li><li><a href="/lang/java/java_multithread.html" class="sidebar-link">Java 多线程</a></li><li><a href="/lang/java/java_8_feature.html" class="sidebar-link">Java 8 Feature</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-基础"><a href="#java-基础" class="header-anchor">#</a> Java 基础</h1> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ul><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744" target="_blank" rel="noopener noreferrer">廖雪峰 Java<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://bbs.huaweicloud.com/blogs/254865?utm_source=zhihu&amp;utm_medium=bbs-ex&amp;utm_campaign=ei&amp;utm_content=content" target="_blank" rel="noopener noreferrer">序列化 华为云社区<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="基本数据类型"><a href="#基本数据类型" class="header-anchor">#</a> 基本数据类型</h2> <ul><li>Java 的数据类型一共有 2 种，一种是基本数据类型，另一种是引用数据类型。</li> <li>Java 有 8 大基本数据类型，如果不给初始值，Java 将赋值为 <code>0</code>、<code>null</code>、 <code>false</code>。
<ul><li>只有类的成员变量才会被初始化，局部变量是必须要手动设置一个初始值的。</li></ul></li> <li>Java 中采用 Unicode 编码，它的汉字和字母都占用 2 个字节。</li></ul> <h3 id="整数型"><a href="#整数型" class="header-anchor">#</a> 整数型</h3> <ul><li><code>byte</code></li> <li><code>short</code></li> <li><code>int</code></li> <li><code>long</code></li></ul> <h3 id="浮点型"><a href="#浮点型" class="header-anchor">#</a> 浮点型</h3> <ul><li><code>float</code></li> <li><code>double</code></li></ul> <h3 id="字符型"><a href="#字符型" class="header-anchor">#</a> 字符型</h3> <ul><li><code>char</code></li></ul> <h3 id="布尔类型"><a href="#布尔类型" class="header-anchor">#</a> 布尔类型</h3> <ul><li><code>boolean</code></li></ul> <h2 id="输入输出"><a href="#输入输出" class="header-anchor">#</a> 输入输出</h2> <h3 id="占位符"><a href="#占位符" class="header-anchor">#</a> 占位符</h3> <ul><li><code>%d</code>，格式化输出整数。</li> <li><code>%s</code>，格式化字符串。</li> <li><code>%f</code>，格式化输出浮点数。</li> <li><code>%e</code>，格式化输出科学计数法表示的浮点数。</li> <li><code>%x</code>，格式化输出十六进制整数。</li></ul> <h2 id="面向对象"><a href="#面向对象" class="header-anchor">#</a> 面向对象</h2> <h3 id="向上转型"><a href="#向上转型" class="header-anchor">#</a> 向上转型</h3> <ul><li>子类可以调用覆写父类的方法，如果没有覆写，也可以调用父类的方法。</li> <li>不可以调用子类独有的方法。</li></ul> <h3 id="this"><a href="#this" class="header-anchor">#</a> this</h3> <p>this 始终指向当前实例，在类中</p> <h3 id="静态字段和静态方法"><a href="#静态字段和静态方法" class="header-anchor">#</a> 静态字段和静态方法</h3> <ul><li><p>所有实例共享一个静态字段。</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>        ┌──────────────────┐
ming ──&gt;│Person instance   │
        ├──────────────────┤
        │name = &quot;Xiao Ming&quot;│
        │age = 12          │
        │number ───────────┼──┐    ┌─────────────┐
        └──────────────────┘  │    │Person class │
                              │    ├─────────────┤
                              ├───&gt;│number = 99  │
        ┌──────────────────┐  │    └─────────────┘
hong ──&gt;│Person instance   │  │
        ├──────────────────┤  │
        │name = &quot;Xiao Hong&quot;│  │
        │age = 15          │  │
        │number ───────────┼──┘
        └──────────────────┘
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul> <h3 id="访问修饰符"><a href="#访问修饰符" class="header-anchor">#</a> 访问修饰符</h3> <ul><li><code>private</code>，当前 class 内。</li> <li><code>default</code>，即包访问权限，当前包内。</li> <li><code>protected</code>，当前包内 + 子类。</li> <li><code>public</code>，任何位置。</li></ul> <h2 id="关键字"><a href="#关键字" class="header-anchor">#</a> 关键字</h2> <h3 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h3> <p>// TODO</p> <h2 id="java-核心-常用类"><a href="#java-核心-常用类" class="header-anchor">#</a> Java 核心/常用类</h2> <h3 id="可变长参数"><a href="#可变长参数" class="header-anchor">#</a> 可变长参数</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> bsum <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> bsum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>...</code> 实质就是数组。</p> <h3 id="string-类"><a href="#string-类" class="header-anchor">#</a> String 类</h3> <p>String 类是使用 char[] 实现的。</p> <p>字符串内容是不可变的，所有的对象都是不可变的，当一个对象变化的时候，实际上是直接将它的指针指向了一个新的对象。</p> <p>从String的不变性设计可以看出，如果传入的对象有可能改变，我们需要复制而不是直接引用。</p> <p>字符串的比较：</p> <ul><li><p><code>==</code> 比较的是内存单元的存储内容，<code>equals</code> 比较的是对象的实际内容，也就是内存单元存储的指针指向的位置的内容，因为 String 是引用类型，所以使用 <code>equals</code> 进行比较内容。</p></li> <li><p>示例</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span>
<span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Q：这里明明是声明了两个变量 s1 s2，原理上 s1 s2 这两个变量存储的是两个不同的指针，分别指向两个不同的地址，这两个地址内存储的都是 hello，但是为什么这里打印出来是 true。</p> <p>A：因为 Java 在编译期会把所有的字符串当做一个对象放进常量池，所以它们的引用在这里就是一样的了。</p></li></ul> <blockquote><p>String format</p></blockquote> <ul><li><code>%d</code>，占位一个数字</li> <li><code>%2d</code>，数字占位两个空间，不足左侧补空格</li> <li><code>%.d</code>，数字保留一位有效数字</li> <li><code>%.2d</code>，数字保留两位有效数字，不足，左侧补零</li> <li><code>%02d</code>，数字长度 2，不足左侧补零</li></ul> <h3 id="stringbuilder-类"><a href="#stringbuilder-类" class="header-anchor">#</a> StringBuilder 类</h3> <ul><li>避免重复创建新字符串</li> <li>使用 StringBuilder 类，可以只开辟一块空间，操作完以后使用 toString() 将内容赋值给 s。</li></ul> <h3 id="enum-类"><a href="#enum-类" class="header-anchor">#</a> Enum 类</h3> <ul><li><code>enum</code> 类型的每个常量在 <code>JVM</code> 中只有一个唯一实例，所以可以直接用 <code>==</code> 比较：</li> <li>定义的 <code>enum</code> 类型继承自 <code>java.lang.Enum</code>，无法被继承；</li> <li>无法通过 <code>new</code> 操作符创建 <code>enum</code> 的实例</li> <li>定义的每个实例都是引用类型的唯一实例；</li></ul> <h3 id="bigdecimal-类"><a href="#bigdecimal-类" class="header-anchor">#</a> BigDecimal 类</h3> <ul><li><code>scale()</code>，显示小数部分。</li> <li><code>setScale()</code>，设置精度。</li> <li><code>RoundingMode.HALF_UP</code>，四舍五入。</li> <li><code>RoundingMode.DOWN</code>，直接截取。</li></ul> <p><strong>注意：</strong> <em>比较大小</em> 使用 <code>compareTo()</code>，不要使用 <code>equals()</code>。因为 BigDecimal 是由两部分组成的，一部分是整数部分，一部分是小数部分。</p> <h2 id="日志-异常处理"><a href="#日志-异常处理" class="header-anchor">#</a> 日志/异常处理</h2> <h3 id="捕获异常"><a href="#捕获异常" class="header-anchor">#</a> 捕获异常</h3> <ul><li>多 <code>catch</code> 语句只会执行一条，遇到一个进去以后，就直接返回了。</li> <li>子类写在前面。</li> <li><code>catch (IOException | NumberFormatException e)</code>，异常之间使用 <code>|</code> 进行并列选择。</li></ul> <h3 id="nullpointerexception"><a href="#nullpointerexception" class="header-anchor">#</a> NullPointerException</h3> <ul><li>尽量初始化不要为 <code>null</code>。</li></ul> <h3 id="断言-assert"><a href="#断言-assert" class="header-anchor">#</a> 断言 assert</h3> <ul><li>格式： <code>assert x &gt;= 0 : &quot;error message&quot;;</code></li> <li>断言失败时会抛出 <code>AssertionError</code>，导致程序结束退出。因此，断言不能用于可恢复的程序错误，只应该用于开发和测试阶段。</li></ul> <h3 id="日志"><a href="#日志" class="header-anchor">#</a> 日志</h3> <p><a href="/others/log/">日志</a>就是 <code>Logging</code>，它的目的是为了取代 <code>System.out.println()</code>。</p> <p>输出日志，而不是用 <code>System.out.println()</code>，有以下几个好处：</p> <ul><li>可以设置输出样式，避免自己每次都写 <code>&quot;ERROR: &quot; + var</code>；</li> <li>可以设置输出级别，禁止某些级别输出。例如，只输出错误日志；</li> <li>可以被重定向到文件，这样可以在程序运行结束后查看日志；</li> <li>可以按包名控制日志级别，只输出某些包打的日志；</li> <li>等等</li></ul> <h3 id="jdk-logging"><a href="#jdk-logging" class="header-anchor">#</a> JDK Logging</h3> <ul><li><p>Java 标准库内置了日志包 <code>java.util.logging</code>。</p></li> <li><p>日志级别（从严重到普通）：</p> <ul><li><code>SEVERE</code></li> <li><code>WARNING</code></li> <li><code>INFO</code>，默认级别</li> <li><code>CONFIG</code></li> <li><code>FINE</code></li> <li><code>FINER</code></li> <li><code>FINEST</code></li></ul></li> <li></li></ul> <h3 id="slf4j-和-logback"><a href="#slf4j-和-logback" class="header-anchor">#</a> SLF4J 和 Logback</h3> <ul><li><code>{}</code>，使用占位符。</li></ul> <h2 id="注解-annotation"><a href="#注解-annotation" class="header-anchor">#</a> 注解（Annotation）</h2> <h3 id="三类注解"><a href="#三类注解" class="header-anchor">#</a> 三类注解</h3> <ul><li><p>编译器使用的</p> <ul><li><code>@Override</code></li> <li><code>@SuppressWarnings</code>，告诉编译器忽略此处的代码产生的警告</li> <li>不会编译进 .class 文件</li></ul></li> <li><p>第二类，是由工具处理 .class 文件使用的注解，</p> <ul><li>比如有些工具会在加载 class 的时候，对 class 做动态修改，实现一些特殊的功能。这类注解会被编译进入 .class 文件，但加载结束后并不会存在于内存中。这类注解只被一些底层库使用，一般我们不必自己处理。</li></ul></li> <li><p>自定义</p></li></ul> <h3 id="自定义注解"><a href="#自定义注解" class="header-anchor">#</a> 自定义注解</h3> <h4 id="java-使用-interface-语法来定义注解"><a href="#java-使用-interface-语法来定义注解" class="header-anchor">#</a> Java 使用 <code>@interface</code> 语法来定义注解</h4> <ul><li><p>格式：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> <span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注解的参数类似无参数方法，可以用 <code>default</code> 设定一个默认值（强烈推荐）。</p> <p>最常用的参数应当命名为 <code>value</code>。</p> <p>如果一个参数没有设置默认值的话，使用该注解的时候会提示必须给这个参数设置一个值。</p></li></ul> <h4 id="元注解"><a href="#元注解" class="header-anchor">#</a> 元注解</h4> <ul><li><code>@target</code>，描述注解的适用范围（被修饰的注解可以用在什么地方）
<ul><li><p>参数</p> <ul><li>类或接口：<code>ElementType.TYPE</code></li> <li>字段：<code>ElementType.FIELD</code></li> <li>方法：<code>ElementType.METHOD</code></li> <li>构造方法：<code>ElementType.CONSTRUCTOR</code></li> <li>方法参数：<code>ElementType.PARAMETER</code></li></ul></li> <li><p>示例：</p> <p>例如，定义注解 <code>@Report</code> 可用在方法上，我们必须添加一个 <code>@Target(ElementType.METHOD)</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">level</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>定义注解 <code>@Report</code> 可用在方法或字段上，可以把@Target注解参数变为数组 <code>{ ElementType.METHOD, ElementType.FIELD }</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">,</span>
  <span class="token class-name">ElementType</span><span class="token punctuation">.</span>FIELD
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Report</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>实际上 <code>@Target</code> 定义的 <code>value</code> 是 <code>ElementType[]</code> 数组，只有一个元素时，可以省略数组的写法。</p></li></ul></li> <li><code>Retention</code>，描述注解保留的时间范围（声明周期）
<ul><li>3种策略
<ul><li>编译期：<code>RetentionPolicy.SOURCE</code></li> <li>class 文件：<code>RetentionPolicy.CLASS</code></li> <li>运行期：<code>RetentionPolicy.RUNTIME</code></li></ul></li></ul></li> <li><code>@Inherited</code>，使得被它修饰的注解拥有继承性（如果某个类使用了被 <code>@Inherited</code> 修饰的注解，则其子类自动拥有该注解）
<ul><li>注意：使用 <code>@Inherited</code> 定义子类是否可继承父类定义的 <code>Annotation</code>。@Inherited仅针对@Target(ElementType.TYPE)类型的 <code>annotation</code> 有效，并且仅针对class的继承，对interface的继承无效：</li></ul></li></ul> <h4 id="其它注解"><a href="#其它注解" class="header-anchor">#</a> 其它注解</h4> <ul><li><a href="../../framework/spring/Spring%20Develop#AliasFor">@AliasFor</a> - Spring 的注解</li></ul> <h2 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h2> <h3 id="使用泛型"><a href="#使用泛型" class="header-anchor">#</a> 使用泛型</h3> <ul><li>例如 <code>ArrayList</code> 使用泛型的时候，如果不加定义的话，默认传入的是 Object。</li></ul> <h3 id="编写泛型"><a href="#编写泛型" class="header-anchor">#</a> 编写泛型</h3> <ul><li>编写泛型类时，<strong>注意</strong> 不能用于静态方法。</li></ul> <h3 id="擦拭法-实现方式"><a href="#擦拭法-实现方式" class="header-anchor">#</a> 擦拭法 - 实现方式</h3> <ul><li><code>&lt;T&gt;</code> 不能是基本类型，例如 <code>int</code>，因为实际类型是 <code>Object</code>，<code>Object</code> 类型无法持有基本类型。</li> <li>无法取得带泛型的 <code>Class</code>。</li> <li>无法判断带泛型的类型。</li> <li>不能实例化 <code>T</code> 类型。</li></ul> <h3 id="extends-通配符"><a href="#extends-通配符" class="header-anchor">#</a> extends 通配符</h3> <ul><li><code>Pair&lt;? extends Number&gt;</code> 使得方法接收所有泛型类型为 <code>Number</code> 或 <code>Number</code> 子类的 <code>Pair</code> 类型。</li> <li>上面的写法可以称为上界通配符 <code>（Upper Bounds Wildcards）</code></li></ul> <h3 id="super-通配符"><a href="#super-通配符" class="header-anchor">#</a> super 通配符</h3> <ul><li><code>Pair&lt;? super Number&gt;</code></li> <li><code>Number</code> 的父类都可以。</li></ul> <h3 id="pecs-原则"><a href="#pecs-原则" class="header-anchor">#</a> PECS 原则</h3> <ul><li><code>Producer Extends Consumer Super</code></li></ul> <h3 id="无限制通配符"><a href="#无限制通配符" class="header-anchor">#</a> 无限制通配符 ？</h3> <ul><li><code>&lt;?&gt;</code></li></ul> <h2 id="集合"><a href="#集合" class="header-anchor">#</a> 集合</h2> <p><code>Collection</code>，<code>java.util</code> 包提供的，是除 Map 以外的所有集合的根接口。</p> <ul><li><code>Java</code> 集合使用统一的 <code>Iterator</code> 遍历</li></ul> <h3 id="list"><a href="#list" class="header-anchor">#</a> List</h3> <ul><li>在末尾添加一个元素：<code>boolean add(E e)</code></li> <li>在指定索引添加一个元素：<code>boolean add(int index, E e)</code></li> <li>删除指定索引的元素：<code>E remove(int index)</code></li> <li>删除某个元素：<code>boolean remove(Object e)</code></li> <li>获取指定索引的元素：<code>E get(int index)</code></li> <li>获取链表大小（包含元素的个数）：<code>int size()</code></li></ul> <h3 id="map"><a href="#map" class="header-anchor">#</a> Map</h3> <ul><li><p>作为 <code>key</code> 的对象必须正确覆写 <code>equals()</code> 方法，相等的两个 <code>key</code> 实例调用 <code>equals()</code> 必须返回 <code>true</code>；</p></li> <li><p>作为 key 的对象还必须正确覆写 <code>hashCode()</code> 方法，且 <code>hashCode()</code> 方法要严格遵循以下规范：</p></li> <li><p>如果两个对象相等，则两个对象的 <code>hashCode()</code> 必须相等；</p></li> <li><p>如果两个对象不相等，则两个对象的 <code>hashCode()</code> 尽量不要相等。</p></li></ul> <h3 id="enum-map"><a href="#enum-map" class="header-anchor">#</a> Enum Map</h3> <p>如果 <code>key</code> 是 <code>enum</code> 类型，使用 <code>Java</code> 集合库提供的 <code>EnumMap</code>，它在内部以一个非常紧凑的数组存储 <code>value</code>，并且根据 <code>enum</code> 类型的 <code>key</code> 直接定位到内部数组的索引，并不需要计算 <code>hashCode()</code>，<strong>不但效率最高，而且没有额外的空间浪费</strong>。</p> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <ul><li>Properties 文件是 <code>k-v</code>，即 <code>String - String</code>，格式的。</li> <li>Java 默认配置文件以 <code>.properties</code> 为扩展名。</li> <li>每行以 <code>key = value</code> 表示，以 <code>#</code> 开头的是注释。</li></ul> <p>用 Properties 读取配置文件示例:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> f <span class="token operator">=</span> <span class="token string">&quot;setting.properties&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileInputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> filepath <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;last_open_file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> interval <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;auto_save_interval&quot;</span><span class="token punctuation">,</span>s <span class="token number">120</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>可见，用 <code>Properties</code> 读取配置文件，一共有三步：</p> <ul><li>创建 <code>Properties</code> 实例；</li> <li>调用 <code>load()</code> 读取文件；</li> <li>调用 <code>getProperty()</code> 获取配置。</li></ul> <p>通过 <code>setProperty()</code> 修改了 <code>Properties</code> 实例，可以把配置写入文件，以便下次启动时获得最新配置。写入配置文件使用 <code>store()</code> 方法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liaoxuefeng.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;language&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\conf\\setting.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;这是写入的properties注释&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <p>常用方法：</p> <ul><li>将元素添加进 <code>Set&lt;E&gt;</code>：<code>boolean add(E e)</code></li> <li>将元素从 <code>Set&lt;E&gt;</code> 删除：<code>boolean remove(Object e)</code></li> <li>判断是否包含元素： <code>boolean contains(Object e)</code></li></ul> <h3 id="queue"><a href="#queue" class="header-anchor">#</a> Queue</h3> <p>Queue 实际上是实现了一个先进先出（FIFO：First In First Out）的有序表。它只支持：</p> <ul><li>从头部取出元素</li> <li>从尾部添加元素</li></ul> <p>常用方法：</p> <ul><li><code>int size()</code>：获取队列长度；</li> <li><code>boolean add(E)/boolean offer(E)</code>：添加元素到队尾；</li> <li><code>E remove()/E poll()</code>：获取队首元素并从队列中删除；</li> <li><code>E element()/E peek()</code>：获取队首元素但并不从队列中删除。</li></ul> <h2 id="日期与时间"><a href="#日期与时间" class="header-anchor">#</a> 日期与时间</h2> <h3 id="时间转化问题"><a href="#时间转化问题" class="header-anchor">#</a> 时间转化问题</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> DATE_FORMATTER_MD <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-M-d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> DATE_FORMATTER_MD<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>使用 <code>yyyy-M-d</code> 可以接收 <code>2021-1-1</code>、<code>2021-11-1</code>、<code>2021-01-01</code>、<code>2021-11-01</code> 等类型的值。</li> <li>使用 <code>yyyy-MM-dd</code> 不可以接收形如 <code>2021-1-1</code>、<code>2021-11-1</code>、<code>2021-11-01</code> 等类型的值。</li></ul> <h3 id="java-时区问题"><a href="#java-时区问题" class="header-anchor">#</a> Java 时区问题</h3> <ul><li><code>/etc/localtime</code> 是用来描述本机时间</li> <li><code>/etc/timezone</code> 是用来描述本机所属的时区</li></ul> <p>在 linux 中，有一些程序会自己计算时间，不会直接采用带有时区的本机时间格式，会根据 UTC 时间和本机所属的时区等计算出当前的时间。</p> <p>比如 jdk 应用，时区为 <code>Etc/UTC</code>，本机时间改为北京时间，通过 java 代码中 new 出来的时间还是 utc 时间，所以必须得修正本机的时区。</p> <h3 id="本地化"><a href="#本地化" class="header-anchor">#</a> 本地化</h3> <ul><li>在计算机中，通常使用 <code>Locale</code> 表示一个国家或地区的日期、时间、数字、货币等格式。<code>Locale</code> 由 <strong>语言_国家</strong> 的字母缩写构成，例如，<code>zh_CN</code> 表示中文 + 中国，<code>en_US</code> 表示英文 + 美国。语言使用小写，国家使用大写。</li> <li><code>System.currentTimeMillis()</code>，当前时间毫秒数，从 1970 年开始。</li></ul> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <ul><li>一套定义在 <code>java.util</code> 这个包里面，主要包括 <code>Date</code>、<code>Calendar</code> 和 <code>TimeZone</code> 这几个类；</li> <li>一套新的 <code>API</code> 是在 Java 8 引入的，定义在 <code>java.time</code> 这个包里面，主要包括 <code>LocalDateTime</code>、<code>ZonedDateTime</code>、<code>ZoneId</code> 等。</li></ul> <h3 id="旧-api"><a href="#旧-api" class="header-anchor">#</a> 旧 API</h3> <h4 id="一-date-类"><a href="#一-date-类" class="header-anchor">#</a> （一）Date 类</h4> <p><code>java.util.Date</code> 是用于表示一个日期和时间的对象，注意与 <code>java.sql.Date</code> 区分，后者用在数据库中。如果观察 <code>Date</code> 的源码，可以发现它实际上存储了一个 <code>long</code> 类型的以毫秒表示的时间戳：</p> <ul><li>不能转换时区，<code>Date</code> 总是以当前计算机系统的默认时区为基础进行输出。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取当前时间:</span>
    <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1900</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必须加上1900</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0~11，必须加上1</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1~31，不能加1</span>
    <span class="token comment">// 转换为String:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 转换为GMT时区:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 转换为本地时区:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>注意：</strong></p> <ul><li><code>getYear()</code>，返回的年份必须加上 1900。</li> <li><code>getMonth()</code>，返回的月份是 0 ~ 11，分别表示 1 ~ 12 月，所以要加 1。</li> <li><code>getDate()</code>，返回的日期范围是 1 ~ 31，又不能加 1。</li></ul> <p><code>SimpleDateFormat</code> 可以对 <code>Date</code> 进行格式化转换。它用预定义的字符串表示格式化：</p> <ul><li><code>yyyy</code>：年</li> <li><code>MM</code>：月</li> <li><code>dd</code>: 日</li> <li><code>HH</code>: 小时</li> <li><code>mm</code>: 分钟</li> <li><code>ss</code>: 秒</li></ul> <p>示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取当前时间:</span>
    <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="二-calendar-类"><a href="#二-calendar-类" class="header-anchor">#</a> （二）Calendar 类</h4> <p><code>Calendar</code> 可以用于获取并设置年、月、日、时、分、秒，它和 <code>Date</code> 比，主要<strong>多了一个可以做简单的日期和时间运算的功能</strong>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取当前时间:</span>
    <span class="token class-name">Calendar</span> c <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> y <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> d <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_WEEK<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> hh <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>HOUR_OF_DAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> mm <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MINUTE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ss <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ms <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MILLISECOND<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> m <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> hh <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> mm <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> ss <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>注意：</strong></p> <ul><li>返回的月份是 0 ~ 11，要加 1。</li> <li>返回的星期要特别注意，1 ~ 7 分别表示周日，周一，……，周六。</li></ul> <p><code>Calendar</code> 只有一种方式获取，即 <code>Calendar.getInstance()</code>，而且一获取到就是当前时间。如果我们想给它设置成特定的一个日期和时间，就必须先清除所有字段：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前时间:</span>
    <span class="token class-name">Calendar</span> c <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 清除所有:</span>
    c<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置2019年:</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">,</span> <span class="token number">2019</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置9月:注意8表示9月:</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置2日:</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置时间:</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>HOUR_OF_DAY<span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MINUTE<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>SECOND<span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2019-09-02 21:22:23</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>注意：</strong></p> <ul><li>利用 <code>Calendar.getTime()</code> 可以将一个 <code>Calendar</code> 对象转换成 <code>Date</code> 对象，然后就可以用 <code>SimpleDateFormat</code> 进行格式化了。</li></ul> <h4 id="三-timezone-类"><a href="#三-timezone-类" class="header-anchor">#</a> （三）TimeZone 类</h4> <p><code>Calendar</code> 和 <code>Date</code> 相比，它提供了时区转换的功能。时区用 <code>TimeZone</code> 对象表示：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TimeZone</span> tzDefault <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当前时区</span>
    <span class="token class-name">TimeZone</span> tzGMT9 <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;GMT+09:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// GMT+9:00时区</span>
    <span class="token class-name">TimeZone</span> tzNY <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;America/New_York&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 纽约时区</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tzDefault<span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Asia/Shanghai</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tzGMT9<span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// GMT+09:00</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tzNY<span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// America/New_York</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>时区的唯一标识是以字符串表示的 ID，我们获取指定 <code>TimeZone</code> 对象也是以这个 ID 为参数获取。</li> <li><code>GMT+09:00</code>、<code>Asia/Shanghai</code> 都是有效的时区 ID。</li> <li>要列出系统支持的所有 ID，请使用 <code>TimeZone.getAvailableIDs()</code>。</li></ul> <p>有了时区，我们就可以对指定时间进行转换。例如，下面的例子演示了如何将北京时间 <code>2019-11-20 8:15:00</code> 转换为纽约时间：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前时间:</span>
    <span class="token class-name">Calendar</span> c <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 清除所有:</span>
    c<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置为北京时区:</span>
    c<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置年月日时分秒:</span>
    c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token comment">/* 11月 */</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 加5天并减去2小时:</span>
      c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>HOUR_OF_DAY<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 显示时间:</span>
    <span class="token keyword">var</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sdf<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;America/New_York&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2019-07-24 18:15:00</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>可见，利用 <code>Calendar</code> 进行时区转换的步骤是：</p> <ul><li>清除所有字段；</li> <li>设定指定时区；</li> <li>设定日期和时间；</li> <li>创建 <code>SimpleDateFormat</code> 并设定目标时区；</li> <li>格式化获取的Date对象（注意Date对象无时区信息，时区信息存储在 <code>SimpleDateFormat</code> 中）。</li></ul> <p>因此，本质上时区转换只能通过 <code>SimpleDateFormat</code> 在显示的时候完成。</p> <h3 id="新-api"><a href="#新-api" class="header-anchor">#</a> 新 API</h3> <p>从 Java 8 开始，<code>java.time</code> 包提供了新的日期和时间 API，主要涉及的类型有：</p> <ul><li>本地日期和时间：<code>LocalDateTime</code>，<code>LocalDate</code>，<code>LocalTime</code>；</li> <li>带时区的日期和时间：<code>ZonedDateTime</code>；</li> <li>时刻：<code>Instant</code>；</li> <li>时区：<code>ZoneId</code>，<code>ZoneOffset</code>；</li> <li>时间间隔：<code>Duration</code>。</li> <li>以及一套新的用于取代 <code>SimpleDateFormat</code> 的格式化类型 <code>DateTimeFormatter</code>。</li></ul> <p>和旧的 API 相比，新 API 严格区分了时刻、本地日期、本地时间和带时区的日期时间，并且，对日期和时间进行运算更加方便。</p> <p>此外，新 API 修正了旧 API 不合理的常量设计：</p> <ul><li><code>Month</code> 的范围用 1 ~ 12 表示 1 月到 12 月；</li> <li><code>Week</code> 的范围用 1 ~ 7 表示周一到周日。</li></ul> <p>最后，新 API 的类型几乎全部是不变类型（和 <code>String</code> 类似），可以放心使用不必担心被修改。</p> <p><img src="/assets/img/date.c0a91920.png" alt="new date api"></p> <h4 id="一-localdatetime-类"><a href="#一-localdatetime-类" class="header-anchor">#</a> （一）LocalDateTime 类</h4> <ul><li>now 获取时间</li> <li>toLocalDate 转换格式</li> <li>of 指定时间</li> <li>withXxx() 调整时间</li> <li>使用 DateTimeFormatter 进行格式的转换
<ul><li><p>示例</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 自定义格式化:</span>
<span class="token class-name">DateTimeFormatter</span> dtf <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy/MM/dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 用自定义格式解析:</span>
<span class="token class-name">LocalDateTime</span> dt2 <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;2019/11/30 15:16:17&quot;</span><span class="token punctuation">,</span> dtf<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <h4 id="二-zoneddatetime-类"><a href="#二-zoneddatetime-类" class="header-anchor">#</a> （二）ZonedDateTime 类</h4> <p>可以简单地把 <code>ZonedDateTime</code> 理解成 <code>LocalDateTime</code> 加 <code>ZoneId</code>。<code>ZoneId</code> 是 <code>java.time</code> 引入的新的时区类，注意和旧的 <code>java.util.TimeZone</code> 区别。</p> <ul><li><code>toInstant</code>、<code>toEpochSecond</code> 这两个方法会转换成 0 时区的对应时间。</li> <li><code>toLocalDataTime</code> 不会转时区，会直接丢弃时区信息。</li></ul> <h4 id="三-datetimeformatter-类"><a href="#三-datetimeformatter-类" class="header-anchor">#</a> （三）DateTimeFormatter 类</h4> <h4 id="四-instant-类"><a href="#四-instant-类" class="header-anchor">#</a> （四）Instant 类</h4> <p>Instant 时间不能设置时区，但是他是有时区的（only 0 时区）。</p> <h2 id="io"><a href="#io" class="header-anchor">#</a> IO</h2> <ul><li>flush()，强制刷新</li> <li>Class 对象的 <code>getResourceAsStream()</code> 可以从 <code>classpath</code> 中读取指定资源；</li></ul> <h3 id="流的重复读取"><a href="#流的重复读取" class="header-anchor">#</a> 流的重复读取</h3> <p>// TODO</p> <h2 id="序列化"><a href="#序列化" class="header-anchor">#</a> 序列化</h2> <h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p>序列化是指把一个 <code>Java</code> 对象变成二进制内容，本质上就是一个 <code>byte[]</code> 数组。</p> <p>为什么要把 Java 对象序列化呢？因为序列化后可以把 <code>byte[]</code> 保存到文件中，或者把 <code>byte[]</code> 通过网络传输到远程，这样，就相当于把 Java 对象存储到文件或者通过网络传输出去了。</p> <p>有序列化，就有反序列化，即把一个二进制内容（也就是 <code>byte[]</code> 数组）变回 Java 对象。有了反序列化，保存到文件中的 <code>byte[]</code> 数组又可以“变回”Java 对象，或者从网络上读取 <code>byte[]</code> 并把它“变回” Java 对象。</p> <h3 id="为什么要序列化"><a href="#为什么要序列化" class="header-anchor">#</a> 为什么要序列化</h3> <p>无论什么编程语言，其底层涉及 IO 操作的部分还是由操作系统其帮其完成的，而底层 IO 操作都是以字节流的方式进行的，
所以写操作都涉及将编程语言数据类型转换为字节流，而读操作则又涉及将字节流转化为编程语言类型的特定数据类型。</p> <h3 id="serialversionuid"><a href="#serialversionuid" class="header-anchor">#</a> serialVersionUID</h3> <p>实现了 <code>Serializable</code> 接口的类，都需要指定一个 serialVersionUID。</p> <p>例子：比如一个 Student 类的实例被实例化为一个 student.txt 文件（这个文件内会有这个实例的序列化 ID），
在反序列化的时候，会验证 txt 文件中的序列化 ID 是否和 Student 类中的 ID 一致，如果不一致，则序列化失败。</p> <p>如果你不显示的声明一个 serialVersionUID，那么 Java 运行时环境会根据类的信息，自动生成个一个（如果后来你改变了类，比如改变了字段，这时候这个自动生成的 ID 就会跟着变化）。
一个实现了 <code>Serializable</code> 接口的类，都应该显示声明一个 serialVersionUID，这样的话，你的类的一个实例序列化成了一个文件以后，你改变了这个类的结构或信息（类改变以后，自动生成的 ID 会自动变化），这时反序列化的时候，就会反序列化失败，那么如果你显示的声明一个 ID，那么即使后来你改变了你的类结构，反序列化依旧可以成功，因为他们的 ID 没有变。</p> <h3 id="特殊情况"><a href="#特殊情况" class="header-anchor">#</a> 特殊情况</h3> <ul><li>凡是被 <code>static</code> 修饰的字段是不会被序列化的</li> <li>凡是被 <code>transient</code> 修饰符修饰的字段也是不会被序列化的</li></ul> <p>对于第一点，因为序列化保存的是对象的状态而非类的状态，所以会忽略 <code>static</code> 静态域也是理所应当的。</p> <p>对于第二点，就需要了解一下 <code>transient</code> 修饰符的作用了。</p> <p>如果在序列化某个类的对象时，就是不希望某个字段被序列化（比如这个字段存放的是隐私值，如：密码等），那这时就可以用 transient 修饰符来修饰该字段。</p> <p>比如 <code>private transient String password</code>，被 transient 修饰的变量不会被序列化，它的值会被序列化为 null，反序列化以后得到的也是 null。</p> <h3 id="javatype"><a href="#javatype" class="header-anchor">#</a> JavaType</h3> <p>使用 Javatype 实现带有泛型的序列化。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">JavaType</span> javaType <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">getTypeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">constructParametricType</span><span class="token punctuation">(</span>responseType<span class="token punctuation">,</span> itemType<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此处两个是 class</span>
response <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>responseBodyString<span class="token punctuation">,</span> javaType<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="jsonproperty"><a href="#jsonproperty" class="header-anchor">#</a> JsonProperty</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;Key&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> key<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="jsoninclude"><a href="#jsoninclude" class="header-anchor">#</a> JsonInclude</h3> <p>使用 <code>@JsonInclude</code> 可以指定对象或者是指定变量的序列化方式。</p> <h2 id="反射"><a href="#反射" class="header-anchor">#</a> 反射</h2> <p>通过 <code>Class</code> 实例获取 <code>class</code> 信息的方法称为反射（<code>Reflection</code>）。</p> <h3 id="class-类"><a href="#class-类" class="header-anchor">#</a> Class 类</h3> <ul><li><p>class 是由 JVM 在执行过程中动态加载的。JVM 在第一次读取到一种 class 类型时，将其加载进内存（method area）。</p></li> <li><p>获取一个 class 的 Class 实例有三个方法：</p> <ul><li><p>直接通过一个 class 的静态变量 class 获取：</p> <ul><li><code>Class cls = String.class;</code></li></ul></li> <li><p>通过该实例变量提供的 <code>getClass()</code> 方法获取：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span> cls <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>如果知道一个 class 的完整类名，可以通过静态方法 <code>Class.forName()</code> 获取：</p> <ul><li><code>Class cls = Class.forName(&quot;java.lang.String&quot;);</code></li></ul></li></ul></li></ul> <p>PS：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Start:
  -&gt; .java 文件
  -&gt; .class 文件
  -&gt; （.class 文件）被 JVM 加载进内存（method area/static area）
  -&gt; JVM 第一次读取到一种 class 时，为它创建一个名为[文件名]的 Class 类型的 class，这个 class 包含了这个 class 文件的所有信息，
        并且将这个 class 文件放进方法区，然后这个 xxxclass 作为这个类的各种数据的访问入口。
  -&gt; 在代码中通过获取一个类的 Class 实例 xxxclass，然后从这个 class 文件中读取这个类的信息的方式叫做反射
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>注意：</strong> 这里的 Class 本身也是一种 class 文件（Class.class 文件），只不过它的构造方法是 private，它只能由 JVM 创建。这个 Class 定义了一个类中应该有的所有信息变量，所以它可以将一个 class 文件的所有信息都加载进来，并在代码中使用。</p> <h3 id="访问字段"><a href="#访问字段" class="header-anchor">#</a> 访问字段</h3> <p>通过 <code>Class</code> 实例获取字段信息。</p> <ul><li><code>Field getField(name)</code>：根据字段名获取某个 <code>public</code> 的 <code>field</code> （包括父类）</li> <li><code>Field getDeclaredField(name)</code>：根据字段名获取当前类的某个 <code>field</code> （不包括父类）</li> <li><code>Field[] getFields()</code>：获取所有 <code>public</code> 的 <code>field</code> （包括父类）</li> <li><code>Field[] getDeclaredFields()</code>：获取当前类的所有 <code>field</code> （不包括父类）</li></ul> <h2 id="多线程"><a href="#多线程" class="header-anchor">#</a> 多线程</h2> <h3 id="多进程和多线程"><a href="#多进程和多线程" class="header-anchor">#</a> 多进程和多线程</h3> <p>多进程缺点：</p> <ul><li>创建进程比创建线程开销大，尤其是在 Windows 系统上；</li> <li>进程间通信比线程间通信要慢，因为线程间通信就是读写同一个变量，速度很快。</li></ul> <p>多线程优点：</p> <ul><li>多进程稳定性比多线程高
<ul><li>多进程的情况下，一个进程崩溃不会影响其他进程。</li> <li>多线程的情况下，任何一个线程崩溃会直接导致整个进程崩溃。</li></ul></li></ul> <h3 id="创建多线程"><a href="#创建多线程" class="header-anchor">#</a> 创建多线程</h3> <blockquote><p>Java 创建多线程主要有 2 类，第一类是没有返回值的，也是最常见的方式。还有一种是有返回值的创建方式。</p></blockquote> <p>没有返回值的有 2 种方法：</p> <ol><li>继承 <code>Tread</code> 类，然后覆写 <code>run</code> 方法，最后使用 <code>start</code> 方法执行。</li> <li>实现 <code>Runable</code> 接口，然后使用 <code>start</code> 方法进行执行。</li></ol> <p>建议使用第二种方法，因为类的继承为单继承，第 2 种可以避免不能继承其他的类。</p> <p>示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 第一种,继承 Tread 类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启动新线程</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start new thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 第二种,实现 Runable 接口</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启动新线程</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start new thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>需要返回值的创建方式：通过创建 <code>Callable</code> 接口和 <code>Future</code> 接口的方式来创建线程。</p> <p>从上面两个例子我们可以看到，<code>Runable</code> 的方式执行的代码逻辑是没有返回值的，这样我们不能获取多线程方法的返回值。如果我们想要获取多线程执行结果就需要使用 <code>Callable</code> 结合 <code>Future</code> 的方式实现。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Callable 和 Runable 是没有区别的，只是一个有返回值，一个不支持返回值</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

    <span class="token comment">// myCallable 是要执行的任务</span>
    <span class="token class-name">MyCallable</span> myCallable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// futureTask 是用来管理多线程运行的结果的</span>
    <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>myCallable<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="线程常用方法"><a href="#线程常用方法" class="header-anchor">#</a> 线程常用方法</h3> <ul><li><code>setDeamon</code></li> <li><code>yield</code></li> <li><code>join</code></li></ul> <h3 id="线程优先级"><a href="#线程优先级" class="header-anchor">#</a> 线程优先级</h3> <ul><li><code>Thread.setPriority(int n)</code>，1 ~ 10, 默认值 5，1 为最低。</li> <li>优先级高的只意味着更频繁的 CPU 调度，而不是说优先级高的就要比优先级低的早执行。</li></ul> <h3 id="线程状态"><a href="#线程状态" class="header-anchor">#</a> 线程状态</h3> <blockquote><p>下图中，运行状态不属于 Java 定义的线程状态中的一种。运行状态表示已经在 CPU 中运行，这时候的状态并不是 Java 本身关注的。</p></blockquote> <p><img src="/assets/img/thread-status.9dc96c5f.jpg" alt="线程状态"></p> <p>在 Java 程序中，一个线程对象只能调用一次 <code>start()</code> 方法启动新线程，并在新线程中执行 <code>run()</code> 方法。一旦 <code>run()</code> 方法执行完毕，线程就结束了。因此，Java 线程的状态有以下几种：</p> <ul><li><code>New</code>，新创建的线程，尚未执行；</li> <li><code>Runnable</code>，运行中的线程，正在抢占 CPU 中，然后去执行 <code>run()</code> 方法的 Java 代码；</li> <li><code>Blocked</code>，运行中的线程，因为某些操作被阻塞而挂起；</li> <li><code>Waiting</code>，运行中的线程，因为某些操作在等待中；</li> <li><code>Timed Waiting</code>，运行中的线程，因为执行 <code>sleep()</code> 方法正在计时等待；</li> <li><code>Terminated</code>，线程已终止，因为 <code>run()</code> 方法执行完毕。</li></ul> <p>线程终止的原因有：</p> <ul><li>线程正常终止：<code>run()</code> 方法执行到 <code>return</code> 语句返回；</li> <li>线程意外终止：<code>run()</code> 方法因为未捕获的异常导致线程终止；</li> <li>对某个线程的 <code>Thread</code> 实例调用 <code>stop()</code> 方法强制终止（强烈不推荐使用）。</li> <li><code>join()</code> 可以使得当前线程的方法优先执行。</li></ul> <h3 id="中断线程"><a href="#中断线程" class="header-anchor">#</a> 中断线程</h3> <ul><li>使用 <code>interrupt()</code> 中断线程，使用 <code>isInterrupted()</code> 检测是否中断;</li></ul> <p><code>volatile</code> 关键字的目的是告诉虚拟机：</p> <ul><li>每次访问变量时，总是获取主内存的最新值；</li> <li>每次修改变量后，立刻回写到主内存。</li></ul> <h3 id="守护线程"><a href="#守护线程" class="header-anchor">#</a> 守护线程</h3> <blockquote><p>直白讲就是，在线程 A 里创建一个守护线程 B，如果线程 A 结束了，无论线程 B 当前状态如何，B 都会结束。因为 B 是 A 的守护线程，当失去了被守护者 A 的时候，线程 B 也就没有存在的必要了。</p></blockquote> <p><code>Daemon Thread</code>，守护线程是指为其他线程服务的线程。在 JVM 中，所有非守护线程都执行完毕后，无论有没有守护线程，虚拟机都会自动退出。因此，JVM 退出时，不必关心守护线程是否已结束。</p> <p>创建方式: 在调用 <code>start()</code> 方法前，调用 <code>setDaemon(true)</code> 把该线程标记为守护线程。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：</p> <ul><li>在 Daemon 线程中产生的新线程也是 Daemon 的。</li> <li>守护线程不能持有任何需要关闭的资源，例如打开文件等，因为虚拟机退出时，守护线程没有任何机会来关闭文件，这会导致数据丢失。</li></ul> <h3 id="线程同步"><a href="#线程同步" class="header-anchor">#</a> 线程同步</h3> <p>加锁与解锁之间的代码块--临界区</p> <h4 id="加锁"><a href="#加锁" class="header-anchor">#</a> 加锁</h4> <p><code>synchronized</code> 锁是可重入锁；</p> <p>我们来概括一下如何使用 <code>synchronized</code>：</p> <ul><li>找出修改共享变量的线程代码块；</li> <li>选择一个共享实例作为锁；</li> <li>使用 <code>synchronized(lockObject) { ... }</code>。</li></ul> <p>不需要 <code>synchronized</code> 的操作
JVM 规范定义了几种原子操作：</p> <ul><li>基本类型（<code>long</code> 和 <code>double</code> 除外）赋值，例如：<code>int n = m；</code></li> <li>引用类型赋值，例如：<code>List&lt;String&gt; list = anotherList</code>。</li></ul> <h3 id="死锁"><a href="#死锁" class="header-anchor">#</a> 死锁</h3> <p>如何避免死锁呢？</p> <ul><li>线程获取锁的顺序要一致。</li></ul> <h3 id="wait-和-notify"><a href="#wait-和-notify" class="header-anchor">#</a> wait 和 notify</h3> <ul><li><code>wait()</code> 方法必须在当前获取的锁对象上调用，这里获取的是 <code>this</code> 锁，因此调用 <code>this.wait()</code>。</li> <li><code>wait()</code> 方法调用时，会释放线程获得的锁，<code>wait()</code> 方法返回后，线程又会重新试图获得锁。</li> <li>如何让等待的线程被重新唤醒，然后从 <code>wait()</code> 方法返回？
<ul><li>答案是在相同的锁对象上调用 <code>notify()</code> 方法。</li></ul></li></ul> <h3 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h3> <p><code>ExecutorService</code> 接口表示线程池</p> <p>线程池的初始化</p> <p><code>ExecutorService</code> 只是接口，Java 标准库提供的几个常用实现类有：</p> <ul><li><code>FixedThreadPool</code>：线程数固定的线程池；</li> <li><code>CachedThreadPool</code>：线程数根据任务动态调整的线程池；</li> <li><code>SingleThreadExecutor</code>：仅单线程执行的线程池。</li></ul> <p>创建这些线程池的方法都被封装到 <code>Executors</code> 这个类中。</p> <p>线程池的使用</p> <ul><li>使用 <code>submit()</code> 方法提交任务，提交的任务是已经实现了 Runnable 接口的类。</li></ul> <p>线程池的关闭</p> <ul><li>使用 <code>shutdown()</code>方法关闭线程池
<ul><li>它会等待正在执行的任务先完成，然后再关闭。</li></ul></li> <li><code>shutdownNow()</code> 会立刻停止正在执行的任务</li> <li><code>awaitTermination()</code> 则会等待指定的时间让线程池关闭。</li></ul> <p>示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;第&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;个任务&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
es<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;启动了&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;结束&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="threadlocal"><a href="#threadlocal" class="header-anchor">#</a> ThreadLocal</h3> <p>ThreadLocal 类型变量实现变量为线程私有，原理是使用了 ThreadLocalMap。</p> <p>使用时，将 ThreadLocal 对象作为 Map 的 key，将要存储的值作为 value 存起来，这样每个线程访问的都是当前线程的值了，也就不再存在线程安全问题。</p> <p><img src="/assets/img/thread-local.46bcd94c.png" alt="ThreadLocal 原理"></p> <h4 id="java-四种引用"><a href="#java-四种引用" class="header-anchor">#</a> Java 四种引用</h4> <ul><li>强引用
<ul><li>只要有指针指向了这个对象，那么这个对象永远都不会被回收。例如 <code>User user = new User();</code></li></ul></li> <li>软引用
<ul><li>还有用处，JVM 会在内存溢出时清理这部分。例如：缓存</li></ul></li> <li>弱引用
<ul><li>引用关系弱于软引用，不管内存是否够用，下次 GC 一定会回收</li></ul></li> <li>虚引用
<ul><li>不会影响对象的回收，唯一作用是对象被回收时会受到一个系统通知</li></ul></li></ul> <h4 id="内存泄漏问题"><a href="#内存泄漏问题" class="header-anchor">#</a> 内存泄漏问题</h4> <p>首先说一个名词 OOM，即 Out Of Memory，内存泄露、内存溢出。</p> <p>ThreadLocal 中的 key 是弱引用，value 是强引用。key 是每个 Thread 中的 TreadLocal 对象本身（如果没有强引用指向它，它就会被 GC 回收）：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span> <span class="token keyword">extends</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ThreadLocal</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">/** The value associated with this ThreadLocal. */</span>
    <span class="token class-name">Object</span> value<span class="token punctuation">;</span>

    <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> k<span class="token punctuation">,</span> <span class="token class-name">Object</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 看这里的 super()，表示 key 是一个弱引用。</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
        value <span class="token operator">=</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>而 value 被 Entry 强引用不会被回收，具体应该是 <code>thread ref -&gt; thread -&gt; threadLocals -&gt; entry -&gt; value</code>，这时导致 value 成为了一个无法访问也不能被回收的对象，这就造成了内存泄露。</p> <p>如果当前线程很快结束的话，最终 value 也会被回收，但是由于线程频繁的创建和销毁会占用大量资源，所以一般会使用线程池，那么线程就可能会很长时间不被销毁，那么 value 也就一直不会被回收。</p> <h5 id="解决方法"><a href="#解决方法" class="header-anchor">#</a> 解决方法</h5> <ul><li>使用 static final，避免重复创建销毁 ThreadLocal 对象。</li> <li>使用 remove() 方法，手动清除 ThreadLocal 对象。</li></ul> <p>其实 ThreadLocal 对象的 <code>get() / set() / remove()</code> 方法的具体实现中，都做了进一步的处理，进一步的避免了 OOM 的情况。</p> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h4> <p><img src="/assets/img/threadlocal-example.08147671.png" alt="示例"></p> <p>ThreadLocal 可以理解为是一个可以操作 Thread 上的那个 map 的工具类而已，因为每个线程拿到的 map 都是当前线程私有的。不要去想那个线程变量（<code>REQUEST_ID</code>）就一个，它的确就一个，它的作用是指定要拿哪个值，通过它操作的值（值所在的 map）存在于 Thread 上，这个线程变量只是个媒介而已。</p> <h2 id="讨论区"><a href="#讨论区" class="header-anchor">#</a> 讨论区</h2> <blockquote><p>由于评论过多会影响页面最下方的导航，故将评论区做默认折叠处理。</p></blockquote> <details class="custom-block details"><summary>点击查看评论区内容，渴望您的宝贵建议~</summary> <!----></details></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/22/2023, 4:23:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lang/java/" class="prev router-link-active">
        Java 总览
      </a></span> <span class="next"><a href="/lang/java/java_multithread.html">
        Java 多线程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5780eb53.js" defer></script><script src="/assets/js/2.e1f1d232.js" defer></script><script src="/assets/js/10.921c058c.js" defer></script>
  </body>
</html>
