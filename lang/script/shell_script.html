<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell 脚本 | Wow56 个人知识库</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/flaglogo.png">
    <link rel="manifest" href="/flaglogo.png">
    <link rel="apple-touch-icon" href="/flaglogo.png">
    <meta name="description" content="Never stop learning">
    
    <link rel="preload" href="/assets/css/0.styles.b25eaea0.css" as="style"><link rel="preload" href="/assets/js/app.5780eb53.js" as="script"><link rel="preload" href="/assets/js/2.e1f1d232.js" as="script"><link rel="preload" href="/assets/js/119.94c060f2.js" as="script"><link rel="prefetch" href="/assets/js/10.921c058c.js"><link rel="prefetch" href="/assets/js/100.678efb16.js"><link rel="prefetch" href="/assets/js/101.6fd33b9c.js"><link rel="prefetch" href="/assets/js/102.dfa6e733.js"><link rel="prefetch" href="/assets/js/103.4b74461a.js"><link rel="prefetch" href="/assets/js/104.603354fe.js"><link rel="prefetch" href="/assets/js/105.9da719c4.js"><link rel="prefetch" href="/assets/js/106.6aa24318.js"><link rel="prefetch" href="/assets/js/107.5ea57319.js"><link rel="prefetch" href="/assets/js/108.37ded6f2.js"><link rel="prefetch" href="/assets/js/109.adc40804.js"><link rel="prefetch" href="/assets/js/11.00deed7e.js"><link rel="prefetch" href="/assets/js/110.f1791c33.js"><link rel="prefetch" href="/assets/js/111.bff2cea6.js"><link rel="prefetch" href="/assets/js/112.4eb7e8b1.js"><link rel="prefetch" href="/assets/js/113.4ca0e39f.js"><link rel="prefetch" href="/assets/js/114.03d070d7.js"><link rel="prefetch" href="/assets/js/115.a007d470.js"><link rel="prefetch" href="/assets/js/116.027c798b.js"><link rel="prefetch" href="/assets/js/117.6eaa95a7.js"><link rel="prefetch" href="/assets/js/118.3468f2af.js"><link rel="prefetch" href="/assets/js/12.e7e7feff.js"><link rel="prefetch" href="/assets/js/120.2639e06f.js"><link rel="prefetch" href="/assets/js/121.1ee7e578.js"><link rel="prefetch" href="/assets/js/122.d1f0654b.js"><link rel="prefetch" href="/assets/js/123.52d57be3.js"><link rel="prefetch" href="/assets/js/124.d515f509.js"><link rel="prefetch" href="/assets/js/125.c783db82.js"><link rel="prefetch" href="/assets/js/126.08d41fac.js"><link rel="prefetch" href="/assets/js/127.5ab5b3c5.js"><link rel="prefetch" href="/assets/js/13.c0e1c39d.js"><link rel="prefetch" href="/assets/js/14.4be8face.js"><link rel="prefetch" href="/assets/js/15.b235fe5f.js"><link rel="prefetch" href="/assets/js/16.a62bd2ec.js"><link rel="prefetch" href="/assets/js/17.d3fa5b5a.js"><link rel="prefetch" href="/assets/js/18.04056df6.js"><link rel="prefetch" href="/assets/js/19.e0daa831.js"><link rel="prefetch" href="/assets/js/20.aae5efb2.js"><link rel="prefetch" href="/assets/js/21.51bfd139.js"><link rel="prefetch" href="/assets/js/22.d92aecaf.js"><link rel="prefetch" href="/assets/js/23.fd2079a6.js"><link rel="prefetch" href="/assets/js/24.7cadaa30.js"><link rel="prefetch" href="/assets/js/25.38c9c1a4.js"><link rel="prefetch" href="/assets/js/26.1c8277a8.js"><link rel="prefetch" href="/assets/js/27.1e495f81.js"><link rel="prefetch" href="/assets/js/28.7ef5af76.js"><link rel="prefetch" href="/assets/js/29.9031cb92.js"><link rel="prefetch" href="/assets/js/3.93a08b3b.js"><link rel="prefetch" href="/assets/js/30.1b61bbf8.js"><link rel="prefetch" href="/assets/js/31.f8cbfd44.js"><link rel="prefetch" href="/assets/js/32.0632cb94.js"><link rel="prefetch" href="/assets/js/33.a46a0b3d.js"><link rel="prefetch" href="/assets/js/34.fba531e6.js"><link rel="prefetch" href="/assets/js/35.db1fd348.js"><link rel="prefetch" href="/assets/js/36.9e6108c6.js"><link rel="prefetch" href="/assets/js/37.35fca0f6.js"><link rel="prefetch" href="/assets/js/38.ac22df93.js"><link rel="prefetch" href="/assets/js/39.7cce2902.js"><link rel="prefetch" href="/assets/js/4.e30be376.js"><link rel="prefetch" href="/assets/js/40.3560e650.js"><link rel="prefetch" href="/assets/js/41.d4632345.js"><link rel="prefetch" href="/assets/js/42.adce46c5.js"><link rel="prefetch" href="/assets/js/43.d2ff2a7e.js"><link rel="prefetch" href="/assets/js/44.d3f6ac6e.js"><link rel="prefetch" href="/assets/js/45.1e3b049e.js"><link rel="prefetch" href="/assets/js/46.917a9a8a.js"><link rel="prefetch" href="/assets/js/47.5a73f25d.js"><link rel="prefetch" href="/assets/js/48.3b970b0a.js"><link rel="prefetch" href="/assets/js/49.dc6fd937.js"><link rel="prefetch" href="/assets/js/5.9411f932.js"><link rel="prefetch" href="/assets/js/50.109fdeb5.js"><link rel="prefetch" href="/assets/js/51.5ec4fc4b.js"><link rel="prefetch" href="/assets/js/52.0c03ff96.js"><link rel="prefetch" href="/assets/js/53.e91a6f48.js"><link rel="prefetch" href="/assets/js/54.7f886adb.js"><link rel="prefetch" href="/assets/js/55.2747b24f.js"><link rel="prefetch" href="/assets/js/56.a78db785.js"><link rel="prefetch" href="/assets/js/57.517d420c.js"><link rel="prefetch" href="/assets/js/58.0429f17c.js"><link rel="prefetch" href="/assets/js/59.9d68455f.js"><link rel="prefetch" href="/assets/js/6.3e126bb5.js"><link rel="prefetch" href="/assets/js/60.7cc000dc.js"><link rel="prefetch" href="/assets/js/61.8eaec827.js"><link rel="prefetch" href="/assets/js/62.9eb7a7b3.js"><link rel="prefetch" href="/assets/js/63.35e36177.js"><link rel="prefetch" href="/assets/js/64.6282d042.js"><link rel="prefetch" href="/assets/js/65.58ed4699.js"><link rel="prefetch" href="/assets/js/66.971cb02f.js"><link rel="prefetch" href="/assets/js/67.0a93b287.js"><link rel="prefetch" href="/assets/js/68.a7b05e3b.js"><link rel="prefetch" href="/assets/js/69.6572830f.js"><link rel="prefetch" href="/assets/js/7.de70efc4.js"><link rel="prefetch" href="/assets/js/70.168da9d9.js"><link rel="prefetch" href="/assets/js/71.d57d693b.js"><link rel="prefetch" href="/assets/js/72.91fa5cd3.js"><link rel="prefetch" href="/assets/js/73.7de2d2b8.js"><link rel="prefetch" href="/assets/js/74.acd298e4.js"><link rel="prefetch" href="/assets/js/75.62e67874.js"><link rel="prefetch" href="/assets/js/76.f2b96539.js"><link rel="prefetch" href="/assets/js/77.4255efc8.js"><link rel="prefetch" href="/assets/js/78.114300ba.js"><link rel="prefetch" href="/assets/js/79.d14a2756.js"><link rel="prefetch" href="/assets/js/8.1ec756ec.js"><link rel="prefetch" href="/assets/js/80.3fd73e00.js"><link rel="prefetch" href="/assets/js/81.71ebdbf4.js"><link rel="prefetch" href="/assets/js/82.0a5b5bb1.js"><link rel="prefetch" href="/assets/js/83.a23907a9.js"><link rel="prefetch" href="/assets/js/84.8c2bc996.js"><link rel="prefetch" href="/assets/js/85.ed1b9552.js"><link rel="prefetch" href="/assets/js/86.49d44a86.js"><link rel="prefetch" href="/assets/js/87.33153d90.js"><link rel="prefetch" href="/assets/js/88.a021dc21.js"><link rel="prefetch" href="/assets/js/89.b80b10c6.js"><link rel="prefetch" href="/assets/js/9.24d5e519.js"><link rel="prefetch" href="/assets/js/90.a059a06c.js"><link rel="prefetch" href="/assets/js/91.0c2e07a8.js"><link rel="prefetch" href="/assets/js/92.0460267f.js"><link rel="prefetch" href="/assets/js/93.630cc9b9.js"><link rel="prefetch" href="/assets/js/94.64e96711.js"><link rel="prefetch" href="/assets/js/95.cc7ee0e1.js"><link rel="prefetch" href="/assets/js/96.43f96f85.js"><link rel="prefetch" href="/assets/js/97.73dc1af0.js"><link rel="prefetch" href="/assets/js/98.10b4ffee.js"><link rel="prefetch" href="/assets/js/99.e6bfc1cd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b25eaea0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/flaglogo.png" alt="Wow56 个人知识库" class="logo"> <span class="site-name can-hide">Wow56 个人知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言/语法" class="dropdown-title"><span class="title">语言/语法</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言/语法" class="mobile-dropdown-title"><span class="title">语言/语法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lang/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/lang/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/lang/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lang/js/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/lang/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lang/regex/" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/lang/script/" class="nav-link router-link-active">
  脚本 Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/markdown/" class="nav-link">
  Markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架/类库" class="dropdown-title"><span class="title">框架/类库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架/类库" class="mobile-dropdown-title"><span class="title">框架/类库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          应用程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/spring/" class="nav-link">
  Spring 生态
</a></li><li class="dropdown-subitem"><a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/gis/" class="nav-link">
  Web GIS
</a></li><li class="dropdown-subitem"><a href="/framework/echarts/" class="nav-link">
  ECahrts
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysql/" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          非关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/db/es/" class="nav-link">
  Elasticsearch
</a></li></ul></li><li class="dropdown-item"><h4>
          持久层框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用技术" class="dropdown-title"><span class="title">应用技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="应用技术" class="mobile-dropdown-title"><span class="title">应用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/applied-tech/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/svn/" class="nav-link">
  SVN
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/mq/" class="nav-link">
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/k8s/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/cas/" class="nav-link">
  CAS
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/workflow/" class="nav-link">
  Workflow
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机素养" class="dropdown-title"><span class="title">计算机素养</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机素养" class="mobile-dropdown-title"><span class="title">计算机素养</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-literacy/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/data-structure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发常识" class="dropdown-title"><span class="title">开发常识</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发常识" class="mobile-dropdown-title"><span class="title">开发常识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/common-sense/common/common_sense.html" class="nav-link">
  常识
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/ide-settings/" class="nav-link">
  IDE 开发环境配置
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/log/" class="nav-link">
  Log
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/test/" class="nav-link">
  Test
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/swagger/" class="nav-link">
  Swagger
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/share/recommend/" class="nav-link">
  推荐
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/effective_java.html" class="nav-link">
  Effective Java
</a></li><li class="dropdown-item"><!----> <a href="/read/clean_code.html" class="nav-link">
  代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/read/coding_style.html" class="nav-link">
  Coding Style
</a></li><li class="dropdown-item"><!----> <a href="/read/gx.html" class="nav-link">
  高项笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wow56/wow56.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言/语法" class="dropdown-title"><span class="title">语言/语法</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言/语法" class="mobile-dropdown-title"><span class="title">语言/语法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lang/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/lang/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/lang/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lang/js/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/lang/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lang/regex/" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/lang/script/" class="nav-link router-link-active">
  脚本 Script
</a></li><li class="dropdown-item"><!----> <a href="/lang/markdown/" class="nav-link">
  Markdown
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架/类库" class="dropdown-title"><span class="title">框架/类库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架/类库" class="mobile-dropdown-title"><span class="title">框架/类库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          应用程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/spring/" class="nav-link">
  Spring 生态
</a></li><li class="dropdown-subitem"><a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/gis/" class="nav-link">
  Web GIS
</a></li><li class="dropdown-subitem"><a href="/framework/echarts/" class="nav-link">
  ECahrts
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysql/" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          非关系型
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/db/es/" class="nav-link">
  Elasticsearch
</a></li></ul></li><li class="dropdown-item"><h4>
          持久层框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用技术" class="dropdown-title"><span class="title">应用技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="应用技术" class="mobile-dropdown-title"><span class="title">应用技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/applied-tech/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/svn/" class="nav-link">
  SVN
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/mq/" class="nav-link">
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/k8s/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/cas/" class="nav-link">
  CAS
</a></li><li class="dropdown-item"><!----> <a href="/applied-tech/workflow/" class="nav-link">
  Workflow
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机素养" class="dropdown-title"><span class="title">计算机素养</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机素养" class="mobile-dropdown-title"><span class="title">计算机素养</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer-literacy/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/computer-literacy/data-structure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发常识" class="dropdown-title"><span class="title">开发常识</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发常识" class="mobile-dropdown-title"><span class="title">开发常识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/common-sense/common/common_sense.html" class="nav-link">
  常识
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/ide-settings/" class="nav-link">
  IDE 开发环境配置
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/log/" class="nav-link">
  Log
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/test/" class="nav-link">
  Test
</a></li><li class="dropdown-item"><!----> <a href="/common-sense/swagger/" class="nav-link">
  Swagger
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/share/recommend/" class="nav-link">
  推荐
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读" class="mobile-dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/effective_java.html" class="nav-link">
  Effective Java
</a></li><li class="dropdown-item"><!----> <a href="/read/clean_code.html" class="nav-link">
  代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/read/coding_style.html" class="nav-link">
  Coding Style
</a></li><li class="dropdown-item"><!----> <a href="/read/gx.html" class="nav-link">
  高项笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wow56/wow56.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lang/script/" aria-current="page" class="sidebar-link">脚本 Script 目录</a></li><li><a href="/lang/script/shell_script.html" aria-current="page" class="active sidebar-link">Shell 脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#参考文档" class="sidebar-link">参考文档</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#常见问题" class="sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#脚本位置问题" class="sidebar-link">脚本位置问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#提炼" class="sidebar-link">提炼</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-简介" class="sidebar-link">Shell 简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell" class="sidebar-link">Shell</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-脚本-2" class="sidebar-link">Shell 脚本</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-环境" class="sidebar-link">Shell 环境</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#第一个-shell-脚本" class="sidebar-link">第一个 shell 脚本</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#运行脚本" class="sidebar-link">运行脚本</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-注释" class="sidebar-link">Shell 注释</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#单行注释" class="sidebar-link">单行注释</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#多行注释" class="sidebar-link">多行注释</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-变量" class="sidebar-link">Shell 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#定义变量" class="sidebar-link">定义变量</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#使用变量" class="sidebar-link">使用变量</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#只读变量" class="sidebar-link">只读变量</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#删除变量" class="sidebar-link">删除变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-字符串" class="sidebar-link">Shell 字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#单引号" class="sidebar-link">单引号</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#双引号" class="sidebar-link">双引号</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#字符串长度" class="sidebar-link">字符串长度</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#提取子字符串" class="sidebar-link">提取子字符串</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#查找子字符串" class="sidebar-link">查找子字符串</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-数组" class="sidebar-link">Shell 数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#定义数组" class="sidebar-link">定义数组</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#读取数组" class="sidebar-link">读取数组</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#获取数组长度" class="sidebar-link">获取数组长度</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-运算符" class="sidebar-link">Shell 运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#算术运算符" class="sidebar-link">算术运算符</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#关系运算符" class="sidebar-link">关系运算符</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#布尔运算符" class="sidebar-link">布尔运算符</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#逻辑运算符" class="sidebar-link">逻辑运算符</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#字符串运算符" class="sidebar-link">字符串运算符</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#文件测试运算符" class="sidebar-link">文件测试运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-传递参数" class="sidebar-link">Shell 传递参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#参数处理" class="sidebar-link">参数处理</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#与-区别" class="sidebar-link">$* 与 $@ 区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#echo-命令" class="sidebar-link">echo 命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#显示普通字符串" class="sidebar-link">显示普通字符串</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#显示转义字符" class="sidebar-link">显示转义字符</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#显示变量" class="sidebar-link">显示变量</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#显示结果定向到文件" class="sidebar-link">显示结果定向到文件</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#原样输出字符串" class="sidebar-link">原样输出字符串</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#显示命令执行结果" class="sidebar-link">显示命令执行结果</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#printf-命令" class="sidebar-link">printf 命令</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#test-命令" class="sidebar-link">test 命令</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#流程控制" class="sidebar-link">流程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#if-else" class="sidebar-link">IF ELSE</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#for" class="sidebar-link">FOR</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#while" class="sidebar-link">WHILE</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#until" class="sidebar-link">UNTIL</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#case" class="sidebar-link">CASE</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#无限循环" class="sidebar-link">无限循环</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#跳出循环" class="sidebar-link">跳出循环</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#shell-函数" class="sidebar-link">Shell 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#函数定义" class="sidebar-link">函数定义</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#函数参数" class="sidebar-link">函数参数</a></li></ul></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#文件包含" class="sidebar-link">文件包含</a></li><li class="sidebar-sub-header"><a href="/lang/script/shell_script.html#讨论区" class="sidebar-link">讨论区</a></li></ul></li><li><a href="/lang/script/bat_script.html" class="sidebar-link">BAT 脚本</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shell-脚本"><a href="#shell-脚本" class="header-anchor">#</a> Shell 脚本</h1> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ul><li><a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer">菜鸟 Shell 教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h3 id="脚本位置问题"><a href="#脚本位置问题" class="header-anchor">#</a> 脚本位置问题</h3> <p>常用方式 <code>$(cd $(dirname $0))</code></p> <p>常用 <code>$0</code> 与 <code>${BASH_SOURCE[0]}</code> 两种方式去获取当前所执行脚本所在位置。他们的区别如下：</p> <p>如果 <code>/home/haha</code> 下存在两个脚本 <code>a.sh</code> 和 <code>b.sh</code>：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># a.sh</span>
<span class="token comment">#!/bin/bash</span>
./b.sh

<span class="token comment"># -------</span>

<span class="token comment"># b.sh</span>
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$0</span> is <span class="token variable">$0</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">${<span class="token environment constant">BASH_SOURCE</span><span class="token punctuation">[</span>0<span class="token punctuation">]</span>}</span> is <span class="token variable">${<span class="token environment constant">BASH_SOURCE</span><span class="token punctuation">[</span>0<span class="token punctuation">]</span>}</span>&quot;</span>

<span class="token comment"># 输出：</span>
<span class="token comment"># $0 is ./a.sh</span>
<span class="token comment"># ${BASH_SOURCE[0]} is ./b.sh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><code>$0</code> 获取的是调用 b 的 a 脚本。</li> <li><code>${BASH_SOURCE[0]}</code> 获取的是当前代码所在的脚本位置。</li></ul> <h2 id="提炼"><a href="#提炼" class="header-anchor">#</a> 提炼</h2> <ul><li>变量名与等号之间不能有空格。</li> <li><code>$a</code> 和 <code>${a}</code> 一样，<code>{</code> 是可选的。</li> <li><code>echo ${#hello_str}</code> 打印字符串长度。
<ul><li><code>#</code> 计算个数</li></ul></li> <li>关联数组 -&gt; Map
<ul><li><code>declare -A array_name=([k]=v [k2]=v2)</code></li></ul></li> <li><code>echo</code> 和 <code>printf</code>,<code>printf</code> 移植性更好。</li> <li>流程控制不能有空语句。</li> <li><code>[ 1 -gt 2 ]</code> 和 <code>((1 &gt; 2))</code></li> <li>case <code>;;</code> = break</li> <li><code>$@</code> 和 <code>$*</code>：
<ul><li>不加双引号没区别。</li> <li>加双引号：
<ul><li><code>&quot;$@&quot;</code> 每个参数就是那一个参数(跟不加一样)。</li> <li><code>&quot;$*&quot;</code> 所有参数作为一个字符串。</li></ul></li></ul></li> <li>文件包含，使用 <code>. ./test.sh</code> 或者 <code>source ./test.sh</code>。
<ul><li>被引用的文件不需要可执行权限。</li></ul></li></ul> <h2 id="shell-简介"><a href="#shell-简介" class="header-anchor">#</a> Shell 简介</h2> <h3 id="shell"><a href="#shell" class="header-anchor">#</a> Shell</h3> <p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。</p> <p>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。</p> <p>Ken Thompson 的 sh 是第一种 Unix Shell，Windows Explorer 是一个典型的图形界面 Shell。</p> <h3 id="shell-脚本-2"><a href="#shell-脚本-2" class="header-anchor">#</a> Shell 脚本</h3> <p>Shell 脚本（shell script），是一种为 shell 编写的脚本程序。</p> <h3 id="shell-环境"><a href="#shell-环境" class="header-anchor">#</a> Shell 环境</h3> <p>Shell 编程跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p> <p>Linux 的 Shell 种类众多，常见的有以下几种：</p> <blockquote><p>打开终端输入 <code>cat /etc/shells</code> 查看本机所有的 shell</p></blockquote> <ul><li>Bourne Shell，（<code>/usr/bin/sh</code> 或者 <code>/bin/sh</code>）</li> <li>Bourne Again Shell，（<code>/bin/bash</code>）</li> <li>C Shell，（<code>/usr/bin/csh</code>）</li> <li>K Shell，（<code>/usr/bin/ksh</code>）</li> <li>Shell for Root，（<code>/sbin/sh</code>）</li> <li>...</li></ul> <h3 id="第一个-shell-脚本"><a href="#第一个-shell-脚本" class="header-anchor">#</a> 第一个 shell 脚本</h3> <p><code>#!</code> 后面跟 Shell 路径，是声明使用指定 Shell 解释这个脚本，即声明用什么解释器来执行。</p> <ul><li><code>-e</code> 参数，每条指令之后，都可以用 <code>#？</code> 去判断他的返回值，
零就是正确执行，非零就是执行有误，加了 <code>-e</code> 之后，就不用自己写代码去判断返回值，返回非零，脚本就会退出。</li></ul> <p>新建一个文件（使用 vim 等方式） test.sh，这里的 sh 扩展名并没有实际意义，只是为了见名知意。</p> <p>例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#! /bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;hello world !&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>echo</code> 用于向窗口输出文本</p> <h3 id="运行脚本"><a href="#运行脚本" class="header-anchor">#</a> 运行脚本</h3> <h4 id="_1-作为可执行程序"><a href="#_1-作为可执行程序" class="header-anchor">#</a> 1.作为可执行程序</h4> <p>将以上代码保存为 test.sh，并 cd 到相应目录：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> +x ./test.sh <span class="token comment"># 给这个脚本设置可执行权限</span>
./test.sh <span class="token comment"># 执行脚本</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注意：</strong> 这里一定使用 <code>./test.sh</code>，而不是 <code>test.sh</code>，运行其他的二进制程序也一样。</p> <p>直接写 test.sh，linux 系统会去直接 PATH 里寻找有没有叫 test.sh 的，而只有 <code>/bin</code>，<code>/sbin</code>，<code>/usr/bin</code>，<code>/usr/sbin</code> 等在 PATH 里，你的当前目录通常不
在 PATH 里，所以写成 test.sh 是会找不到命令的，要用 <code>./test.sh</code> 告诉系统说，就在当前目录找。</p> <p>具体详见 -&gt; <a href="/computer-literacy/linux/using_linux.html#path">环境变量</a></p> <h4 id="_2-作为解释器参数"><a href="#_2-作为解释器参数" class="header-anchor">#</a> 2.作为解释器参数</h4> <p>这种运行方式是，直接运行解释器，其参数就是 shell 脚本的文件名，如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/bin/sh test.sh
/bin/php test.php
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。</p> <h2 id="shell-注释"><a href="#shell-注释" class="header-anchor">#</a> Shell 注释</h2> <h3 id="单行注释"><a href="#单行注释" class="header-anchor">#</a> 单行注释</h3> <p>使用 <code>#</code>，如果多行，可以考虑抽成一个方法，这样的话只要方法不被调用，那么就不会执行。
相当于起到了注释的作用。</p> <h3 id="多行注释"><a href="#多行注释" class="header-anchor">#</a> 多行注释</h3> <p>使用 <code>:&lt;&lt;</code>+<code>任意字符</code> 开头，以 <code>开头指定的任意字符</code> 结尾。</p> <p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>:<span class="token operator">&lt;&lt;</span><span class="token string">EOF
注释内容...
注释内容...
注释内容...
EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>:<span class="token operator">&lt;&lt;</span>！
注释内容<span class="token punctuation">..</span>.
注释内容<span class="token punctuation">..</span>.
注释内容<span class="token punctuation">..</span>.
！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="shell-变量"><a href="#shell-变量" class="header-anchor">#</a> Shell 变量</h2> <h3 id="定义变量"><a href="#定义变量" class="header-anchor">#</a> 定义变量</h3> <ul><li>变量名与等号之间不能有空格</li> <li>命名只能只用字母、数字、下划线</li> <li>不使用美元符号 <code>$</code></li> <li>不能以数字开头</li> <li>不能使用 bash 中的关键字（可以使用 help 命令查看保留关键字）</li></ul> <h3 id="使用变量"><a href="#使用变量" class="header-anchor">#</a> 使用变量</h3> <p>使用一个定义过的变量，需要在变量名前加 <code>$</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">&quot;hello&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$a</span>
<span class="token comment"># 或者</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${a}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>变量名外的花括号可以选。</p> <h3 id="只读变量"><a href="#只读变量" class="header-anchor">#</a> 只读变量</h3> <p>使用 <code>readonly</code> 关键字</p> <p>script 内容：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">scheme</span><span class="token operator">=</span><span class="token string">&quot;http&quot;</span>
<span class="token builtin class-name">readonly</span> scheme
<span class="token assign-left variable">scheme</span><span class="token operator">=</span><span class="token string">&quot;https&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>执行脚本</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 使用 bash</span>
<span class="token comment"># 作为参数执行</span>
/bin/bash test.sh
test.sh: line <span class="token number">4</span>: scheme: <span class="token builtin class-name">readonly</span> variable
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 使用 zsh</span>
<span class="token comment"># 使用 ./ 执行，不要忘记修改可执行权限</span>
➜  Desktop <span class="token function">chmod</span> +x test.sh
➜  Desktop ./test.sh
./test.sh: line <span class="token number">4</span>: scheme: <span class="token builtin class-name">readonly</span> variable
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="删除变量"><a href="#删除变量" class="header-anchor">#</a> 删除变量</h3> <p>使用 <code>unset</code> 关键字</p> <p>格式 <code>unset variable</code></p> <p>unset 不能删除只读变量</p> <h2 id="shell-字符串"><a href="#shell-字符串" class="header-anchor">#</a> Shell 字符串</h2> <p>字符串可以用双引号、单引号，也可以不用引号。</p> <h3 id="单引号"><a href="#单引号" class="header-anchor">#</a> 单引号</h3> <ul><li>单引号中任何字符都会原样输出</li> <li>单引号字符串中的变量无效</li> <li>单引号中不可以出现单个单引号，即使是使用了转义</li> <li>单引号中使用单引号，可以实现拼接，这时候可以使用变量</li></ul> <h3 id="双引号"><a href="#双引号" class="header-anchor">#</a> 双引号</h3> <ul><li>可以使用变量</li> <li>可以出现转义字符</li></ul> <h3 id="字符串长度"><a href="#字符串长度" class="header-anchor">#</a> 字符串长度</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">hello_str</span><span class="token operator">=</span><span class="token string">&quot;hello&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>hello_str}</span> <span class="token comment"># 输出 5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="提取子字符串"><a href="#提取子字符串" class="header-anchor">#</a> 提取子字符串</h3> <p>从第 2 个字符开始，截取 3 个字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">hello_str</span><span class="token operator">=</span><span class="token string">&quot;hello&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${hello_str<span class="token operator">:</span>1<span class="token operator">:</span>3}</span> <span class="token comment"># 输出 ell</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>索引从 0 开始</p> <h3 id="查找子字符串"><a href="#查找子字符串" class="header-anchor">#</a> 查找子字符串</h3> <p>查找字符 i 或 o 的位置(哪个字母先出现就计算哪个)：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">string</span><span class="token operator">=</span><span class="token string">&quot;runoob is a great site&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> index <span class="token string">&quot;<span class="token variable">$string</span>&quot;</span> io<span class="token variable">`</span></span>  <span class="token comment"># 输出 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意： 以上脚本中 ` 是反引号，而不是单引号 <code>'</code>，不要看错了哦。</p> <h2 id="shell-数组"><a href="#shell-数组" class="header-anchor">#</a> Shell 数组</h2> <p>bash 支持一维数组（不支持多维数组），并且没有限定数组的大小。</p> <p>类似于 C 语言，数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0。</p> <h3 id="定义数组"><a href="#定义数组" class="header-anchor">#</a> 定义数组</h3> <p>在 Shell 中，用括号来表示数组，数组元素用&quot;空格&quot;符号分割开。定义数组的一般形式为：</p> <p>数组名=(值1 值2 ... 值n)</p> <p>例如：</p> <p><code>array_name=(value0 value1 value2 value3)</code></p> <p>或者</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">array_name</span><span class="token operator">=</span><span class="token punctuation">(</span>
value0
value1
value2
value3
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>还可以单独定义数组的各个分量：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>array_name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>value0
array_name<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>value1
array_name<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>valuen
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>可以不使用连续的下标，而且下标的范围没有限制。</p></blockquote> <h3 id="读取数组"><a href="#读取数组" class="header-anchor">#</a> 读取数组</h3> <p>读取数组元素值的一般格式是：<code>${数组名[下标]}</code></p> <p>例 1：获取指定值 <code>value=${array_name[n]}</code></p> <p>使用 <code>@</code> 可以使用获取数组中的所有元素</p> <p>例 2：<code>echo ${array_name[@]}</code></p> <h3 id="获取数组长度"><a href="#获取数组长度" class="header-anchor">#</a> 获取数组长度</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 取得数组元素的个数</span>
<span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token variable">${<span class="token operator">#</span>array_name<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
<span class="token comment"># 或者</span>
<span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token variable">${<span class="token operator">#</span>array_name<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>

<span class="token comment"># 取得数组单个元素的长度</span>
<span class="token assign-left variable">lengthn</span><span class="token operator">=</span><span class="token variable">${<span class="token operator">#</span>array_name<span class="token punctuation">[</span>n<span class="token punctuation">]</span>}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="shell-运算符"><a href="#shell-运算符" class="header-anchor">#</a> Shell 运算符</h2> <p>Shell 和其他编程语言一样，支持多种运算符，包括：</p> <ul><li>算数运算符</li> <li>关系运算符</li> <li>布尔运算符</li> <li>字符串运算符</li> <li>文件测试运算符</li></ul> <p>原生 bash 不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</p> <p>expr 是一款表达式计算工具，使用它能完成表达式的求值操作。</p> <p>例如，两个数相加(注意使用的是反引号 ` 而不是单引号 <code>'</code>)：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">2</span> + <span class="token number">2</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;两数之和为 : <span class="token variable">$val</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>两数之和为 <span class="token builtin class-name">:</span> <span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>两点注意：</p> <ul><li>表达式和运算符之间要有空格，例如 <code>2+2</code> 是不对的，必须写成 <code>2 + 2</code>，这与我们熟悉的大多数编程语言不一样。</li> <li>完整的表达式要被 `` 包含，注意这个字符不是常用的单引号，在 Esc 键下边。</li></ul> <h3 id="算术运算符"><a href="#算术运算符" class="header-anchor">#</a> 算术运算符</h3> <ul><li><code>+</code> 加法 `<code>expr $a + $b</code>` 结果为 30</li> <li><code>-</code> 减法 `<code>expr $a - $b</code>` 结果为 -10</li> <li><code>*</code> 乘法 `<code>expr $a \* $b</code>` 结果为 200
<ul><li><code>*</code> 在使用中需要写成 <code>\*</code> 来转义</li></ul></li> <li><code>/</code> 除法 `<code>expr $b / $a</code>` 结果为 2</li> <li><code>%</code> 取余 `<code>expr $b % $a</code>` 结果为 0</li> <li><code>=</code> 赋值 <code>a=$b</code> 将把变量 b 的值赋给 a</li> <li><code>==</code> 相等。用于比较两个数字，相同则返回 true
<ul><li><code>[ $a == $b ]</code> 返回 false。</li></ul></li> <li><code>!=</code> 不相等。用于比较两个数字，不相同则返回 true
<ul><li><code>[ $a != $b ]</code> 返回 true。</li></ul></li></ul> <p><strong>注意：</strong> 条件表达式要放在方括号之间，并且要有空格，例如: <code>[$a==$b]</code> 是错误的，必须写成 <code>[ $a == $b ]</code>。</p> <h3 id="关系运算符"><a href="#关系运算符" class="header-anchor">#</a> 关系运算符</h3> <p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p> <ul><li><code>-eq</code>，等于</li> <li><code>-ne</code>，不等</li> <li><code>-gt</code>，大于</li> <li><code>-lt</code>，小于</li> <li><code>-ge</code>，大于等于</li> <li><code>-le</code>，小于等于</li></ul> <p>返回值是布尔值 true / false</p> <h3 id="布尔运算符"><a href="#布尔运算符" class="header-anchor">#</a> 布尔运算符</h3> <p>格式： <code>[ $a ]</code></p> <ul><li><code>！</code>，非</li> <li><code>-o</code>，或</li> <li><code>-a</code>，与</li></ul> <h3 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> 逻辑运算符</h3> <ul><li><code>&amp;&amp;</code>，逻辑与</li> <li><code>||</code>，逻辑或</li></ul> <h3 id="字符串运算符"><a href="#字符串运算符" class="header-anchor">#</a> 字符串运算符</h3> <ul><li><code>=</code>，检测两个字符串是否相等，相等返回 true</li> <li><code>！=</code>，两个字符串是否不相等</li> <li><code>-z</code>，字符串长度是否为 0</li> <li><code>-n</code>，字符串长度是否不为 0</li> <li><code>$</code>，字符串是否为空</li></ul> <h3 id="文件测试运算符"><a href="#文件测试运算符" class="header-anchor">#</a> 文件测试运算符</h3> <ul><li><code>-b file</code>，检测文件是否为块设备文件</li> <li><code>-c</code>，是否是字符设备</li> <li><code>-d</code>，是否是目录</li> <li><code>-f</code>，是否为普通文件</li> <li><code>-g</code>，是否设置了 SGID 位</li> <li><code>-k</code>，是否设置了粘着位</li> <li><code>-p</code>，是否是有名管道</li> <li><code>-u</code>，是否设置了 SUID 位</li> <li><code>-r</code>，文件是否可读</li> <li><code>-w</code>，文件是否可写</li> <li><code>-x</code>，文件是否可执行</li> <li><code>-s</code>，文件是否为空，文件大小是否大于 0</li> <li><code>-e</code>，文件（包括目录）是否存在</li></ul> <p>其他检查符：</p> <ul><li><code>-S</code>，判断文件是否 socket</li> <li><code>-L</code>，判断文件是否存在并且是一个符号链接</li></ul> <h2 id="shell-传递参数"><a href="#shell-传递参数" class="header-anchor">#</a> Shell 传递参数</h2> <p>我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：<code>$n</code>。</p> <p>n 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推 ...</p> <p>示例：</p> <p>编写脚本：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> 第一个参数：<span class="token variable">$1</span>
<span class="token builtin class-name">echo</span> 第一个参数：<span class="token variable">$2</span>
<span class="token builtin class-name">echo</span> 第一个参数：<span class="token variable">$3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>执行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./test.sh <span class="token number">9</span> <span class="token number">8</span> <span class="token number">7</span>
第一个参数：9
第一个参数：8
第一个参数：7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="参数处理"><a href="#参数处理" class="header-anchor">#</a> 参数处理</h3> <ul><li><code>$#</code> 传递到脚本的参数个数。</li> <li><code>$*</code> 以一个单字符串显示所有向脚本传递的参数。
<ul><li>如 <code>$*</code> 用 <code>&quot;</code> 括起来的情况、以 <code>&quot;$1 $2 … $n&quot;</code> 的形式输出所有参数。</li></ul></li> <li><code>$$</code> 脚本运行的当前进程 ID 号。</li> <li><code>$!</code> 后台运行的最后一个进程的ID号。</li> <li><code>$@</code> 与 <code>$*</code> 相同，但是使用时加引号，并在引号中返回每个参数。
<ul><li>如 <code>$@</code> 用 <code>&quot;</code> 括起来的情况、以 <code>&quot;$1&quot;</code> <code>&quot;$2&quot;</code> … <code>&quot;$n&quot;</code> 的形式输出所有参数。</li></ul></li> <li><code>$-</code> 显示 Shell 使用的当前选项，与 set 命令功能相同。</li> <li><code>$?</code> 显示最后命令的退出状态。0 表示没有错误，其他任何值表明有错误。</li></ul> <h3 id="与-区别"><a href="#与-区别" class="header-anchor">#</a> <code>$*</code> 与 <code>$@</code> 区别</h3> <p>相同点：都是引用所有参数。</p> <p>不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，则 &quot;*&quot; 等价于 &quot;1 2 3&quot;（传递了一个参数），而 &quot;@&quot; 等价于 &quot;1&quot; &quot;2&quot; &quot;3&quot;（传递了三个参数）。</p> <h2 id="echo-命令"><a href="#echo-命令" class="header-anchor">#</a> echo 命令</h2> <p>用于输出字符串： <code>echo string</code></p> <h3 id="显示普通字符串"><a href="#显示普通字符串" class="header-anchor">#</a> 显示普通字符串</h3> <p><code>echo &quot;hello world&quot;</code></p> <p>双引号可以省略：</p> <p><code>echo hello world</code></p> <h3 id="显示转义字符"><a href="#显示转义字符" class="header-anchor">#</a> 显示转义字符</h3> <p><code>echo &quot;\&quot;hello world\&quot;&quot;</code></p> <p>结果是：</p> <p><code>&quot;hello world&quot;</code></p> <h3 id="显示变量"><a href="#显示变量" class="header-anchor">#</a> 显示变量</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>wang
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$name</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>结果是：</p> <p><code>wang</code></p> <p>read 命令从标准输入中读取一行,并把输入行的每个字段的值指定给 shell 变量</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">read</span> name
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$name</span> It is a test&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="显示结果定向到文件"><a href="#显示结果定向到文件" class="header-anchor">#</a> 显示结果定向到文件</h3> <p><code>echo &quot;hello world&quot; &gt; file1</code></p> <h3 id="原样输出字符串"><a href="#原样输出字符串" class="header-anchor">#</a> 原样输出字符串</h3> <p>不进行转义、取变量，使用单引号</p> <p><code>echo '$name\&quot;'</code></p> <p>结果是：</p> <p><code>$name\&quot;</code></p> <h3 id="显示命令执行结果"><a href="#显示命令执行结果" class="header-anchor">#</a> 显示命令执行结果</h3> <p>echo `date`</p> <p><strong>注意：</strong> 这里使用的是反引号</p> <h2 id="printf-命令"><a href="#printf-命令" class="header-anchor">#</a> printf 命令</h2> <p>类似于 echo 命令，printf 是一个输出命令，这个命令是模仿了 C 中的 printf() 程序。</p> <p>printf 由 POSIX 标准定义，所以移植性比 echo 要好。</p> <p>printf 使用引用文本或空格分隔的参数。</p> <p>默认的 printf 不会像 echo 一样自动添加换行符，需要手动添加 <code>\n</code></p> <p><code>%s</code> <code>%c</code> <code>%d</code> <code>%f</code> 都是格式替代符：</p> <ul><li><code>％s</code> 输出一个字符串</li> <li><code>％d</code> 整型输出</li> <li><code>％c</code> 输出一个字符</li> <li><code>％f</code> 输出实数，以小数形式输出
<ul><li><code>%-4.2f</code>，格式化为小数，保留两位小数，左对齐。</li></ul></li></ul> <p>示例：</p> <p><code>printf &quot;hello world %-5s&quot; hi \n</code></p> <p><code>%-5s</code>，是一个占位符，<code>-</code> 是指左对齐，5 是指占 5 位。</p> <h2 id="test-命令"><a href="#test-命令" class="header-anchor">#</a> test 命令</h2> <p>test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p> <p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token number">100</span>

<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token variable">$num1</span> -eq <span class="token variable">$num2</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;相等&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;不等&quot;</span>
<span class="token keyword">fi</span>


<span class="token keyword">if</span> <span class="token builtin class-name">test</span> $<span class="token punctuation">[</span>num1+1<span class="token punctuation">]</span> -eq $<span class="token punctuation">[</span>num2+1<span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;相等&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;不等&quot;</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>[]</code> 执行基本的算数运算</p> <h2 id="流程控制"><a href="#流程控制" class="header-anchor">#</a> 流程控制</h2> <h3 id="if-else"><a href="#if-else" class="header-anchor">#</a> IF ELSE</h3> <p>语法：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> condition
<span class="token keyword">then</span>
    command1
    command2
<span class="token keyword">else</span>
    <span class="token builtin class-name">command</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>if else-if else</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> condition1
<span class="token keyword">then</span>
    command1
<span class="token keyword">elif</span> condition2
<span class="token keyword">then</span>
    command2
<span class="token keyword">else</span>
    <span class="token builtin class-name">command</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>示例：</p> <p>写成一行(适用于终端命令提示符)</p> <p><code>if [ $(ps -ef | grep -c &quot;ssh&quot;) -gt 1 ]; then echo &quot;true&quot;; fi</code></p> <h3 id="for"><a href="#for" class="header-anchor">#</a> FOR</h3> <p>格式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> item1
<span class="token keyword">do</span>
    command1
    command2
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>写成一行</p> <p><code>for var in item1 item2 ... itemN; do command1; command2… done;</code></p> <p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">loop</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The value is: <span class="token variable">$loop</span>&quot;</span>
<span class="token keyword">done</span>
---结果
The value is: <span class="token number">1</span>
The value is: <span class="token number">2</span>
The value is: <span class="token number">3</span>
The value is: <span class="token number">4</span>
The value is: <span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">str</span> <span class="token keyword">in</span> This is a string
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$str</span>
<span class="token keyword">done</span>
---结果
This
is
a
string
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="while"><a href="#while" class="header-anchor">#</a> WHILE</h3> <p>格式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> condition
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">int</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span><span class="token variable"><span class="token punctuation">((</span> $int<span class="token operator">&lt;=</span><span class="token number">5</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$int</span>
    <span class="token builtin class-name">let</span> <span class="token string">&quot;int++&quot;</span>
<span class="token keyword">done</span>
---结果
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这里使用了 Bash let 命令，它用于执行一个或多个表达式，变量计算中不需要加上 <code>$</code> 来表示变量。</p> <h3 id="until"><a href="#until" class="header-anchor">#</a> UNTIL</h3> <p>until 循环执行一系列命令直至条件为 true 时停止</p> <p>until 循环与 while 循环在处理方式上相反</p> <p>一般 while 循环优于 until 循环，但有时，until 更好用</p> <p>格式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">until</span> condition
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 输出 0-9</span>
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token variable">$a</span> -lt <span class="token number">10</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$a</span>
    <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $a +1<span class="token variable">`</span></span>
<span class="token keyword">done</span>
---结果
<span class="token number">0</span>
<span class="token number">1</span>
<span class="token punctuation">..</span>.
<span class="token number">9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="case"><a href="#case" class="header-anchor">#</a> CASE</h3> <p>相当于 switch ... case 语句，多分支结构。</p> <p>格式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">case</span> 值 <span class="token keyword">in</span>
模式1<span class="token punctuation">)</span>
    command1
    command2
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
模式2<span class="token punctuation">)</span>
    command3
    command4
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
    command5
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>;;</code> 两个分号表示 break，跳出整个 case 循环，<code>*</code> 星号表示 default。</p> <p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">read</span> num
<span class="token keyword">case</span> num <span class="token keyword">in</span>
<span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> hello
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> hi
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> world
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="无限循环"><a href="#无限循环" class="header-anchor">#</a> 无限循环</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>或者</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token boolean">true</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">command</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>或者</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> <span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token punctuation">))</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="跳出循环"><a href="#跳出循环" class="header-anchor">#</a> 跳出循环</h3> <h4 id="break"><a href="#break" class="header-anchor">#</a> break</h4> <p>功能：跳出循环</p> <p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token comment">#!/bin/bash</span>
<span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> -n <span class="token string">&quot;输入 1 到 5 之间的数字:&quot;</span>
    <span class="token builtin class-name">read</span> aNum
    <span class="token keyword">case</span> <span class="token variable">$aNum</span> <span class="token keyword">in</span>
        <span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;你输入的数字为 <span class="token variable">$aNum</span>!&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;你输入的数字不是 1 到 5 之间的! 游戏结束&quot;</span>
            <span class="token builtin class-name">break</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token keyword">done</span>
---结果
输入 <span class="token number">1</span> 到 <span class="token number">5</span> 之间的数字:3
你输入的数字为 <span class="token number">3</span><span class="token operator">!</span>
输入 <span class="token number">1</span> 到 <span class="token number">5</span> 之间的数字:7
你输入的数字不是 <span class="token number">1</span> 到 <span class="token number">5</span> 之间的<span class="token operator">!</span> 游戏结束
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="continue"><a href="#continue" class="header-anchor">#</a> continue</h4> <p>功能：跳出当前循环</p> <h2 id="shell-函数"><a href="#shell-函数" class="header-anchor">#</a> Shell 函数</h2> <h3 id="函数定义"><a href="#函数定义" class="header-anchor">#</a> 函数定义</h3> <p>定义格式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    action；
    <span class="token builtin class-name">return</span> int；
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>函数返回值在调用该函数后通过 <code>$?</code> 来获得。</p> <p>示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function-name function">funWithReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;这个函数会对输入的两个数字进行相加运算...&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;输入第一个数字: &quot;</span>
    <span class="token builtin class-name">read</span> aNum
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;输入第二个数字: &quot;</span>
    <span class="token builtin class-name">read</span> anotherNum
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;两个数字分别为 <span class="token variable">$aNum</span> 和 <span class="token variable">$anotherNum</span> !&quot;</span>
    <span class="token builtin class-name">return</span> <span class="token variable"><span class="token variable">$((</span>$aNum<span class="token operator">+</span>$anotherNum<span class="token variable">))</span></span>
<span class="token punctuation">}</span>
<span class="token comment"># 执行函数</span>
funWithReturn
<span class="token comment"># 使用 $? 取函数返回值</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;输入的两个数字之和为 <span class="token variable">$?</span> !&quot;</span>
---结果
这个函数会对输入的两个数字进行相加运算<span class="token punctuation">..</span>.
输入第一个数字:
<span class="token number">1</span>
输入第二个数字:
<span class="token number">2</span>
两个数字分别为 <span class="token number">1</span> 和 <span class="token number">2</span> <span class="token operator">!</span>
输入的两个数字之和为 <span class="token number">3</span> <span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>注意：</strong> 所有函数在使用前必须定义。
这意味着必须将函数放在脚本开始部分，直至 shell 解释器首次发现它时，才可以使用。</p> <p>调用函数仅使用其函数名即可。</p> <h3 id="函数参数"><a href="#函数参数" class="header-anchor">#</a> 函数参数</h3> <p>在函数内部使用 <code>$n</code> 来取值，传值 <code>函数名 p1 p2</code>。</p> <p><strong>注意：</strong> <code>$10</code> 取不到第 10 个函数值，需要使用 <code>${10}</code> 形式取值。</p> <p>当 n&gt;=10 的时候，需要使用 <code>${n}</code> 的形式进行取值。</p> <h2 id="文件包含"><a href="#文件包含" class="header-anchor">#</a> 文件包含</h2> <p>和其他语言一样，Shell 也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。</p> <p>Shell 文件包含的语法格式如下：</p> <p><code>. filename # 注意点号(.)和文件名中间有一空格</code></p> <p>或</p> <p><code>source filename</code></p> <p>示例：</p> <p>创建两个 shell 脚本文件。</p> <p>test1.sh 代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;hello world&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>test2.sh 代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#使用 . 号来引用test1.sh 文件</span>
<span class="token builtin class-name">.</span> ./test1.sh

<span class="token comment"># 或者使用以下包含文件代码</span>
<span class="token comment"># source ./test1.sh</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;文件 1 中是：<span class="token variable">$name</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>接下来，我们为 test2.sh 添加可执行权限并执行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> +x test2.sh
./test2.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注意：</strong> 被包含的文件 test1.sh 不需要可执行权限。</p> <h2 id="讨论区"><a href="#讨论区" class="header-anchor">#</a> 讨论区</h2> <blockquote><p>由于评论过多会影响页面最下方的导航，故将评论区做默认折叠处理。</p></blockquote> <details class="custom-block details"><summary>点击查看评论区内容，渴望您的宝贵建议~</summary> <!----></details></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/23/2024, 11:31:05 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lang/script/" class="prev router-link-active">
        脚本 Script 目录
      </a></span> <span class="next"><a href="/lang/script/bat_script.html">
        BAT 脚本
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5780eb53.js" defer></script><script src="/assets/js/2.e1f1d232.js" defer></script><script src="/assets/js/119.94c060f2.js" defer></script>
  </body>
</html>
